var hm=h=>{throw TypeError(h)};var oh=(h,t,n)=>t.has(h)||hm("Cannot "+n);var Qt=(h,t,n)=>(oh(h,t,"read from private field"),n?n.call(h):t.get(h)),Nn=(h,t,n)=>t.has(h)?hm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,n),Ve=(h,t,n,s)=>(oh(h,t,"write to private field"),s?s.call(h,n):t.set(h,n),n),kn=(h,t,n)=>(oh(h,t,"access private method"),n);var dm=(h,t,n,s)=>({set _(a){Ve(h,t,a,n)},get _(){return Qt(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function j0(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var lh={exports:{}},br={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm;function G0(){if(fm)return br;fm=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:h,type:s,key:l,ref:a!==void 0?a:null,props:o}}return br.Fragment=t,br.jsx=n,br.jsxs=n,br}var pm;function V0(){return pm||(pm=1,lh.exports=G0()),lh.exports}var $=V0(),ch={exports:{}},vr={},uh={exports:{}},hh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm;function q0(){return gm||(gm=1,(function(h){function t(k,j){var J=k.length;k.push(j);t:for(;0<J;){var dt=J-1>>>1,At=k[dt];if(0<a(At,j))k[dt]=j,k[J]=At,J=dt;else break t}}function n(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var j=k[0],J=k.pop();if(J!==j){k[0]=J;t:for(var dt=0,At=k.length,D=At>>>1;dt<D;){var V=2*(dt+1)-1,W=k[V],tt=V+1,rt=k[tt];if(0>a(W,J))tt<At&&0>a(rt,W)?(k[dt]=rt,k[tt]=J,dt=tt):(k[dt]=W,k[V]=J,dt=V);else if(tt<At&&0>a(rt,J))k[dt]=rt,k[tt]=J,dt=tt;else break t}}return j}function a(k,j){var J=k.sortIndex-j.sortIndex;return J!==0?J:k.id-j.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();h.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,y=null,b=3,A=!1,E=!1,S=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(k){for(var j=n(p);j!==null;){if(j.callback===null)s(p);else if(j.startTime<=k)s(p),j.sortIndex=j.expirationTime,t(d,j);else break;j=n(p)}}function M(k){if(S=!1,O(k),!E)if(n(d)!==null)E=!0,P||(P=!0,ut());else{var j=n(p);j!==null&&gt(M,j.startTime-k)}}var P=!1,B=-1,I=5,q=-1;function Q(){return _?!0:!(h.unstable_now()-q<I)}function Z(){if(_=!1,P){var k=h.unstable_now();q=k;var j=!0;try{t:{E=!1,S&&(S=!1,T(B),B=-1),A=!0;var J=b;try{e:{for(O(k),y=n(d);y!==null&&!(y.expirationTime>k&&Q());){var dt=y.callback;if(typeof dt=="function"){y.callback=null,b=y.priorityLevel;var At=dt(y.expirationTime<=k);if(k=h.unstable_now(),typeof At=="function"){y.callback=At,O(k),j=!0;break e}y===n(d)&&s(d),O(k)}else s(d);y=n(d)}if(y!==null)j=!0;else{var D=n(p);D!==null&&gt(M,D.startTime-k),j=!1}}break t}finally{y=null,b=J,A=!1}j=void 0}}finally{j?ut():P=!1}}}var ut;if(typeof C=="function")ut=function(){C(Z)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,at=ft.port2;ft.port1.onmessage=Z,ut=function(){at.postMessage(null)}}else ut=function(){w(Z,0)};function gt(k,j){B=w(function(){k(h.unstable_now())},j)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(k){k.callback=null},h.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<k?Math.floor(1e3/k):5},h.unstable_getCurrentPriorityLevel=function(){return b},h.unstable_next=function(k){switch(b){case 1:case 2:case 3:var j=3;break;default:j=b}var J=b;b=j;try{return k()}finally{b=J}},h.unstable_requestPaint=function(){_=!0},h.unstable_runWithPriority=function(k,j){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var J=b;b=k;try{return j()}finally{b=J}},h.unstable_scheduleCallback=function(k,j,J){var dt=h.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?dt+J:dt):J=dt,k){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=J+At,k={id:g++,callback:j,priorityLevel:k,startTime:J,expirationTime:At,sortIndex:-1},J>dt?(k.sortIndex=J,t(p,k),n(d)===null&&k===n(p)&&(S?(T(B),B=-1):S=!0,gt(M,J-dt))):(k.sortIndex=At,t(d,k),E||A||(E=!0,P||(P=!0,ut()))),k},h.unstable_shouldYield=Q,h.unstable_wrapCallback=function(k){var j=b;return function(){var J=b;b=j;try{return k.apply(this,arguments)}finally{b=J}}}})(hh)),hh}var mm;function X0(){return mm||(mm=1,uh.exports=q0()),uh.exports}var dh={exports:{}},yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym;function Y0(){if(ym)return yt;ym=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function w(D,V,W){this.props=D,this.context=V,this.refs=_,this.updater=W||E}w.prototype.isReactComponent={},w.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},w.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function T(){}T.prototype=w.prototype;function C(D,V,W){this.props=D,this.context=V,this.refs=_,this.updater=W||E}var O=C.prototype=new T;O.constructor=C,S(O,w.prototype),O.isPureReactComponent=!0;var M=Array.isArray;function P(){}var B={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function q(D,V,W){var tt=W.ref;return{$$typeof:h,type:D,key:V,ref:tt!==void 0?tt:null,props:W}}function Q(D,V){return q(D.type,V,D.props)}function Z(D){return typeof D=="object"&&D!==null&&D.$$typeof===h}function ut(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(W){return V[W]})}var ft=/\/+/g;function at(D,V){return typeof D=="object"&&D!==null&&D.key!=null?ut(""+D.key):V.toString(36)}function gt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(P,P):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function k(D,V,W,tt,rt){var ht=typeof D;(ht==="undefined"||ht==="boolean")&&(D=null);var ot=!1;if(D===null)ot=!0;else switch(ht){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(D.$$typeof){case h:case t:ot=!0;break;case g:return ot=D._init,k(ot(D._payload),V,W,tt,rt)}}if(ot)return rt=rt(D),ot=tt===""?"."+at(D,0):tt,M(rt)?(W="",ot!=null&&(W=ot.replace(ft,"$&/")+"/"),k(rt,V,W,"",function(zt){return zt})):rt!=null&&(Z(rt)&&(rt=Q(rt,W+(rt.key==null||D&&D.key===rt.key?"":(""+rt.key).replace(ft,"$&/")+"/")+ot)),V.push(rt)),1;ot=0;var Yt=tt===""?".":tt+":";if(M(D))for(var _t=0;_t<D.length;_t++)tt=D[_t],ht=Yt+at(tt,_t),ot+=k(tt,V,W,ht,rt);else if(_t=A(D),typeof _t=="function")for(D=_t.call(D),_t=0;!(tt=D.next()).done;)tt=tt.value,ht=Yt+at(tt,_t++),ot+=k(tt,V,W,ht,rt);else if(ht==="object"){if(typeof D.then=="function")return k(gt(D),V,W,tt,rt);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ot}function j(D,V,W){if(D==null)return D;var tt=[],rt=0;return k(D,tt,"","",function(ht){return V.call(W,ht,rt++)}),tt}function J(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(W){(D._status===0||D._status===-1)&&(D._status=1,D._result=W)},function(W){(D._status===0||D._status===-1)&&(D._status=2,D._result=W)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var dt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},At={map:j,forEach:function(D,V,W){j(D,function(){V.apply(this,arguments)},W)},count:function(D){var V=0;return j(D,function(){V++}),V},toArray:function(D){return j(D,function(V){return V})||[]},only:function(D){if(!Z(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return yt.Activity=y,yt.Children=At,yt.Component=w,yt.Fragment=n,yt.Profiler=a,yt.PureComponent=C,yt.StrictMode=s,yt.Suspense=d,yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,yt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return B.H.useMemoCache(D)}},yt.cache=function(D){return function(){return D.apply(null,arguments)}},yt.cacheSignal=function(){return null},yt.cloneElement=function(D,V,W){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var tt=S({},D.props),rt=D.key;if(V!=null)for(ht in V.key!==void 0&&(rt=""+V.key),V)!I.call(V,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&V.ref===void 0||(tt[ht]=V[ht]);var ht=arguments.length-2;if(ht===1)tt.children=W;else if(1<ht){for(var ot=Array(ht),Yt=0;Yt<ht;Yt++)ot[Yt]=arguments[Yt+2];tt.children=ot}return q(D.type,rt,tt)},yt.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},yt.createElement=function(D,V,W){var tt,rt={},ht=null;if(V!=null)for(tt in V.key!==void 0&&(ht=""+V.key),V)I.call(V,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(rt[tt]=V[tt]);var ot=arguments.length-2;if(ot===1)rt.children=W;else if(1<ot){for(var Yt=Array(ot),_t=0;_t<ot;_t++)Yt[_t]=arguments[_t+2];rt.children=Yt}if(D&&D.defaultProps)for(tt in ot=D.defaultProps,ot)rt[tt]===void 0&&(rt[tt]=ot[tt]);return q(D,ht,rt)},yt.createRef=function(){return{current:null}},yt.forwardRef=function(D){return{$$typeof:u,render:D}},yt.isValidElement=Z,yt.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:J}},yt.memo=function(D,V){return{$$typeof:p,type:D,compare:V===void 0?null:V}},yt.startTransition=function(D){var V=B.T,W={};B.T=W;try{var tt=D(),rt=B.S;rt!==null&&rt(W,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(P,dt)}catch(ht){dt(ht)}finally{V!==null&&W.types!==null&&(V.types=W.types),B.T=V}},yt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},yt.use=function(D){return B.H.use(D)},yt.useActionState=function(D,V,W){return B.H.useActionState(D,V,W)},yt.useCallback=function(D,V){return B.H.useCallback(D,V)},yt.useContext=function(D){return B.H.useContext(D)},yt.useDebugValue=function(){},yt.useDeferredValue=function(D,V){return B.H.useDeferredValue(D,V)},yt.useEffect=function(D,V){return B.H.useEffect(D,V)},yt.useEffectEvent=function(D){return B.H.useEffectEvent(D)},yt.useId=function(){return B.H.useId()},yt.useImperativeHandle=function(D,V,W){return B.H.useImperativeHandle(D,V,W)},yt.useInsertionEffect=function(D,V){return B.H.useInsertionEffect(D,V)},yt.useLayoutEffect=function(D,V){return B.H.useLayoutEffect(D,V)},yt.useMemo=function(D,V){return B.H.useMemo(D,V)},yt.useOptimistic=function(D,V){return B.H.useOptimistic(D,V)},yt.useReducer=function(D,V,W){return B.H.useReducer(D,V,W)},yt.useRef=function(D){return B.H.useRef(D)},yt.useState=function(D){return B.H.useState(D)},yt.useSyncExternalStore=function(D,V,W){return B.H.useSyncExternalStore(D,V,W)},yt.useTransition=function(){return B.H.useTransition()},yt.version="19.2.0",yt}var bm;function Hh(){return bm||(bm=1,dh.exports=Y0()),dh.exports}var fh={exports:{}},Me={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function $0(){if(vm)return Me;vm=1;var h=Hh();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var l=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Me.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Me.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(d,p,null,g)},Me.flushSync=function(d){var p=l.T,g=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=p,s.p=g,s.d.f()}},Me.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(d,p))},Me.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Me.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Me.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=u(p.as,p.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(d)},Me.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Me.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=u(p.as,p.crossOrigin);s.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(d)},Me.requestFormReset=function(d){s.d.r(d)},Me.unstable_batchedUpdates=function(d,p){return d(p)},Me.useFormState=function(d,p,g){return l.H.useFormState(d,p,g)},Me.useFormStatus=function(){return l.H.useHostTransitionStatus()},Me.version="19.2.0",Me}var Am;function K0(){if(Am)return fh.exports;Am=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),fh.exports=$0(),fh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function W0(){if(Sm)return vr;Sm=1;var h=X0(),t=Hh(),n=K0();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var i=e,r=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(r=i.return),e=i.return;while(e)}return i.tag===3?r:null}function l(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function u(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=o(e),i===null)throw Error(s(188));return i!==e?null:e}for(var r=e,c=i;;){var f=r.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){r=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===r)return d(f),e;if(m===c)return d(f),i;m=m.sibling}throw Error(s(188))}if(r.return!==c.return)r=f,c=m;else{for(var v=!1,x=f.child;x;){if(x===r){v=!0,r=f,c=m;break}if(x===c){v=!0,c=f,r=m;break}x=x.sibling}if(!v){for(x=m.child;x;){if(x===r){v=!0,r=m,c=f;break}if(x===c){v=!0,c=m,r=f;break}x=x.sibling}if(!v)throw Error(s(189))}}if(r.alternate!==c)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:i}function g(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=g(e),i!==null)return i;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ut(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var ft=Symbol.for("react.client.reference");function at(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ft?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case w:return"Profiler";case _:return"StrictMode";case M:return"Suspense";case P:return"SuspenseList";case q:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case C:return e.displayName||"Context";case T:return(e._context.displayName||"Context")+".Consumer";case O:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return i=e.displayName||null,i!==null?i:at(e.type)||"Memo";case I:i=e._payload,e=e._init;try{return at(e(i))}catch{}}return null}var gt=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},dt=[],At=-1;function D(e){return{current:e}}function V(e){0>At||(e.current=dt[At],dt[At]=null,At--)}function W(e,i){At++,dt[At]=e.current,e.current=i}var tt=D(null),rt=D(null),ht=D(null),ot=D(null);function Yt(e,i){switch(W(ht,i),W(rt,e),W(tt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?kg(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=kg(i),e=Bg(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(tt),W(tt,e)}function _t(){V(tt),V(rt),V(ht)}function zt(e){e.memoizedState!==null&&W(ot,e);var i=tt.current,r=Bg(i,e.type);i!==r&&(W(rt,e),W(tt,r))}function Pe(e){rt.current===e&&(V(tt),V(rt)),ot.current===e&&(V(ot),pr._currentValue=J)}var Ye,Ot;function Nt(e){if(Ye===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);Ye=i&&i[1]||"",Ot=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ye+e+Ot}var Jt=!1;function se(e,i){if(!e||Jt)return"";Jt=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(G){var H=G}Reflect.construct(e,[],K)}else{try{K.call()}catch(G){H=G}e.call(K.prototype)}}else{try{throw Error()}catch(G){H=G}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],x=m[1];if(v&&x){var R=v.split(`
`),U=x.split(`
`);for(f=c=0;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;for(;f<U.length&&!U[f].includes("DetermineComponentFrameRoot");)f++;if(c===R.length||f===U.length)for(c=R.length-1,f=U.length-1;1<=c&&0<=f&&R[c]!==U[f];)f--;for(;1<=c&&0<=f;c--,f--)if(R[c]!==U[f]){if(c!==1||f!==1)do if(c--,f--,0>f||R[c]!==U[f]){var X=`
`+R[c].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=c&&0<=f);break}}}finally{Jt=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Nt(r):""}function pi(e,i){switch(e.tag){case 26:case 27:case 5:return Nt(e.type);case 16:return Nt("Lazy");case 13:return e.child!==i&&i!==null?Nt("Suspense Fallback"):Nt("Suspense");case 19:return Nt("SuspenseList");case 0:case 15:return se(e.type,!1);case 11:return se(e.type.render,!1);case 1:return se(e.type,!0);case 31:return Nt("Activity");default:return""}}function gi(e){try{var i="",r=null;do i+=pi(e,r),r=e,e=e.return;while(e);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var qi=Object.prototype.hasOwnProperty,xa=h.unstable_scheduleCallback,mi=h.unstable_cancelCallback,Xl=h.unstable_shouldYield,Yl=h.unstable_requestPaint,Oe=h.unstable_now,$l=h.unstable_getCurrentPriorityLevel,Kr=h.unstable_ImmediatePriority,Sn=h.unstable_UserBlockingPriority,En=h.unstable_NormalPriority,Rn=h.unstable_LowPriority,Es=h.unstable_IdlePriority,_b=h.log,xb=h.unstable_setDisableYieldValue,Ta=null,$e=null;function yi(e){if(typeof _b=="function"&&xb(e),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(Ta,e)}catch{}}var Ke=Math.clz32?Math.clz32:Rb,Tb=Math.log,Cb=Math.LN2;function Rb(e){return e>>>=0,e===0?32:31-(Tb(e)/Cb|0)|0}var Wr=256,Qr=262144,Zr=4194304;function Xi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Jr(e,i,r){var c=e.pendingLanes;if(c===0)return 0;var f=0,m=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var x=c&134217727;return x!==0?(c=x&~m,c!==0?f=Xi(c):(v&=x,v!==0?f=Xi(v):r||(r=x&~e,r!==0&&(f=Xi(r))))):(x=c&~m,x!==0?f=Xi(x):v!==0?f=Xi(v):r||(r=c&~e,r!==0&&(f=Xi(r)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,r=i&-i,m>=r||m===32&&(r&4194048)!==0)?i:f}function Ca(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Mb(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pd(){var e=Zr;return Zr<<=1,(Zr&62914560)===0&&(Zr=4194304),e}function Kl(e){for(var i=[],r=0;31>r;r++)i.push(e);return i}function Ra(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Db(e,i,r,c,f,m){var v=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var x=e.entanglements,R=e.expirationTimes,U=e.hiddenUpdates;for(r=v&~r;0<r;){var X=31-Ke(r),K=1<<X;x[X]=0,R[X]=-1;var H=U[X];if(H!==null)for(U[X]=null,X=0;X<H.length;X++){var G=H[X];G!==null&&(G.lane&=-536870913)}r&=~K}c!==0&&gd(e,c,0),m!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=m&~(v&~i))}function gd(e,i,r){e.pendingLanes|=i,e.suspendedLanes&=~i;var c=31-Ke(i);e.entangledLanes|=i,e.entanglements[c]=e.entanglements[c]|1073741824|r&261930}function md(e,i){var r=e.entangledLanes|=i;for(e=e.entanglements;r;){var c=31-Ke(r),f=1<<c;f&i|e[c]&i&&(e[c]|=i),r&=~f}}function yd(e,i){var r=i&-i;return r=(r&42)!==0?1:Wl(r),(r&(e.suspendedLanes|i))!==0?0:r}function Wl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ql(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function bd(){var e=j.p;return e!==0?e:(e=window.event,e===void 0?32:sm(e.type))}function vd(e,i){var r=j.p;try{return j.p=e,i()}finally{j.p=r}}var bi=Math.random().toString(36).slice(2),Ee="__reactFiber$"+bi,ze="__reactProps$"+bi,ws="__reactContainer$"+bi,Zl="__reactEvents$"+bi,Lb="__reactListeners$"+bi,Ob="__reactHandles$"+bi,Ad="__reactResources$"+bi,Ma="__reactMarker$"+bi;function Jl(e){delete e[Ee],delete e[ze],delete e[Zl],delete e[Lb],delete e[Ob]}function _s(e){var i=e[Ee];if(i)return i;for(var r=e.parentNode;r;){if(i=r[ws]||r[Ee]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(e=jg(e);e!==null;){if(r=e[Ee])return r;e=jg(e)}return i}e=r,r=e.parentNode}return null}function xs(e){if(e=e[Ee]||e[ws]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Da(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function Ts(e){var i=e[Ad];return i||(i=e[Ad]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ye(e){e[Ma]=!0}var Sd=new Set,Ed={};function Yi(e,i){Cs(e,i),Cs(e+"Capture",i)}function Cs(e,i){for(Ed[e]=i,e=0;e<i.length;e++)Sd.add(i[e])}var Nb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wd={},_d={};function kb(e){return qi.call(_d,e)?!0:qi.call(wd,e)?!1:Nb.test(e)?_d[e]=!0:(wd[e]=!0,!1)}function to(e,i,r){if(kb(i))if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+r)}}function eo(e,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+r)}}function Gn(e,i,r,c){if(c===null)e.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(i,r,""+c)}}function ln(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xd(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Bb(e,i,r){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){r=""+v,m.call(this,v)}}),Object.defineProperty(e,i,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function tc(e){if(!e._valueTracker){var i=xd(e)?"checked":"value";e._valueTracker=Bb(e,i,""+e[i])}}function Td(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var r=i.getValue(),c="";return e&&(c=xd(e)?e.checked?"true":"false":e.value),e=c,e!==r?(i.setValue(e),!0):!1}function no(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Pb=/[\n"\\]/g;function cn(e){return e.replace(Pb,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ec(e,i,r,c,f,m,v,x){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+ln(i)):e.value!==""+ln(i)&&(e.value=""+ln(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?nc(e,v,ln(i)):r!=null?nc(e,v,ln(r)):c!=null&&e.removeAttribute("value"),f==null&&m!=null&&(e.defaultChecked=!!m),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+ln(x):e.removeAttribute("name")}function Cd(e,i,r,c,f,m,v,x){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),i!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){tc(e);return}r=r!=null?""+ln(r):"",i=i!=null?""+ln(i):r,x||i===e.value||(e.value=i),e.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=x?e.checked:!!c,e.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),tc(e)}function nc(e,i,r){i==="number"&&no(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Rs(e,i,r,c){if(e=e.options,i){i={};for(var f=0;f<r.length;f++)i["$"+r[f]]=!0;for(r=0;r<e.length;r++)f=i.hasOwnProperty("$"+e[r].value),e[r].selected!==f&&(e[r].selected=f),f&&c&&(e[r].defaultSelected=!0)}else{for(r=""+ln(r),i=null,f=0;f<e.length;f++){if(e[f].value===r){e[f].selected=!0,c&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function Rd(e,i,r){if(i!=null&&(i=""+ln(i),i!==e.value&&(e.value=i),r==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=r!=null?""+ln(r):""}function Md(e,i,r,c){if(i==null){if(c!=null){if(r!=null)throw Error(s(92));if(gt(c)){if(1<c.length)throw Error(s(93));c=c[0]}r=c}r==null&&(r=""),i=r}r=ln(i),e.defaultValue=r,c=e.textContent,c===r&&c!==""&&c!==null&&(e.value=c),tc(e)}function Ms(e,i){if(i){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=i;return}}e.textContent=i}var zb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dd(e,i,r){var c=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":c?e.setProperty(i,r):typeof r!="number"||r===0||zb.has(i)?i==="float"?e.cssFloat=r:e[i]=(""+r).trim():e[i]=r+"px"}function Ld(e,i,r){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&r[f]!==c&&Dd(e,f,c)}else for(var m in i)i.hasOwnProperty(m)&&Dd(e,m,i[m])}function ic(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ub=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function io(e){return Ub.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Vn(){}var sc=null;function ac(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ds=null,Ls=null;function Od(e){var i=xs(e);if(i&&(e=i.stateNode)){var r=e[ze]||null;t:switch(e=i.stateNode,i.type){case"input":if(ec(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+cn(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var c=r[i];if(c!==e&&c.form===e.form){var f=c[ze]||null;if(!f)throw Error(s(90));ec(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<r.length;i++)c=r[i],c.form===e.form&&Td(c)}break t;case"textarea":Rd(e,r.value,r.defaultValue);break t;case"select":i=r.value,i!=null&&Rs(e,!!r.multiple,i,!1)}}}var rc=!1;function Nd(e,i,r){if(rc)return e(i,r);rc=!0;try{var c=e(i);return c}finally{if(rc=!1,(Ds!==null||Ls!==null)&&(qo(),Ds&&(i=Ds,e=Ls,Ls=Ds=null,Od(i),e)))for(i=0;i<e.length;i++)Od(e[i])}}function La(e,i){var r=e.stateNode;if(r===null)return null;var c=r[ze]||null;if(c===null)return null;r=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,i,typeof r));return r}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oc=!1;if(qn)try{var Oa={};Object.defineProperty(Oa,"passive",{get:function(){oc=!0}}),window.addEventListener("test",Oa,Oa),window.removeEventListener("test",Oa,Oa)}catch{oc=!1}var vi=null,lc=null,so=null;function kd(){if(so)return so;var e,i=lc,r=i.length,c,f="value"in vi?vi.value:vi.textContent,m=f.length;for(e=0;e<r&&i[e]===f[e];e++);var v=r-e;for(c=1;c<=v&&i[r-c]===f[m-c];c++);return so=f.slice(e,1<c?1-c:void 0)}function ao(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ro(){return!0}function Bd(){return!1}function Fe(e){function i(r,c,f,m,v){this._reactName=r,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(r=e[x],this[x]=r?r(m):m[x]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ro:Bd,this.isPropagationStopped=Bd,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ro)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ro)},persist:function(){},isPersistent:ro}),i}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oo=Fe($i),Na=y({},$i,{view:0,detail:0}),Hb=Fe(Na),cc,uc,ka,lo=y({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ka&&(ka&&e.type==="mousemove"?(cc=e.screenX-ka.screenX,uc=e.screenY-ka.screenY):uc=cc=0,ka=e),cc)},movementY:function(e){return"movementY"in e?e.movementY:uc}}),Pd=Fe(lo),Ib=y({},lo,{dataTransfer:0}),jb=Fe(Ib),Gb=y({},Na,{relatedTarget:0}),hc=Fe(Gb),Vb=y({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),qb=Fe(Vb),Xb=y({},$i,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yb=Fe(Xb),$b=y({},$i,{data:0}),zd=Fe($b),Kb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zb(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Qb[e])?!!i[e]:!1}function dc(){return Zb}var Jb=y({},Na,{key:function(e){if(e.key){var i=Kb[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=ao(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dc,charCode:function(e){return e.type==="keypress"?ao(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ao(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tv=Fe(Jb),ev=y({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fd=Fe(ev),nv=y({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dc}),iv=Fe(nv),sv=y({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),av=Fe(sv),rv=y({},lo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ov=Fe(rv),lv=y({},$i,{newState:0,oldState:0}),cv=Fe(lv),uv=[9,13,27,32],fc=qn&&"CompositionEvent"in window,Ba=null;qn&&"documentMode"in document&&(Ba=document.documentMode);var hv=qn&&"TextEvent"in window&&!Ba,Ud=qn&&(!fc||Ba&&8<Ba&&11>=Ba),Hd=" ",Id=!1;function jd(e,i){switch(e){case"keyup":return uv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Os=!1;function dv(e,i){switch(e){case"compositionend":return Gd(i);case"keypress":return i.which!==32?null:(Id=!0,Hd);case"textInput":return e=i.data,e===Hd&&Id?null:e;default:return null}}function fv(e,i){if(Os)return e==="compositionend"||!fc&&jd(e,i)?(e=kd(),so=lc=vi=null,Os=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ud&&i.locale!=="ko"?null:i.data;default:return null}}var pv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vd(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!pv[e.type]:i==="textarea"}function qd(e,i,r,c){Ds?Ls?Ls.push(c):Ls=[c]:Ds=c,i=Zo(i,"onChange"),0<i.length&&(r=new oo("onChange","change",null,r,c),e.push({event:r,listeners:i}))}var Pa=null,za=null;function gv(e){Rg(e,0)}function co(e){var i=Da(e);if(Td(i))return e}function Xd(e,i){if(e==="change")return i}var Yd=!1;if(qn){var pc;if(qn){var gc="oninput"in document;if(!gc){var $d=document.createElement("div");$d.setAttribute("oninput","return;"),gc=typeof $d.oninput=="function"}pc=gc}else pc=!1;Yd=pc&&(!document.documentMode||9<document.documentMode)}function Kd(){Pa&&(Pa.detachEvent("onpropertychange",Wd),za=Pa=null)}function Wd(e){if(e.propertyName==="value"&&co(za)){var i=[];qd(i,za,e,ac(e)),Nd(gv,i)}}function mv(e,i,r){e==="focusin"?(Kd(),Pa=i,za=r,Pa.attachEvent("onpropertychange",Wd)):e==="focusout"&&Kd()}function yv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return co(za)}function bv(e,i){if(e==="click")return co(i)}function vv(e,i){if(e==="input"||e==="change")return co(i)}function Av(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var We=typeof Object.is=="function"?Object.is:Av;function Fa(e,i){if(We(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var r=Object.keys(e),c=Object.keys(i);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var f=r[c];if(!qi.call(i,f)||!We(e[f],i[f]))return!1}return!0}function Qd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zd(e,i){var r=Qd(e);e=0;for(var c;r;){if(r.nodeType===3){if(c=e+r.textContent.length,e<=i&&c>=i)return{node:r,offset:i-e};e=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Qd(r)}}function Jd(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Jd(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function tf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=no(e.document);i instanceof e.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)e=i.contentWindow;else break;i=no(e.document)}return i}function mc(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Sv=qn&&"documentMode"in document&&11>=document.documentMode,Ns=null,yc=null,Ua=null,bc=!1;function ef(e,i,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bc||Ns==null||Ns!==no(c)||(c=Ns,"selectionStart"in c&&mc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ua&&Fa(Ua,c)||(Ua=c,c=Zo(yc,"onSelect"),0<c.length&&(i=new oo("onSelect","select",null,i,r),e.push({event:i,listeners:c}),i.target=Ns)))}function Ki(e,i){var r={};return r[e.toLowerCase()]=i.toLowerCase(),r["Webkit"+e]="webkit"+i,r["Moz"+e]="moz"+i,r}var ks={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionrun:Ki("Transition","TransitionRun"),transitionstart:Ki("Transition","TransitionStart"),transitioncancel:Ki("Transition","TransitionCancel"),transitionend:Ki("Transition","TransitionEnd")},vc={},nf={};qn&&(nf=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function Wi(e){if(vc[e])return vc[e];if(!ks[e])return e;var i=ks[e],r;for(r in i)if(i.hasOwnProperty(r)&&r in nf)return vc[e]=i[r];return e}var sf=Wi("animationend"),af=Wi("animationiteration"),rf=Wi("animationstart"),Ev=Wi("transitionrun"),wv=Wi("transitionstart"),_v=Wi("transitioncancel"),of=Wi("transitionend"),lf=new Map,Ac="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ac.push("scrollEnd");function wn(e,i){lf.set(e,i),Yi(i,[e])}var uo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},un=[],Bs=0,Sc=0;function ho(){for(var e=Bs,i=Sc=Bs=0;i<e;){var r=un[i];un[i++]=null;var c=un[i];un[i++]=null;var f=un[i];un[i++]=null;var m=un[i];if(un[i++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&cf(r,f,m)}}function fo(e,i,r,c){un[Bs++]=e,un[Bs++]=i,un[Bs++]=r,un[Bs++]=c,Sc|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Ec(e,i,r,c){return fo(e,i,r,c),po(e)}function Qi(e,i){return fo(e,null,null,i),po(e)}function cf(e,i,r){e.lanes|=r;var c=e.alternate;c!==null&&(c.lanes|=r);for(var f=!1,m=e.return;m!==null;)m.childLanes|=r,c=m.alternate,c!==null&&(c.childLanes|=r),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(f=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,f&&i!==null&&(f=31-Ke(r),e=m.hiddenUpdates,c=e[f],c===null?e[f]=[i]:c.push(i),i.lane=r|536870912),m):null}function po(e){if(50<or)throw or=0,Lu=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Ps={};function xv(e,i,r,c){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(e,i,r,c){return new xv(e,i,r,c)}function wc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xn(e,i){var r=e.alternate;return r===null?(r=Qe(e.tag,i,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=i,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,i=e.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function uf(e,i){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,i=r.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function go(e,i,r,c,f,m){var v=0;if(c=e,typeof e=="function")wc(e)&&(v=1);else if(typeof e=="string")v=D0(e,r,tt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case q:return e=Qe(31,r,i,f),e.elementType=q,e.lanes=m,e;case S:return Zi(r.children,f,m,i);case _:v=8,f|=24;break;case w:return e=Qe(12,r,i,f|2),e.elementType=w,e.lanes=m,e;case M:return e=Qe(13,r,i,f),e.elementType=M,e.lanes=m,e;case P:return e=Qe(19,r,i,f),e.elementType=P,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:v=10;break t;case T:v=9;break t;case O:v=11;break t;case B:v=14;break t;case I:v=16,c=null;break t}v=29,r=Error(s(130,e===null?"null":typeof e,"")),c=null}return i=Qe(v,r,i,f),i.elementType=e,i.type=c,i.lanes=m,i}function Zi(e,i,r,c){return e=Qe(7,e,c,i),e.lanes=r,e}function _c(e,i,r){return e=Qe(6,e,null,i),e.lanes=r,e}function hf(e){var i=Qe(18,null,null,0);return i.stateNode=e,i}function xc(e,i,r){return i=Qe(4,e.children!==null?e.children:[],e.key,i),i.lanes=r,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var df=new WeakMap;function hn(e,i){if(typeof e=="object"&&e!==null){var r=df.get(e);return r!==void 0?r:(i={value:e,source:i,stack:gi(i)},df.set(e,i),i)}return{value:e,source:i,stack:gi(i)}}var zs=[],Fs=0,mo=null,Ha=0,dn=[],fn=0,Ai=null,Mn=1,Dn="";function Yn(e,i){zs[Fs++]=Ha,zs[Fs++]=mo,mo=e,Ha=i}function ff(e,i,r){dn[fn++]=Mn,dn[fn++]=Dn,dn[fn++]=Ai,Ai=e;var c=Mn;e=Dn;var f=32-Ke(c)-1;c&=~(1<<f),r+=1;var m=32-Ke(i)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Mn=1<<32-Ke(i)+f|r<<f|c,Dn=m+e}else Mn=1<<m|r<<f|c,Dn=e}function Tc(e){e.return!==null&&(Yn(e,1),ff(e,1,0))}function Cc(e){for(;e===mo;)mo=zs[--Fs],zs[Fs]=null,Ha=zs[--Fs],zs[Fs]=null;for(;e===Ai;)Ai=dn[--fn],dn[fn]=null,Dn=dn[--fn],dn[fn]=null,Mn=dn[--fn],dn[fn]=null}function pf(e,i){dn[fn++]=Mn,dn[fn++]=Dn,dn[fn++]=Ai,Mn=i.id,Dn=i.overflow,Ai=e}var we=null,$t=null,Dt=!1,Si=null,pn=!1,Rc=Error(s(519));function Ei(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ia(hn(i,e)),Rc}function gf(e){var i=e.stateNode,r=e.type,c=e.memoizedProps;switch(i[Ee]=e,i[ze]=c,r){case"dialog":Tt("cancel",i),Tt("close",i);break;case"iframe":case"object":case"embed":Tt("load",i);break;case"video":case"audio":for(r=0;r<cr.length;r++)Tt(cr[r],i);break;case"source":Tt("error",i);break;case"img":case"image":case"link":Tt("error",i),Tt("load",i);break;case"details":Tt("toggle",i);break;case"input":Tt("invalid",i),Cd(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Tt("invalid",i);break;case"textarea":Tt("invalid",i),Md(i,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||c.suppressHydrationWarning===!0||Og(i.textContent,r)?(c.popover!=null&&(Tt("beforetoggle",i),Tt("toggle",i)),c.onScroll!=null&&Tt("scroll",i),c.onScrollEnd!=null&&Tt("scrollend",i),c.onClick!=null&&(i.onclick=Vn),i=!0):i=!1,i||Ei(e,!0)}function mf(e){for(we=e.return;we;)switch(we.tag){case 5:case 31:case 13:pn=!1;return;case 27:case 3:pn=!0;return;default:we=we.return}}function Us(e){if(e!==we)return!1;if(!Dt)return mf(e),Dt=!0,!1;var i=e.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Xu(e.type,e.memoizedProps)),r=!r),r&&$t&&Ei(e),mf(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));$t=Ig(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));$t=Ig(e)}else i===27?(i=$t,Pi(e.type)?(e=Qu,Qu=null,$t=e):$t=i):$t=we?mn(e.stateNode.nextSibling):null;return!0}function Ji(){$t=we=null,Dt=!1}function Mc(){var e=Si;return e!==null&&(je===null?je=e:je.push.apply(je,e),Si=null),e}function Ia(e){Si===null?Si=[e]:Si.push(e)}var Dc=D(null),ts=null,$n=null;function wi(e,i,r){W(Dc,i._currentValue),i._currentValue=r}function Kn(e){e._currentValue=Dc.current,V(Dc)}function Lc(e,i,r){for(;e!==null;){var c=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),e===r)break;e=e.return}}function Oc(e,i,r,c){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;t:for(;m!==null;){var x=m;m=f;for(var R=0;R<i.length;R++)if(x.context===i[R]){m.lanes|=r,x=m.alternate,x!==null&&(x.lanes|=r),Lc(m.return,r,e),c||(v=null);break t}m=x.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=r,m=v.alternate,m!==null&&(m.lanes|=r),Lc(v,r,e),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===e){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Hs(e,i,r,c){e=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var x=f.type;We(f.pendingProps.value,v.value)||(e!==null?e.push(x):e=[x])}}else if(f===ot.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(pr):e=[pr])}f=f.return}e!==null&&Oc(i,e,r,c),i.flags|=262144}function yo(e){for(e=e.firstContext;e!==null;){if(!We(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function es(e){ts=e,$n=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _e(e){return yf(ts,e)}function bo(e,i){return ts===null&&es(e),yf(e,i)}function yf(e,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},$n===null){if(e===null)throw Error(s(308));$n=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else $n=$n.next=i;return r}var Tv=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(r,c){e.push(c)}};this.abort=function(){i.aborted=!0,e.forEach(function(r){return r()})}},Cv=h.unstable_scheduleCallback,Rv=h.unstable_NormalPriority,he={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nc(){return{controller:new Tv,data:new Map,refCount:0}}function ja(e){e.refCount--,e.refCount===0&&Cv(Rv,function(){e.controller.abort()})}var Ga=null,kc=0,Is=0,js=null;function Mv(e,i){if(Ga===null){var r=Ga=[];kc=0,Is=zu(),js={status:"pending",value:void 0,then:function(c){r.push(c)}}}return kc++,i.then(bf,bf),i}function bf(){if(--kc===0&&Ga!==null){js!==null&&(js.status="fulfilled");var e=Ga;Ga=null,Is=0,js=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Dv(e,i){var r=[],c={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return e.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<r.length;f++)(0,r[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),c}var vf=k.S;k.S=function(e,i){ng=Oe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Mv(e,i),vf!==null&&vf(e,i)};var ns=D(null);function Bc(){var e=ns.current;return e!==null?e:Vt.pooledCache}function vo(e,i){i===null?W(ns,ns.current):W(ns,i.pool)}function Af(){var e=Bc();return e===null?null:{parent:he._currentValue,pool:e}}var Gs=Error(s(460)),Pc=Error(s(474)),Ao=Error(s(542)),So={then:function(){}};function Sf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ef(e,i,r){switch(r=e[r],r===void 0?e.push(i):r!==i&&(i.then(Vn,Vn),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,_f(e),e;default:if(typeof i.status=="string")i.then(Vn,Vn);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,_f(e),e}throw ss=i,Gs}}function is(e){try{var i=e._init;return i(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(ss=r,Gs):r}}var ss=null;function wf(){if(ss===null)throw Error(s(459));var e=ss;return ss=null,e}function _f(e){if(e===Gs||e===Ao)throw Error(s(483))}var Vs=null,Va=0;function Eo(e){var i=Va;return Va+=1,Vs===null&&(Vs=[]),Ef(Vs,e,i)}function qa(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function wo(e,i){throw i.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function xf(e){function i(z,L){if(e){var F=z.deletions;F===null?(z.deletions=[L],z.flags|=16):F.push(L)}}function r(z,L){if(!e)return null;for(;L!==null;)i(z,L),L=L.sibling;return null}function c(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=Xn(z,L),z.index=0,z.sibling=null,z}function m(z,L,F){return z.index=F,e?(F=z.alternate,F!==null?(F=F.index,F<L?(z.flags|=67108866,L):F):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function v(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function x(z,L,F,Y){return L===null||L.tag!==6?(L=_c(F,z.mode,Y),L.return=z,L):(L=f(L,F),L.return=z,L)}function R(z,L,F,Y){var lt=F.type;return lt===S?X(z,L,F.props.children,Y,F.key):L!==null&&(L.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===I&&is(lt)===L.type)?(L=f(L,F.props),qa(L,F),L.return=z,L):(L=go(F.type,F.key,F.props,null,z.mode,Y),qa(L,F),L.return=z,L)}function U(z,L,F,Y){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=xc(F,z.mode,Y),L.return=z,L):(L=f(L,F.children||[]),L.return=z,L)}function X(z,L,F,Y,lt){return L===null||L.tag!==7?(L=Zi(F,z.mode,Y,lt),L.return=z,L):(L=f(L,F),L.return=z,L)}function K(z,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=_c(""+L,z.mode,F),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return F=go(L.type,L.key,L.props,null,z.mode,F),qa(F,L),F.return=z,F;case E:return L=xc(L,z.mode,F),L.return=z,L;case I:return L=is(L),K(z,L,F)}if(gt(L)||ut(L))return L=Zi(L,z.mode,F,null),L.return=z,L;if(typeof L.then=="function")return K(z,Eo(L),F);if(L.$$typeof===C)return K(z,bo(z,L),F);wo(z,L)}return null}function H(z,L,F,Y){var lt=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return lt!==null?null:x(z,L,""+F,Y);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===lt?R(z,L,F,Y):null;case E:return F.key===lt?U(z,L,F,Y):null;case I:return F=is(F),H(z,L,F,Y)}if(gt(F)||ut(F))return lt!==null?null:X(z,L,F,Y,null);if(typeof F.then=="function")return H(z,L,Eo(F),Y);if(F.$$typeof===C)return H(z,L,bo(z,F),Y);wo(z,F)}return null}function G(z,L,F,Y,lt){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return z=z.get(F)||null,x(L,z,""+Y,lt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return z=z.get(Y.key===null?F:Y.key)||null,R(L,z,Y,lt);case E:return z=z.get(Y.key===null?F:Y.key)||null,U(L,z,Y,lt);case I:return Y=is(Y),G(z,L,F,Y,lt)}if(gt(Y)||ut(Y))return z=z.get(F)||null,X(L,z,Y,lt,null);if(typeof Y.then=="function")return G(z,L,F,Eo(Y),lt);if(Y.$$typeof===C)return G(z,L,F,bo(L,Y),lt);wo(L,Y)}return null}function it(z,L,F,Y){for(var lt=null,kt=null,st=L,Et=L=0,Rt=null;st!==null&&Et<F.length;Et++){st.index>Et?(Rt=st,st=null):Rt=st.sibling;var Bt=H(z,st,F[Et],Y);if(Bt===null){st===null&&(st=Rt);break}e&&st&&Bt.alternate===null&&i(z,st),L=m(Bt,L,Et),kt===null?lt=Bt:kt.sibling=Bt,kt=Bt,st=Rt}if(Et===F.length)return r(z,st),Dt&&Yn(z,Et),lt;if(st===null){for(;Et<F.length;Et++)st=K(z,F[Et],Y),st!==null&&(L=m(st,L,Et),kt===null?lt=st:kt.sibling=st,kt=st);return Dt&&Yn(z,Et),lt}for(st=c(st);Et<F.length;Et++)Rt=G(st,z,Et,F[Et],Y),Rt!==null&&(e&&Rt.alternate!==null&&st.delete(Rt.key===null?Et:Rt.key),L=m(Rt,L,Et),kt===null?lt=Rt:kt.sibling=Rt,kt=Rt);return e&&st.forEach(function(Ii){return i(z,Ii)}),Dt&&Yn(z,Et),lt}function pt(z,L,F,Y){if(F==null)throw Error(s(151));for(var lt=null,kt=null,st=L,Et=L=0,Rt=null,Bt=F.next();st!==null&&!Bt.done;Et++,Bt=F.next()){st.index>Et?(Rt=st,st=null):Rt=st.sibling;var Ii=H(z,st,Bt.value,Y);if(Ii===null){st===null&&(st=Rt);break}e&&st&&Ii.alternate===null&&i(z,st),L=m(Ii,L,Et),kt===null?lt=Ii:kt.sibling=Ii,kt=Ii,st=Rt}if(Bt.done)return r(z,st),Dt&&Yn(z,Et),lt;if(st===null){for(;!Bt.done;Et++,Bt=F.next())Bt=K(z,Bt.value,Y),Bt!==null&&(L=m(Bt,L,Et),kt===null?lt=Bt:kt.sibling=Bt,kt=Bt);return Dt&&Yn(z,Et),lt}for(st=c(st);!Bt.done;Et++,Bt=F.next())Bt=G(st,z,Et,Bt.value,Y),Bt!==null&&(e&&Bt.alternate!==null&&st.delete(Bt.key===null?Et:Bt.key),L=m(Bt,L,Et),kt===null?lt=Bt:kt.sibling=Bt,kt=Bt);return e&&st.forEach(function(I0){return i(z,I0)}),Dt&&Yn(z,Et),lt}function jt(z,L,F,Y){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:t:{for(var lt=F.key;L!==null;){if(L.key===lt){if(lt=F.type,lt===S){if(L.tag===7){r(z,L.sibling),Y=f(L,F.props.children),Y.return=z,z=Y;break t}}else if(L.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===I&&is(lt)===L.type){r(z,L.sibling),Y=f(L,F.props),qa(Y,F),Y.return=z,z=Y;break t}r(z,L);break}else i(z,L);L=L.sibling}F.type===S?(Y=Zi(F.props.children,z.mode,Y,F.key),Y.return=z,z=Y):(Y=go(F.type,F.key,F.props,null,z.mode,Y),qa(Y,F),Y.return=z,z=Y)}return v(z);case E:t:{for(lt=F.key;L!==null;){if(L.key===lt)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){r(z,L.sibling),Y=f(L,F.children||[]),Y.return=z,z=Y;break t}else{r(z,L);break}else i(z,L);L=L.sibling}Y=xc(F,z.mode,Y),Y.return=z,z=Y}return v(z);case I:return F=is(F),jt(z,L,F,Y)}if(gt(F))return it(z,L,F,Y);if(ut(F)){if(lt=ut(F),typeof lt!="function")throw Error(s(150));return F=lt.call(F),pt(z,L,F,Y)}if(typeof F.then=="function")return jt(z,L,Eo(F),Y);if(F.$$typeof===C)return jt(z,L,bo(z,F),Y);wo(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(r(z,L.sibling),Y=f(L,F),Y.return=z,z=Y):(r(z,L),Y=_c(F,z.mode,Y),Y.return=z,z=Y),v(z)):r(z,L)}return function(z,L,F,Y){try{Va=0;var lt=jt(z,L,F,Y);return Vs=null,lt}catch(st){if(st===Gs||st===Ao)throw st;var kt=Qe(29,st,null,z.mode);return kt.lanes=Y,kt.return=z,kt}finally{}}}var as=xf(!0),Tf=xf(!1),_i=!1;function zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function xi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(e,i,r){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Pt&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=po(e),cf(e,null,r),i}return fo(e,c,i,r),po(e)}function Xa(e,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var c=i.lanes;c&=e.pendingLanes,r|=c,i.lanes=r,md(e,r)}}function Uc(e,i){var r=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var f=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,r=r.next}while(r!==null);m===null?f=m=i:m=m.next=i}else f=m=i;r={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=i:e.next=i,r.lastBaseUpdate=i}var Hc=!1;function Ya(){if(Hc){var e=js;if(e!==null)throw e}}function $a(e,i,r,c){Hc=!1;var f=e.updateQueue;_i=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var R=x,U=R.next;R.next=null,v===null?m=U:v.next=U,v=R;var X=e.alternate;X!==null&&(X=X.updateQueue,x=X.lastBaseUpdate,x!==v&&(x===null?X.firstBaseUpdate=U:x.next=U,X.lastBaseUpdate=R))}if(m!==null){var K=f.baseState;v=0,X=U=R=null,x=m;do{var H=x.lane&-536870913,G=H!==x.lane;if(G?(Ct&H)===H:(c&H)===H){H!==0&&H===Is&&(Hc=!0),X!==null&&(X=X.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var it=e,pt=x;H=i;var jt=r;switch(pt.tag){case 1:if(it=pt.payload,typeof it=="function"){K=it.call(jt,K,H);break t}K=it;break t;case 3:it.flags=it.flags&-65537|128;case 0:if(it=pt.payload,H=typeof it=="function"?it.call(jt,K,H):it,H==null)break t;K=y({},K,H);break t;case 2:_i=!0}}H=x.callback,H!==null&&(e.flags|=64,G&&(e.flags|=8192),G=f.callbacks,G===null?f.callbacks=[H]:G.push(H))}else G={lane:H,tag:x.tag,payload:x.payload,callback:x.callback,next:null},X===null?(U=X=G,R=K):X=X.next=G,v|=H;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;G=x,x=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);X===null&&(R=K),f.baseState=R,f.firstBaseUpdate=U,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),Li|=v,e.lanes=v,e.memoizedState=K}}function Cf(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Rf(e,i){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Cf(r[e],i)}var qs=D(null),_o=D(0);function Mf(e,i){e=si,W(_o,e),W(qs,i),si=e|i.baseLanes}function Ic(){W(_o,si),W(qs,qs.current)}function jc(){si=_o.current,V(qs),V(_o)}var Ze=D(null),gn=null;function Ci(e){var i=e.alternate;W(oe,oe.current&1),W(Ze,e),gn===null&&(i===null||qs.current!==null||i.memoizedState!==null)&&(gn=e)}function Gc(e){W(oe,oe.current),W(Ze,e),gn===null&&(gn=e)}function Df(e){e.tag===22?(W(oe,oe.current),W(Ze,e),gn===null&&(gn=e)):Ri()}function Ri(){W(oe,oe.current),W(Ze,Ze.current)}function Je(e){V(Ze),gn===e&&(gn=null),V(oe)}var oe=D(0);function xo(e){for(var i=e;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Ku(r)||Wu(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wn=0,St=null,Ht=null,de=null,To=!1,Xs=!1,rs=!1,Co=0,Ka=0,Ys=null,Lv=0;function ae(){throw Error(s(321))}function Vc(e,i){if(i===null)return!1;for(var r=0;r<i.length&&r<e.length;r++)if(!We(e[r],i[r]))return!1;return!0}function qc(e,i,r,c,f,m){return Wn=m,St=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,k.H=e===null||e.memoizedState===null?fp:ru,rs=!1,m=r(c,f),rs=!1,Xs&&(m=Of(i,r,c,f)),Lf(e),m}function Lf(e){k.H=Za;var i=Ht!==null&&Ht.next!==null;if(Wn=0,de=Ht=St=null,To=!1,Ka=0,Ys=null,i)throw Error(s(300));e===null||fe||(e=e.dependencies,e!==null&&yo(e)&&(fe=!0))}function Of(e,i,r,c){St=e;var f=0;do{if(Xs&&(Ys=null),Ka=0,Xs=!1,25<=f)throw Error(s(301));if(f+=1,de=Ht=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}k.H=pp,m=i(r,c)}while(Xs);return m}function Ov(){var e=k.H,i=e.useState()[0];return i=typeof i.then=="function"?Wa(i):i,e=e.useState()[0],(Ht!==null?Ht.memoizedState:null)!==e&&(St.flags|=1024),i}function Xc(){var e=Co!==0;return Co=0,e}function Yc(e,i,r){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~r}function $c(e){if(To){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}To=!1}Wn=0,de=Ht=St=null,Xs=!1,Ka=Co=0,Ys=null}function Ne(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?St.memoizedState=de=e:de=de.next=e,de}function le(){if(Ht===null){var e=St.alternate;e=e!==null?e.memoizedState:null}else e=Ht.next;var i=de===null?St.memoizedState:de.next;if(i!==null)de=i,Ht=e;else{if(e===null)throw St.alternate===null?Error(s(467)):Error(s(310));Ht=e,e={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},de===null?St.memoizedState=de=e:de=de.next=e}return de}function Ro(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wa(e){var i=Ka;return Ka+=1,Ys===null&&(Ys=[]),e=Ef(Ys,e,i),i=St,(de===null?i.memoizedState:de.next)===null&&(i=i.alternate,k.H=i===null||i.memoizedState===null?fp:ru),e}function Mo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Wa(e);if(e.$$typeof===C)return _e(e)}throw Error(s(438,String(e)))}function Kc(e){var i=null,r=St.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var c=St.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=Ro(),St.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(e),c=0;c<e;c++)r[c]=Q;return i.index++,r}function Qn(e,i){return typeof i=="function"?i(e):i}function Do(e){var i=le();return Wc(i,Ht,e)}function Wc(e,i,r){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var f=e.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}i.baseQueue=f=m,c.pending=null}if(m=e.baseState,f===null)e.memoizedState=m;else{i=f.next;var x=v=null,R=null,U=i,X=!1;do{var K=U.lane&-536870913;if(K!==U.lane?(Ct&K)===K:(Wn&K)===K){var H=U.revertLane;if(H===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),K===Is&&(X=!0);else if((Wn&H)===H){U=U.next,H===Is&&(X=!0);continue}else K={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},R===null?(x=R=K,v=m):R=R.next=K,St.lanes|=H,Li|=H;K=U.action,rs&&r(m,K),m=U.hasEagerState?U.eagerState:r(m,K)}else H={lane:K,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},R===null?(x=R=H,v=m):R=R.next=H,St.lanes|=K,Li|=K;U=U.next}while(U!==null&&U!==i);if(R===null?v=m:R.next=x,!We(m,e.memoizedState)&&(fe=!0,X&&(r=js,r!==null)))throw r;e.memoizedState=m,e.baseState=v,e.baseQueue=R,c.lastRenderedState=m}return f===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Qc(e){var i=le(),r=i.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var c=r.dispatch,f=r.pending,m=i.memoizedState;if(f!==null){r.pending=null;var v=f=f.next;do m=e(m,v.action),v=v.next;while(v!==f);We(m,i.memoizedState)||(fe=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),r.lastRenderedState=m}return[m,c]}function Nf(e,i,r){var c=St,f=le(),m=Dt;if(m){if(r===void 0)throw Error(s(407));r=r()}else r=i();var v=!We((Ht||f).memoizedState,r);if(v&&(f.memoizedState=r,fe=!0),f=f.queue,tu(Pf.bind(null,c,f,e),[e]),f.getSnapshot!==i||v||de!==null&&de.memoizedState.tag&1){if(c.flags|=2048,$s(9,{destroy:void 0},Bf.bind(null,c,f,r,i),null),Vt===null)throw Error(s(349));m||(Wn&127)!==0||kf(c,i,r)}return r}function kf(e,i,r){e.flags|=16384,e={getSnapshot:i,value:r},i=St.updateQueue,i===null?(i=Ro(),St.updateQueue=i,i.stores=[e]):(r=i.stores,r===null?i.stores=[e]:r.push(e))}function Bf(e,i,r,c){i.value=r,i.getSnapshot=c,zf(i)&&Ff(e)}function Pf(e,i,r){return r(function(){zf(i)&&Ff(e)})}function zf(e){var i=e.getSnapshot;e=e.value;try{var r=i();return!We(e,r)}catch{return!0}}function Ff(e){var i=Qi(e,2);i!==null&&Ge(i,e,2)}function Zc(e){var i=Ne();if(typeof e=="function"){var r=e;if(e=r(),rs){yi(!0);try{r()}finally{yi(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:e},i}function Uf(e,i,r,c){return e.baseState=r,Wc(e,Ht,typeof c=="function"?c:Qn)}function Nv(e,i,r,c,f){if(No(e))throw Error(s(485));if(e=i.action,e!==null){var m={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};k.T!==null?r(!0):m.isTransition=!1,c(m),r=i.pending,r===null?(m.next=i.pending=m,Hf(i,m)):(m.next=r.next,i.pending=r.next=m)}}function Hf(e,i){var r=i.action,c=i.payload,f=e.state;if(i.isTransition){var m=k.T,v={};k.T=v;try{var x=r(f,c),R=k.S;R!==null&&R(v,x),If(e,i,x)}catch(U){Jc(e,i,U)}finally{m!==null&&v.types!==null&&(m.types=v.types),k.T=m}}else try{m=r(f,c),If(e,i,m)}catch(U){Jc(e,i,U)}}function If(e,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){jf(e,i,c)},function(c){return Jc(e,i,c)}):jf(e,i,r)}function jf(e,i,r){i.status="fulfilled",i.value=r,Gf(i),e.state=r,i=e.pending,i!==null&&(r=i.next,r===i?e.pending=null:(r=r.next,i.next=r,Hf(e,r)))}function Jc(e,i,r){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=r,Gf(i),i=i.next;while(i!==c)}e.action=null}function Gf(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Vf(e,i){return i}function qf(e,i){if(Dt){var r=Vt.formState;if(r!==null){t:{var c=St;if(Dt){if($t){e:{for(var f=$t,m=pn;f.nodeType!==8;){if(!m){f=null;break e}if(f=mn(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){$t=mn(f.nextSibling),c=f.data==="F!";break t}}Ei(c)}c=!1}c&&(i=r[0])}}return r=Ne(),r.memoizedState=r.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vf,lastRenderedState:i},r.queue=c,r=up.bind(null,St,c),c.dispatch=r,c=Zc(!1),m=au.bind(null,St,!1,c.queue),c=Ne(),f={state:i,dispatch:null,action:e,pending:null},c.queue=f,r=Nv.bind(null,St,f,m,r),f.dispatch=r,c.memoizedState=e,[i,r,!1]}function Xf(e){var i=le();return Yf(i,Ht,e)}function Yf(e,i,r){if(i=Wc(e,i,Vf)[0],e=Do(Qn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Wa(i)}catch(v){throw v===Gs?Ao:v}else c=i;i=le();var f=i.queue,m=f.dispatch;return r!==i.memoizedState&&(St.flags|=2048,$s(9,{destroy:void 0},kv.bind(null,f,r),null)),[c,m,e]}function kv(e,i){e.action=i}function $f(e){var i=le(),r=Ht;if(r!==null)return Yf(i,r,e);le(),i=i.memoizedState,r=le();var c=r.queue.dispatch;return r.memoizedState=e,[i,c,!1]}function $s(e,i,r,c){return e={tag:e,create:r,deps:c,inst:i,next:null},i=St.updateQueue,i===null&&(i=Ro(),St.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=e.next=e:(c=r.next,r.next=e,e.next=c,i.lastEffect=e),e}function Kf(){return le().memoizedState}function Lo(e,i,r,c){var f=Ne();St.flags|=e,f.memoizedState=$s(1|i,{destroy:void 0},r,c===void 0?null:c)}function Oo(e,i,r,c){var f=le();c=c===void 0?null:c;var m=f.memoizedState.inst;Ht!==null&&c!==null&&Vc(c,Ht.memoizedState.deps)?f.memoizedState=$s(i,m,r,c):(St.flags|=e,f.memoizedState=$s(1|i,m,r,c))}function Wf(e,i){Lo(8390656,8,e,i)}function tu(e,i){Oo(2048,8,e,i)}function Bv(e){St.flags|=4;var i=St.updateQueue;if(i===null)i=Ro(),St.updateQueue=i,i.events=[e];else{var r=i.events;r===null?i.events=[e]:r.push(e)}}function Qf(e){var i=le().memoizedState;return Bv({ref:i,nextImpl:e}),function(){if((Pt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Zf(e,i){return Oo(4,2,e,i)}function Jf(e,i){return Oo(4,4,e,i)}function tp(e,i){if(typeof i=="function"){e=e();var r=i(e);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function ep(e,i,r){r=r!=null?r.concat([e]):null,Oo(4,4,tp.bind(null,i,e),r)}function eu(){}function np(e,i){var r=le();i=i===void 0?null:i;var c=r.memoizedState;return i!==null&&Vc(i,c[1])?c[0]:(r.memoizedState=[e,i],e)}function ip(e,i){var r=le();i=i===void 0?null:i;var c=r.memoizedState;if(i!==null&&Vc(i,c[1]))return c[0];if(c=e(),rs){yi(!0);try{e()}finally{yi(!1)}}return r.memoizedState=[c,i],c}function nu(e,i,r){return r===void 0||(Wn&1073741824)!==0&&(Ct&261930)===0?e.memoizedState=i:(e.memoizedState=r,e=sg(),St.lanes|=e,Li|=e,r)}function sp(e,i,r,c){return We(r,i)?r:qs.current!==null?(e=nu(e,r,c),We(e,i)||(fe=!0),e):(Wn&42)===0||(Wn&1073741824)!==0&&(Ct&261930)===0?(fe=!0,e.memoizedState=r):(e=sg(),St.lanes|=e,Li|=e,i)}function ap(e,i,r,c,f){var m=j.p;j.p=m!==0&&8>m?m:8;var v=k.T,x={};k.T=x,au(e,!1,i,r);try{var R=f(),U=k.S;if(U!==null&&U(x,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var X=Dv(R,c);Qa(e,i,X,nn(e))}else Qa(e,i,c,nn(e))}catch(K){Qa(e,i,{then:function(){},status:"rejected",reason:K},nn())}finally{j.p=m,v!==null&&x.types!==null&&(v.types=x.types),k.T=v}}function Pv(){}function iu(e,i,r,c){if(e.tag!==5)throw Error(s(476));var f=rp(e).queue;ap(e,f,i,J,r===null?Pv:function(){return op(e),r(c)})}function rp(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:J},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:r},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function op(e){var i=rp(e);i.next===null&&(i=e.alternate.memoizedState),Qa(e,i.next.queue,{},nn())}function su(){return _e(pr)}function lp(){return le().memoizedState}function cp(){return le().memoizedState}function zv(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var r=nn();e=xi(r);var c=Ti(i,e,r);c!==null&&(Ge(c,i,r),Xa(c,i,r)),i={cache:Nc()},e.payload=i;return}i=i.return}}function Fv(e,i,r){var c=nn();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},No(e)?hp(i,r):(r=Ec(e,i,r,c),r!==null&&(Ge(r,e,c),dp(r,i,c)))}function up(e,i,r){var c=nn();Qa(e,i,r,c)}function Qa(e,i,r,c){var f={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(No(e))hp(i,f);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,x=m(v,r);if(f.hasEagerState=!0,f.eagerState=x,We(x,v))return fo(e,i,f,0),Vt===null&&ho(),!1}catch{}finally{}if(r=Ec(e,i,f,c),r!==null)return Ge(r,e,c),dp(r,i,c),!0}return!1}function au(e,i,r,c){if(c={lane:2,revertLane:zu(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},No(e)){if(i)throw Error(s(479))}else i=Ec(e,r,c,2),i!==null&&Ge(i,e,2)}function No(e){var i=e.alternate;return e===St||i!==null&&i===St}function hp(e,i){Xs=To=!0;var r=e.pending;r===null?i.next=i:(i.next=r.next,r.next=i),e.pending=i}function dp(e,i,r){if((r&4194048)!==0){var c=i.lanes;c&=e.pendingLanes,r|=c,i.lanes=r,md(e,r)}}var Za={readContext:_e,use:Mo,useCallback:ae,useContext:ae,useEffect:ae,useImperativeHandle:ae,useLayoutEffect:ae,useInsertionEffect:ae,useMemo:ae,useReducer:ae,useRef:ae,useState:ae,useDebugValue:ae,useDeferredValue:ae,useTransition:ae,useSyncExternalStore:ae,useId:ae,useHostTransitionStatus:ae,useFormState:ae,useActionState:ae,useOptimistic:ae,useMemoCache:ae,useCacheRefresh:ae};Za.useEffectEvent=ae;var fp={readContext:_e,use:Mo,useCallback:function(e,i){return Ne().memoizedState=[e,i===void 0?null:i],e},useContext:_e,useEffect:Wf,useImperativeHandle:function(e,i,r){r=r!=null?r.concat([e]):null,Lo(4194308,4,tp.bind(null,i,e),r)},useLayoutEffect:function(e,i){return Lo(4194308,4,e,i)},useInsertionEffect:function(e,i){Lo(4,2,e,i)},useMemo:function(e,i){var r=Ne();i=i===void 0?null:i;var c=e();if(rs){yi(!0);try{e()}finally{yi(!1)}}return r.memoizedState=[c,i],c},useReducer:function(e,i,r){var c=Ne();if(r!==void 0){var f=r(i);if(rs){yi(!0);try{r(i)}finally{yi(!1)}}}else f=i;return c.memoizedState=c.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},c.queue=e,e=e.dispatch=Fv.bind(null,St,e),[c.memoizedState,e]},useRef:function(e){var i=Ne();return e={current:e},i.memoizedState=e},useState:function(e){e=Zc(e);var i=e.queue,r=up.bind(null,St,i);return i.dispatch=r,[e.memoizedState,r]},useDebugValue:eu,useDeferredValue:function(e,i){var r=Ne();return nu(r,e,i)},useTransition:function(){var e=Zc(!1);return e=ap.bind(null,St,e.queue,!0,!1),Ne().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,r){var c=St,f=Ne();if(Dt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=i(),Vt===null)throw Error(s(349));(Ct&127)!==0||kf(c,i,r)}f.memoizedState=r;var m={value:r,getSnapshot:i};return f.queue=m,Wf(Pf.bind(null,c,m,e),[e]),c.flags|=2048,$s(9,{destroy:void 0},Bf.bind(null,c,m,r,i),null),r},useId:function(){var e=Ne(),i=Vt.identifierPrefix;if(Dt){var r=Dn,c=Mn;r=(c&~(1<<32-Ke(c)-1)).toString(32)+r,i="_"+i+"R_"+r,r=Co++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=Lv++,i="_"+i+"r_"+r.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:su,useFormState:qf,useActionState:qf,useOptimistic:function(e){var i=Ne();i.memoizedState=i.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=au.bind(null,St,!0,r),r.dispatch=i,[e,i]},useMemoCache:Kc,useCacheRefresh:function(){return Ne().memoizedState=zv.bind(null,St)},useEffectEvent:function(e){var i=Ne(),r={impl:e};return i.memoizedState=r,function(){if((Pt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},ru={readContext:_e,use:Mo,useCallback:np,useContext:_e,useEffect:tu,useImperativeHandle:ep,useInsertionEffect:Zf,useLayoutEffect:Jf,useMemo:ip,useReducer:Do,useRef:Kf,useState:function(){return Do(Qn)},useDebugValue:eu,useDeferredValue:function(e,i){var r=le();return sp(r,Ht.memoizedState,e,i)},useTransition:function(){var e=Do(Qn)[0],i=le().memoizedState;return[typeof e=="boolean"?e:Wa(e),i]},useSyncExternalStore:Nf,useId:lp,useHostTransitionStatus:su,useFormState:Xf,useActionState:Xf,useOptimistic:function(e,i){var r=le();return Uf(r,Ht,e,i)},useMemoCache:Kc,useCacheRefresh:cp};ru.useEffectEvent=Qf;var pp={readContext:_e,use:Mo,useCallback:np,useContext:_e,useEffect:tu,useImperativeHandle:ep,useInsertionEffect:Zf,useLayoutEffect:Jf,useMemo:ip,useReducer:Qc,useRef:Kf,useState:function(){return Qc(Qn)},useDebugValue:eu,useDeferredValue:function(e,i){var r=le();return Ht===null?nu(r,e,i):sp(r,Ht.memoizedState,e,i)},useTransition:function(){var e=Qc(Qn)[0],i=le().memoizedState;return[typeof e=="boolean"?e:Wa(e),i]},useSyncExternalStore:Nf,useId:lp,useHostTransitionStatus:su,useFormState:$f,useActionState:$f,useOptimistic:function(e,i){var r=le();return Ht!==null?Uf(r,Ht,e,i):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Kc,useCacheRefresh:cp};pp.useEffectEvent=Qf;function ou(e,i,r,c){i=e.memoizedState,r=r(c,i),r=r==null?i:y({},i,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var lu={enqueueSetState:function(e,i,r){e=e._reactInternals;var c=nn(),f=xi(c);f.payload=i,r!=null&&(f.callback=r),i=Ti(e,f,c),i!==null&&(Ge(i,e,c),Xa(i,e,c))},enqueueReplaceState:function(e,i,r){e=e._reactInternals;var c=nn(),f=xi(c);f.tag=1,f.payload=i,r!=null&&(f.callback=r),i=Ti(e,f,c),i!==null&&(Ge(i,e,c),Xa(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var r=nn(),c=xi(r);c.tag=2,i!=null&&(c.callback=i),i=Ti(e,c,r),i!==null&&(Ge(i,e,r),Xa(i,e,r))}};function gp(e,i,r,c,f,m,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,m,v):i.prototype&&i.prototype.isPureReactComponent?!Fa(r,c)||!Fa(f,m):!0}function mp(e,i,r,c){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,c),i.state!==e&&lu.enqueueReplaceState(i,i.state,null)}function os(e,i){var r=i;if("ref"in i){r={};for(var c in i)c!=="ref"&&(r[c]=i[c])}if(e=e.defaultProps){r===i&&(r=y({},r));for(var f in e)r[f]===void 0&&(r[f]=e[f])}return r}function yp(e){uo(e)}function bp(e){console.error(e)}function vp(e){uo(e)}function ko(e,i){try{var r=e.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Ap(e,i,r){try{var c=e.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function cu(e,i,r){return r=xi(r),r.tag=3,r.payload={element:null},r.callback=function(){ko(e,i)},r}function Sp(e){return e=xi(e),e.tag=3,e}function Ep(e,i,r,c){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;e.payload=function(){return f(m)},e.callback=function(){Ap(i,r,c)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Ap(i,r,c),typeof f!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function Uv(e,i,r,c,f){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=r.alternate,i!==null&&Hs(i,r,f,!0),r=Ze.current,r!==null){switch(r.tag){case 31:case 13:return gn===null?Xo():r.alternate===null&&re===0&&(re=3),r.flags&=-257,r.flags|=65536,r.lanes=f,c===So?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([c]):i.add(c),ku(e,c,f)),!1;case 22:return r.flags|=65536,c===So?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([c]):r.add(c)),ku(e,c,f)),!1}throw Error(s(435,r.tag))}return ku(e,c,f),Xo(),!1}if(Dt)return i=Ze.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==Rc&&(e=Error(s(422),{cause:c}),Ia(hn(e,r)))):(c!==Rc&&(i=Error(s(423),{cause:c}),Ia(hn(i,r))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,c=hn(c,r),f=cu(e.stateNode,c,f),Uc(e,f),re!==4&&(re=2)),!1;var m=Error(s(520),{cause:c});if(m=hn(m,r),rr===null?rr=[m]:rr.push(m),re!==4&&(re=2),i===null)return!0;c=hn(c,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,e=f&-f,r.lanes|=e,e=cu(r.stateNode,c,e),Uc(r,e),!1;case 1:if(i=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Oi===null||!Oi.has(m))))return r.flags|=65536,f&=-f,r.lanes|=f,f=Sp(f),Ep(f,e,r,c),Uc(r,f),!1}r=r.return}while(r!==null);return!1}var uu=Error(s(461)),fe=!1;function xe(e,i,r,c){i.child=e===null?Tf(i,null,r,c):as(i,e.child,r,c)}function wp(e,i,r,c,f){r=r.render;var m=i.ref;if("ref"in c){var v={};for(var x in c)x!=="ref"&&(v[x]=c[x])}else v=c;return es(i),c=qc(e,i,r,v,m,f),x=Xc(),e!==null&&!fe?(Yc(e,i,f),Zn(e,i,f)):(Dt&&x&&Tc(i),i.flags|=1,xe(e,i,c,f),i.child)}function _p(e,i,r,c,f){if(e===null){var m=r.type;return typeof m=="function"&&!wc(m)&&m.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=m,xp(e,i,m,c,f)):(e=go(r.type,null,c,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(m=e.child,!bu(e,f)){var v=m.memoizedProps;if(r=r.compare,r=r!==null?r:Fa,r(v,c)&&e.ref===i.ref)return Zn(e,i,f)}return i.flags|=1,e=Xn(m,c),e.ref=i.ref,e.return=i,i.child=e}function xp(e,i,r,c,f){if(e!==null){var m=e.memoizedProps;if(Fa(m,c)&&e.ref===i.ref)if(fe=!1,i.pendingProps=c=m,bu(e,f))(e.flags&131072)!==0&&(fe=!0);else return i.lanes=e.lanes,Zn(e,i,f)}return hu(e,i,r,c,f)}function Tp(e,i,r,c){var f=c.children,m=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,e!==null){for(c=i.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,i.child=null;return Cp(e,i,m,r,c)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&vo(i,m!==null?m.cachePool:null),m!==null?Mf(i,m):Ic(),Df(i);else return c=i.lanes=536870912,Cp(e,i,m!==null?m.baseLanes|r:r,r,c)}else m!==null?(vo(i,m.cachePool),Mf(i,m),Ri(),i.memoizedState=null):(e!==null&&vo(i,null),Ic(),Ri());return xe(e,i,f,r),i.child}function Ja(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Cp(e,i,r,c,f){var m=Bc();return m=m===null?null:{parent:he._currentValue,pool:m},i.memoizedState={baseLanes:r,cachePool:m},e!==null&&vo(i,null),Ic(),Df(i),e!==null&&Hs(e,i,c,!0),i.childLanes=f,null}function Bo(e,i){return i=zo({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function Rp(e,i,r){return as(i,e.child,null,r),e=Bo(i,i.pendingProps),e.flags|=2,Je(i),i.memoizedState=null,e}function Hv(e,i,r){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Dt){if(c.mode==="hidden")return e=Bo(i,c),i.lanes=536870912,Ja(null,e);if(Gc(i),(e=$t)?(e=Hg(e,pn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Ai!==null?{id:Mn,overflow:Dn}:null,retryLane:536870912,hydrationErrors:null},r=hf(e),r.return=i,i.child=r,we=i,$t=null)):e=null,e===null)throw Ei(i);return i.lanes=536870912,null}return Bo(i,c)}var m=e.memoizedState;if(m!==null){var v=m.dehydrated;if(Gc(i),f)if(i.flags&256)i.flags&=-257,i=Rp(e,i,r);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(fe||Hs(e,i,r,!1),f=(r&e.childLanes)!==0,fe||f){if(c=Vt,c!==null&&(v=yd(c,r),v!==0&&v!==m.retryLane))throw m.retryLane=v,Qi(e,v),Ge(c,e,v),uu;Xo(),i=Rp(e,i,r)}else e=m.treeContext,$t=mn(v.nextSibling),we=i,Dt=!0,Si=null,pn=!1,e!==null&&pf(i,e),i=Bo(i,c),i.flags|=4096;return i}return e=Xn(e.child,{mode:c.mode,children:c.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Po(e,i){var r=i.ref;if(r===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(i.flags|=4194816)}}function hu(e,i,r,c,f){return es(i),r=qc(e,i,r,c,void 0,f),c=Xc(),e!==null&&!fe?(Yc(e,i,f),Zn(e,i,f)):(Dt&&c&&Tc(i),i.flags|=1,xe(e,i,r,f),i.child)}function Mp(e,i,r,c,f,m){return es(i),i.updateQueue=null,r=Of(i,c,r,f),Lf(e),c=Xc(),e!==null&&!fe?(Yc(e,i,m),Zn(e,i,m)):(Dt&&c&&Tc(i),i.flags|=1,xe(e,i,r,m),i.child)}function Dp(e,i,r,c,f){if(es(i),i.stateNode===null){var m=Ps,v=r.contextType;typeof v=="object"&&v!==null&&(m=_e(v)),m=new r(c,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=lu,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=c,m.state=i.memoizedState,m.refs={},zc(i),v=r.contextType,m.context=typeof v=="object"&&v!==null?_e(v):Ps,m.state=i.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(ou(i,r,v,c),m.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&lu.enqueueReplaceState(m,m.state,null),$a(i,c,m,f),Ya(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(e===null){m=i.stateNode;var x=i.memoizedProps,R=os(r,x);m.props=R;var U=m.context,X=r.contextType;v=Ps,typeof X=="object"&&X!==null&&(v=_e(X));var K=r.getDerivedStateFromProps;X=typeof K=="function"||typeof m.getSnapshotBeforeUpdate=="function",x=i.pendingProps!==x,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x||U!==v)&&mp(i,m,c,v),_i=!1;var H=i.memoizedState;m.state=H,$a(i,c,m,f),Ya(),U=i.memoizedState,x||H!==U||_i?(typeof K=="function"&&(ou(i,r,K,c),U=i.memoizedState),(R=_i||gp(i,r,R,c,H,U,v))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=U),m.props=c,m.state=U,m.context=v,c=R):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{m=i.stateNode,Fc(e,i),v=i.memoizedProps,X=os(r,v),m.props=X,K=i.pendingProps,H=m.context,U=r.contextType,R=Ps,typeof U=="object"&&U!==null&&(R=_e(U)),x=r.getDerivedStateFromProps,(U=typeof x=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==K||H!==R)&&mp(i,m,c,R),_i=!1,H=i.memoizedState,m.state=H,$a(i,c,m,f),Ya();var G=i.memoizedState;v!==K||H!==G||_i||e!==null&&e.dependencies!==null&&yo(e.dependencies)?(typeof x=="function"&&(ou(i,r,x,c),G=i.memoizedState),(X=_i||gp(i,r,X,c,H,G,R)||e!==null&&e.dependencies!==null&&yo(e.dependencies))?(U||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,G,R),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,G,R)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=G),m.props=c,m.state=G,m.context=R,c=X):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(i.flags|=1024),c=!1)}return m=c,Po(e,i),c=(i.flags&128)!==0,m||c?(m=i.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,e!==null&&c?(i.child=as(i,e.child,null,f),i.child=as(i,null,r,f)):xe(e,i,r,f),i.memoizedState=m.state,e=i.child):e=Zn(e,i,f),e}function Lp(e,i,r,c){return Ji(),i.flags|=256,xe(e,i,r,c),i.child}var du={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fu(e){return{baseLanes:e,cachePool:Af()}}function pu(e,i,r){return e=e!==null?e.childLanes&~r:0,i&&(e|=en),e}function Op(e,i,r){var c=i.pendingProps,f=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(oe.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Dt){if(f?Ci(i):Ri(),(e=$t)?(e=Hg(e,pn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Ai!==null?{id:Mn,overflow:Dn}:null,retryLane:536870912,hydrationErrors:null},r=hf(e),r.return=i,i.child=r,we=i,$t=null)):e=null,e===null)throw Ei(i);return Wu(e)?i.lanes=32:i.lanes=536870912,null}var x=c.children;return c=c.fallback,f?(Ri(),f=i.mode,x=zo({mode:"hidden",children:x},f),c=Zi(c,f,r,null),x.return=i,c.return=i,x.sibling=c,i.child=x,c=i.child,c.memoizedState=fu(r),c.childLanes=pu(e,v,r),i.memoizedState=du,Ja(null,c)):(Ci(i),gu(i,x))}var R=e.memoizedState;if(R!==null&&(x=R.dehydrated,x!==null)){if(m)i.flags&256?(Ci(i),i.flags&=-257,i=mu(e,i,r)):i.memoizedState!==null?(Ri(),i.child=e.child,i.flags|=128,i=null):(Ri(),x=c.fallback,f=i.mode,c=zo({mode:"visible",children:c.children},f),x=Zi(x,f,r,null),x.flags|=2,c.return=i,x.return=i,c.sibling=x,i.child=c,as(i,e.child,null,r),c=i.child,c.memoizedState=fu(r),c.childLanes=pu(e,v,r),i.memoizedState=du,i=Ja(null,c));else if(Ci(i),Wu(x)){if(v=x.nextSibling&&x.nextSibling.dataset,v)var U=v.dgst;v=U,c=Error(s(419)),c.stack="",c.digest=v,Ia({value:c,source:null,stack:null}),i=mu(e,i,r)}else if(fe||Hs(e,i,r,!1),v=(r&e.childLanes)!==0,fe||v){if(v=Vt,v!==null&&(c=yd(v,r),c!==0&&c!==R.retryLane))throw R.retryLane=c,Qi(e,c),Ge(v,e,c),uu;Ku(x)||Xo(),i=mu(e,i,r)}else Ku(x)?(i.flags|=192,i.child=e.child,i=null):(e=R.treeContext,$t=mn(x.nextSibling),we=i,Dt=!0,Si=null,pn=!1,e!==null&&pf(i,e),i=gu(i,c.children),i.flags|=4096);return i}return f?(Ri(),x=c.fallback,f=i.mode,R=e.child,U=R.sibling,c=Xn(R,{mode:"hidden",children:c.children}),c.subtreeFlags=R.subtreeFlags&65011712,U!==null?x=Xn(U,x):(x=Zi(x,f,r,null),x.flags|=2),x.return=i,c.return=i,c.sibling=x,i.child=c,Ja(null,c),c=i.child,x=e.child.memoizedState,x===null?x=fu(r):(f=x.cachePool,f!==null?(R=he._currentValue,f=f.parent!==R?{parent:R,pool:R}:f):f=Af(),x={baseLanes:x.baseLanes|r,cachePool:f}),c.memoizedState=x,c.childLanes=pu(e,v,r),i.memoizedState=du,Ja(e.child,c)):(Ci(i),r=e.child,e=r.sibling,r=Xn(r,{mode:"visible",children:c.children}),r.return=i,r.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=r,i.memoizedState=null,r)}function gu(e,i){return i=zo({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function zo(e,i){return e=Qe(22,e,null,i),e.lanes=0,e}function mu(e,i,r){return as(i,e.child,null,r),e=gu(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Np(e,i,r){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i),Lc(e.return,i,r)}function yu(e,i,r,c,f,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:f,treeForkCount:m}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=r,v.tailMode=f,v.treeForkCount=m)}function kp(e,i,r){var c=i.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=oe.current,x=(v&2)!==0;if(x?(v=v&1|2,i.flags|=128):v&=1,W(oe,v),xe(e,i,c,r),c=Dt?Ha:0,!x&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Np(e,r,i);else if(e.tag===19)Np(e,r,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(r=i.child,f=null;r!==null;)e=r.alternate,e!==null&&xo(e)===null&&(f=r),r=r.sibling;r=f,r===null?(f=i.child,i.child=null):(f=r.sibling,r.sibling=null),yu(i,!1,f,r,m,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&xo(e)===null){i.child=f;break}e=f.sibling,f.sibling=r,r=f,f=e}yu(i,!0,r,null,m,c);break;case"together":yu(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Zn(e,i,r){if(e!==null&&(i.dependencies=e.dependencies),Li|=i.lanes,(r&i.childLanes)===0)if(e!==null){if(Hs(e,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,r=Xn(e,e.pendingProps),i.child=r,r.return=i;e.sibling!==null;)e=e.sibling,r=r.sibling=Xn(e,e.pendingProps),r.return=i;r.sibling=null}return i.child}function bu(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&yo(e)))}function Iv(e,i,r){switch(i.tag){case 3:Yt(i,i.stateNode.containerInfo),wi(i,he,e.memoizedState.cache),Ji();break;case 27:case 5:zt(i);break;case 4:Yt(i,i.stateNode.containerInfo);break;case 10:wi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Gc(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ci(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Op(e,i,r):(Ci(i),e=Zn(e,i,r),e!==null?e.sibling:null);Ci(i);break;case 19:var f=(e.flags&128)!==0;if(c=(r&i.childLanes)!==0,c||(Hs(e,i,r,!1),c=(r&i.childLanes)!==0),f){if(c)return kp(e,i,r);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),W(oe,oe.current),c)break;return null;case 22:return i.lanes=0,Tp(e,i,r,i.pendingProps);case 24:wi(i,he,e.memoizedState.cache)}return Zn(e,i,r)}function Bp(e,i,r){if(e!==null)if(e.memoizedProps!==i.pendingProps)fe=!0;else{if(!bu(e,r)&&(i.flags&128)===0)return fe=!1,Iv(e,i,r);fe=(e.flags&131072)!==0}else fe=!1,Dt&&(i.flags&1048576)!==0&&ff(i,Ha,i.index);switch(i.lanes=0,i.tag){case 16:t:{var c=i.pendingProps;if(e=is(i.elementType),i.type=e,typeof e=="function")wc(e)?(c=os(e,c),i.tag=1,i=Dp(null,i,e,c,r)):(i.tag=0,i=hu(null,i,e,c,r));else{if(e!=null){var f=e.$$typeof;if(f===O){i.tag=11,i=wp(null,i,e,c,r);break t}else if(f===B){i.tag=14,i=_p(null,i,e,c,r);break t}}throw i=at(e)||e,Error(s(306,i,""))}}return i;case 0:return hu(e,i,i.type,i.pendingProps,r);case 1:return c=i.type,f=os(c,i.pendingProps),Dp(e,i,c,f,r);case 3:t:{if(Yt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));c=i.pendingProps;var m=i.memoizedState;f=m.element,Fc(e,i),$a(i,c,null,r);var v=i.memoizedState;if(c=v.cache,wi(i,he,c),c!==m.cache&&Oc(i,[he],r,!0),Ya(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Lp(e,i,c,r);break t}else if(c!==f){f=hn(Error(s(424)),i),Ia(f),i=Lp(e,i,c,r);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($t=mn(e.firstChild),we=i,Dt=!0,Si=null,pn=!0,r=Tf(i,null,c,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Ji(),c===f){i=Zn(e,i,r);break t}xe(e,i,c,r)}i=i.child}return i;case 26:return Po(e,i),e===null?(r=Xg(i.type,null,i.pendingProps,null))?i.memoizedState=r:Dt||(r=i.type,e=i.pendingProps,c=Jo(ht.current).createElement(r),c[Ee]=i,c[ze]=e,Te(c,r,e),ye(c),i.stateNode=c):i.memoizedState=Xg(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return zt(i),e===null&&Dt&&(c=i.stateNode=Gg(i.type,i.pendingProps,ht.current),we=i,pn=!0,f=$t,Pi(i.type)?(Qu=f,$t=mn(c.firstChild)):$t=f),xe(e,i,i.pendingProps.children,r),Po(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Dt&&((f=c=$t)&&(c=y0(c,i.type,i.pendingProps,pn),c!==null?(i.stateNode=c,we=i,$t=mn(c.firstChild),pn=!1,f=!0):f=!1),f||Ei(i)),zt(i),f=i.type,m=i.pendingProps,v=e!==null?e.memoizedProps:null,c=m.children,Xu(f,m)?c=null:v!==null&&Xu(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=qc(e,i,Ov,null,null,r),pr._currentValue=f),Po(e,i),xe(e,i,c,r),i.child;case 6:return e===null&&Dt&&((e=r=$t)&&(r=b0(r,i.pendingProps,pn),r!==null?(i.stateNode=r,we=i,$t=null,e=!0):e=!1),e||Ei(i)),null;case 13:return Op(e,i,r);case 4:return Yt(i,i.stateNode.containerInfo),c=i.pendingProps,e===null?i.child=as(i,null,c,r):xe(e,i,c,r),i.child;case 11:return wp(e,i,i.type,i.pendingProps,r);case 7:return xe(e,i,i.pendingProps,r),i.child;case 8:return xe(e,i,i.pendingProps.children,r),i.child;case 12:return xe(e,i,i.pendingProps.children,r),i.child;case 10:return c=i.pendingProps,wi(i,i.type,c.value),xe(e,i,c.children,r),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,es(i),f=_e(f),c=c(f),i.flags|=1,xe(e,i,c,r),i.child;case 14:return _p(e,i,i.type,i.pendingProps,r);case 15:return xp(e,i,i.type,i.pendingProps,r);case 19:return kp(e,i,r);case 31:return Hv(e,i,r);case 22:return Tp(e,i,r,i.pendingProps);case 24:return es(i),c=_e(he),e===null?(f=Bc(),f===null&&(f=Vt,m=Nc(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=r),f=m),i.memoizedState={parent:c,cache:f},zc(i),wi(i,he,f)):((e.lanes&r)!==0&&(Fc(e,i),$a(i,null,null,r),Ya()),f=e.memoizedState,m=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),wi(i,he,c)):(c=m.cache,wi(i,he,c),c!==f.cache&&Oc(i,[he],r,!0))),xe(e,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Jn(e){e.flags|=4}function vu(e,i,r,c,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(lg())e.flags|=8192;else throw ss=So,Pc}else e.flags&=-16777217}function Pp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Qg(i))if(lg())e.flags|=8192;else throw ss=So,Pc}function Fo(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?pd():536870912,e.lanes|=i,Zs|=i)}function tr(e,i){if(!Dt)switch(e.tailMode){case"hidden":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Kt(e){var i=e.alternate!==null&&e.alternate.child===e.child,r=0,c=0;if(i)for(var f=e.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=c,e.childLanes=r,i}function jv(e,i,r){var c=i.pendingProps;switch(Cc(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(i),null;case 1:return Kt(i),null;case 3:return r=i.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Kn(he),_t(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Us(i)?Jn(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Mc())),Kt(i),null;case 26:var f=i.type,m=i.memoizedState;return e===null?(Jn(i),m!==null?(Kt(i),Pp(i,m)):(Kt(i),vu(i,f,null,c,r))):m?m!==e.memoizedState?(Jn(i),Kt(i),Pp(i,m)):(Kt(i),i.flags&=-16777217):(e=e.memoizedProps,e!==c&&Jn(i),Kt(i),vu(i,f,e,c,r)),null;case 27:if(Pe(i),r=ht.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Jn(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Kt(i),null}e=tt.current,Us(i)?gf(i):(e=Gg(f,c,r),i.stateNode=e,Jn(i))}return Kt(i),null;case 5:if(Pe(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Jn(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return Kt(i),null}if(m=tt.current,Us(i))gf(i);else{var v=Jo(ht.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[Ee]=i,m[ze]=c;t:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break t;for(;v.sibling===null;){if(v.return===null||v.return===i)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=m;t:switch(Te(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&Jn(i)}}return Kt(i),vu(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,r),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==c&&Jn(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(e=ht.current,Us(i)){if(e=i.stateNode,r=i.memoizedProps,c=null,f=we,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}e[Ee]=i,e=!!(e.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Og(e.nodeValue,r)),e||Ei(i,!0)}else e=Jo(e).createTextNode(c),e[Ee]=i,i.stateNode=e}return Kt(i),null;case 31:if(r=i.memoizedState,e===null||e.memoizedState!==null){if(c=Us(i),r!==null){if(e===null){if(!c)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ee]=i}else Ji(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Kt(i),e=!1}else r=Mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return i.flags&256?(Je(i),i):(Je(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Kt(i),null;case 13:if(c=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Us(i),c!==null&&c.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ee]=i}else Ji(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Kt(i),f=!1}else f=Mc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Je(i),i):(Je(i),null)}return Je(i),(i.flags&128)!==0?(i.lanes=r,i):(r=c!==null,e=e!==null&&e.memoizedState!==null,r&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),r!==e&&r&&(i.child.flags|=8192),Fo(i,i.updateQueue),Kt(i),null);case 4:return _t(),e===null&&Iu(i.stateNode.containerInfo),Kt(i),null;case 10:return Kn(i.type),Kt(i),null;case 19:if(V(oe),c=i.memoizedState,c===null)return Kt(i),null;if(f=(i.flags&128)!==0,m=c.rendering,m===null)if(f)tr(c,!1);else{if(re!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(m=xo(e),m!==null){for(i.flags|=128,tr(c,!1),e=m.updateQueue,i.updateQueue=e,Fo(i,e),i.subtreeFlags=0,e=r,r=i.child;r!==null;)uf(r,e),r=r.sibling;return W(oe,oe.current&1|2),Dt&&Yn(i,c.treeForkCount),i.child}e=e.sibling}c.tail!==null&&Oe()>Go&&(i.flags|=128,f=!0,tr(c,!1),i.lanes=4194304)}else{if(!f)if(e=xo(m),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,Fo(i,e),tr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Dt)return Kt(i),null}else 2*Oe()-c.renderingStartTime>Go&&r!==536870912&&(i.flags|=128,f=!0,tr(c,!1),i.lanes=4194304);c.isBackwards?(m.sibling=i.child,i.child=m):(e=c.last,e!==null?e.sibling=m:i.child=m,c.last=m)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Oe(),e.sibling=null,r=oe.current,W(oe,f?r&1|2:r&1),Dt&&Yn(i,c.treeForkCount),e):(Kt(i),null);case 22:case 23:return Je(i),jc(),c=i.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(r&536870912)!==0&&(i.flags&128)===0&&(Kt(i),i.subtreeFlags&6&&(i.flags|=8192)):Kt(i),r=i.updateQueue,r!==null&&Fo(i,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==r&&(i.flags|=2048),e!==null&&V(ns),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Kn(he),Kt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Gv(e,i){switch(Cc(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Kn(he),_t(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Pe(i),null;case 31:if(i.memoizedState!==null){if(Je(i),i.alternate===null)throw Error(s(340));Ji()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Je(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ji()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return V(oe),null;case 4:return _t(),null;case 10:return Kn(i.type),null;case 22:case 23:return Je(i),jc(),e!==null&&V(ns),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Kn(he),null;case 25:return null;default:return null}}function zp(e,i){switch(Cc(i),i.tag){case 3:Kn(he),_t();break;case 26:case 27:case 5:Pe(i);break;case 4:_t();break;case 31:i.memoizedState!==null&&Je(i);break;case 13:Je(i);break;case 19:V(oe);break;case 10:Kn(i.type);break;case 22:case 23:Je(i),jc(),e!==null&&V(ns);break;case 24:Kn(he)}}function er(e,i){try{var r=i.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&e)===e){c=void 0;var m=r.create,v=r.inst;c=m(),v.destroy=c}r=r.next}while(r!==f)}}catch(x){Ut(i,i.return,x)}}function Mi(e,i,r){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&e)===e){var v=c.inst,x=v.destroy;if(x!==void 0){v.destroy=void 0,f=i;var R=r,U=x;try{U()}catch(X){Ut(f,R,X)}}}c=c.next}while(c!==m)}}catch(X){Ut(i,i.return,X)}}function Fp(e){var i=e.updateQueue;if(i!==null){var r=e.stateNode;try{Rf(i,r)}catch(c){Ut(e,e.return,c)}}}function Up(e,i,r){r.props=os(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(c){Ut(e,i,c)}}function nr(e,i){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof r=="function"?e.refCleanup=r(c):r.current=c}}catch(f){Ut(e,i,f)}}function Ln(e,i){var r=e.ref,c=e.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(f){Ut(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Ut(e,i,f)}else r.current=null}function Hp(e){var i=e.type,r=e.memoizedProps,c=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(f){Ut(e,e.return,f)}}function Au(e,i,r){try{var c=e.stateNode;h0(c,e.type,r,i),c[ze]=i}catch(f){Ut(e,e.return,f)}}function Ip(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Pi(e.type)||e.tag===4}function Su(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ip(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Pi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Eu(e,i,r){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(e),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=Vn));else if(c!==4&&(c===27&&Pi(e.type)&&(r=e.stateNode,i=null),e=e.child,e!==null))for(Eu(e,i,r),e=e.sibling;e!==null;)Eu(e,i,r),e=e.sibling}function Uo(e,i,r){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?r.insertBefore(e,i):r.appendChild(e);else if(c!==4&&(c===27&&Pi(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Uo(e,i,r),e=e.sibling;e!==null;)Uo(e,i,r),e=e.sibling}function jp(e){var i=e.stateNode,r=e.memoizedProps;try{for(var c=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Te(i,c,r),i[Ee]=e,i[ze]=r}catch(m){Ut(e,e.return,m)}}var ti=!1,pe=!1,wu=!1,Gp=typeof WeakSet=="function"?WeakSet:Set,be=null;function Vv(e,i){if(e=e.containerInfo,Vu=rl,e=tf(e),mc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else t:{r=(r=e.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break t}var v=0,x=-1,R=-1,U=0,X=0,K=e,H=null;e:for(;;){for(var G;K!==r||f!==0&&K.nodeType!==3||(x=v+f),K!==m||c!==0&&K.nodeType!==3||(R=v+c),K.nodeType===3&&(v+=K.nodeValue.length),(G=K.firstChild)!==null;)H=K,K=G;for(;;){if(K===e)break e;if(H===r&&++U===f&&(x=v),H===m&&++X===c&&(R=v),(G=K.nextSibling)!==null)break;K=H,H=K.parentNode}K=G}r=x===-1||R===-1?null:{start:x,end:R}}else r=null}r=r||{start:0,end:0}}else r=null;for(qu={focusedElem:e,selectionRange:r},rl=!1,be=i;be!==null;)if(i=be,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,be=e;else for(;be!==null;){switch(i=be,m=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)f=e[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,r=i,f=m.memoizedProps,m=m.memoizedState,c=r.stateNode;try{var it=os(r.type,f);e=c.getSnapshotBeforeUpdate(it,m),c.__reactInternalSnapshotBeforeUpdate=e}catch(pt){Ut(r,r.return,pt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,r=e.nodeType,r===9)$u(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":$u(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,be=e;break}be=i.return}}function Vp(e,i,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:ni(e,r),c&4&&er(5,r);break;case 1:if(ni(e,r),c&4)if(e=r.stateNode,i===null)try{e.componentDidMount()}catch(v){Ut(r,r.return,v)}else{var f=os(r.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ut(r,r.return,v)}}c&64&&Fp(r),c&512&&nr(r,r.return);break;case 3:if(ni(e,r),c&64&&(e=r.updateQueue,e!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{Rf(e,i)}catch(v){Ut(r,r.return,v)}}break;case 27:i===null&&c&4&&jp(r);case 26:case 5:ni(e,r),i===null&&c&4&&Hp(r),c&512&&nr(r,r.return);break;case 12:ni(e,r);break;case 31:ni(e,r),c&4&&Yp(e,r);break;case 13:ni(e,r),c&4&&$p(e,r),c&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Jv.bind(null,r),v0(e,r))));break;case 22:if(c=r.memoizedState!==null||ti,!c){i=i!==null&&i.memoizedState!==null||pe,f=ti;var m=pe;ti=c,(pe=i)&&!m?ii(e,r,(r.subtreeFlags&8772)!==0):ni(e,r),ti=f,pe=m}break;case 30:break;default:ni(e,r)}}function qp(e){var i=e.alternate;i!==null&&(e.alternate=null,qp(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Jl(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Wt=null,Ue=!1;function ei(e,i,r){for(r=r.child;r!==null;)Xp(e,i,r),r=r.sibling}function Xp(e,i,r){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(Ta,r)}catch{}switch(r.tag){case 26:pe||Ln(r,i),ei(e,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:pe||Ln(r,i);var c=Wt,f=Ue;Pi(r.type)&&(Wt=r.stateNode,Ue=!1),ei(e,i,r),hr(r.stateNode),Wt=c,Ue=f;break;case 5:pe||Ln(r,i);case 6:if(c=Wt,f=Ue,Wt=null,ei(e,i,r),Wt=c,Ue=f,Wt!==null)if(Ue)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(r.stateNode)}catch(m){Ut(r,i,m)}else try{Wt.removeChild(r.stateNode)}catch(m){Ut(r,i,m)}break;case 18:Wt!==null&&(Ue?(e=Wt,Fg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),ra(e)):Fg(Wt,r.stateNode));break;case 4:c=Wt,f=Ue,Wt=r.stateNode.containerInfo,Ue=!0,ei(e,i,r),Wt=c,Ue=f;break;case 0:case 11:case 14:case 15:Mi(2,r,i),pe||Mi(4,r,i),ei(e,i,r);break;case 1:pe||(Ln(r,i),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Up(r,i,c)),ei(e,i,r);break;case 21:ei(e,i,r);break;case 22:pe=(c=pe)||r.memoizedState!==null,ei(e,i,r),pe=c;break;default:ei(e,i,r)}}function Yp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ra(e)}catch(r){Ut(i,i.return,r)}}}function $p(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ra(e)}catch(r){Ut(i,i.return,r)}}function qv(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Gp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Gp),i;default:throw Error(s(435,e.tag))}}function Ho(e,i){var r=qv(e);i.forEach(function(c){if(!r.has(c)){r.add(c);var f=t0.bind(null,e,c);c.then(f,f)}})}function He(e,i){var r=i.deletions;if(r!==null)for(var c=0;c<r.length;c++){var f=r[c],m=e,v=i,x=v;t:for(;x!==null;){switch(x.tag){case 27:if(Pi(x.type)){Wt=x.stateNode,Ue=!1;break t}break;case 5:Wt=x.stateNode,Ue=!1;break t;case 3:case 4:Wt=x.stateNode.containerInfo,Ue=!0;break t}x=x.return}if(Wt===null)throw Error(s(160));Xp(m,v,f),Wt=null,Ue=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Kp(i,e),i=i.sibling}var _n=null;function Kp(e,i){var r=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:He(i,e),Ie(e),c&4&&(Mi(3,e,e.return),er(3,e),Mi(5,e,e.return));break;case 1:He(i,e),Ie(e),c&512&&(pe||r===null||Ln(r,r.return)),c&64&&ti&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var f=_n;if(He(i,e),Ie(e),c&512&&(pe||r===null||Ln(r,r.return)),c&4){var m=r!==null?r.memoizedState:null;if(c=e.memoizedState,r===null)if(c===null)if(e.stateNode===null){t:{c=e.type,r=e.memoizedProps,f=f.ownerDocument||f;e:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ma]||m[Ee]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Te(m,c,r),m[Ee]=e,ye(m),c=m;break t;case"link":var v=Kg("link","href",f).get(c+(r.href||""));if(v){for(var x=0;x<v.length;x++)if(m=v[x],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(x,1);break e}}m=f.createElement(c),Te(m,c,r),f.head.appendChild(m);break;case"meta":if(v=Kg("meta","content",f).get(c+(r.content||""))){for(x=0;x<v.length;x++)if(m=v[x],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(x,1);break e}}m=f.createElement(c),Te(m,c,r),f.head.appendChild(m);break;default:throw Error(s(468,c))}m[Ee]=e,ye(m),c=m}e.stateNode=c}else Wg(f,e.type,e.stateNode);else e.stateNode=$g(f,c,e.memoizedProps);else m!==c?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,c===null?Wg(f,e.type,e.stateNode):$g(f,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Au(e,e.memoizedProps,r.memoizedProps)}break;case 27:He(i,e),Ie(e),c&512&&(pe||r===null||Ln(r,r.return)),r!==null&&c&4&&Au(e,e.memoizedProps,r.memoizedProps);break;case 5:if(He(i,e),Ie(e),c&512&&(pe||r===null||Ln(r,r.return)),e.flags&32){f=e.stateNode;try{Ms(f,"")}catch(it){Ut(e,e.return,it)}}c&4&&e.stateNode!=null&&(f=e.memoizedProps,Au(e,f,r!==null?r.memoizedProps:f)),c&1024&&(wu=!0);break;case 6:if(He(i,e),Ie(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,r=e.stateNode;try{r.nodeValue=c}catch(it){Ut(e,e.return,it)}}break;case 3:if(nl=null,f=_n,_n=tl(i.containerInfo),He(i,e),_n=f,Ie(e),c&4&&r!==null&&r.memoizedState.isDehydrated)try{ra(i.containerInfo)}catch(it){Ut(e,e.return,it)}wu&&(wu=!1,Wp(e));break;case 4:c=_n,_n=tl(e.stateNode.containerInfo),He(i,e),Ie(e),_n=c;break;case 12:He(i,e),Ie(e);break;case 31:He(i,e),Ie(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Ho(e,c)));break;case 13:He(i,e),Ie(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(jo=Oe()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Ho(e,c)));break;case 22:f=e.memoizedState!==null;var R=r!==null&&r.memoizedState!==null,U=ti,X=pe;if(ti=U||f,pe=X||R,He(i,e),pe=X,ti=U,Ie(e),c&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(r===null||R||ti||pe||ls(e)),r=null,i=e;;){if(i.tag===5||i.tag===26){if(r===null){R=r=i;try{if(m=R.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{x=R.stateNode;var K=R.memoizedProps.style,H=K!=null&&K.hasOwnProperty("display")?K.display:null;x.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(it){Ut(R,R.return,it)}}}else if(i.tag===6){if(r===null){R=i;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(it){Ut(R,R.return,it)}}}else if(i.tag===18){if(r===null){R=i;try{var G=R.stateNode;f?Ug(G,!0):Ug(R.stateNode,!1)}catch(it){Ut(R,R.return,it)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=e.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,Ho(e,r))));break;case 19:He(i,e),Ie(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Ho(e,c)));break;case 30:break;case 21:break;default:He(i,e),Ie(e)}}function Ie(e){var i=e.flags;if(i&2){try{for(var r,c=e.return;c!==null;){if(Ip(c)){r=c;break}c=c.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var f=r.stateNode,m=Su(e);Uo(e,m,f);break;case 5:var v=r.stateNode;r.flags&32&&(Ms(v,""),r.flags&=-33);var x=Su(e);Uo(e,x,v);break;case 3:case 4:var R=r.stateNode.containerInfo,U=Su(e);Eu(e,U,R);break;default:throw Error(s(161))}}catch(X){Ut(e,e.return,X)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Wp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Wp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function ni(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Vp(e,i.alternate,i),i=i.sibling}function ls(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Mi(4,i,i.return),ls(i);break;case 1:Ln(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&Up(i,i.return,r),ls(i);break;case 27:hr(i.stateNode);case 26:case 5:Ln(i,i.return),ls(i);break;case 22:i.memoizedState===null&&ls(i);break;case 30:ls(i);break;default:ls(i)}e=e.sibling}}function ii(e,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=e,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:ii(f,m,r),er(4,m);break;case 1:if(ii(f,m,r),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(U){Ut(c,c.return,U)}if(c=m,f=c.updateQueue,f!==null){var x=c.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)Cf(R[f],x)}catch(U){Ut(c,c.return,U)}}r&&v&64&&Fp(m),nr(m,m.return);break;case 27:jp(m);case 26:case 5:ii(f,m,r),r&&c===null&&v&4&&Hp(m),nr(m,m.return);break;case 12:ii(f,m,r);break;case 31:ii(f,m,r),r&&v&4&&Yp(f,m);break;case 13:ii(f,m,r),r&&v&4&&$p(f,m);break;case 22:m.memoizedState===null&&ii(f,m,r),nr(m,m.return);break;case 30:break;default:ii(f,m,r)}i=i.sibling}}function _u(e,i){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&ja(r))}function xu(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ja(e))}function xn(e,i,r,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Qp(e,i,r,c),i=i.sibling}function Qp(e,i,r,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:xn(e,i,r,c),f&2048&&er(9,i);break;case 1:xn(e,i,r,c);break;case 3:xn(e,i,r,c),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ja(e)));break;case 12:if(f&2048){xn(e,i,r,c),e=i.stateNode;try{var m=i.memoizedProps,v=m.id,x=m.onPostCommit;typeof x=="function"&&x(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Ut(i,i.return,R)}}else xn(e,i,r,c);break;case 31:xn(e,i,r,c);break;case 13:xn(e,i,r,c);break;case 23:break;case 22:m=i.stateNode,v=i.alternate,i.memoizedState!==null?m._visibility&2?xn(e,i,r,c):ir(e,i):m._visibility&2?xn(e,i,r,c):(m._visibility|=2,Ks(e,i,r,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&_u(v,i);break;case 24:xn(e,i,r,c),f&2048&&xu(i.alternate,i);break;default:xn(e,i,r,c)}}function Ks(e,i,r,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=e,v=i,x=r,R=c,U=v.flags;switch(v.tag){case 0:case 11:case 15:Ks(m,v,x,R,f),er(8,v);break;case 23:break;case 22:var X=v.stateNode;v.memoizedState!==null?X._visibility&2?Ks(m,v,x,R,f):ir(m,v):(X._visibility|=2,Ks(m,v,x,R,f)),f&&U&2048&&_u(v.alternate,v);break;case 24:Ks(m,v,x,R,f),f&&U&2048&&xu(v.alternate,v);break;default:Ks(m,v,x,R,f)}i=i.sibling}}function ir(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=e,c=i,f=c.flags;switch(c.tag){case 22:ir(r,c),f&2048&&_u(c.alternate,c);break;case 24:ir(r,c),f&2048&&xu(c.alternate,c);break;default:ir(r,c)}i=i.sibling}}var sr=8192;function Ws(e,i,r){if(e.subtreeFlags&sr)for(e=e.child;e!==null;)Zp(e,i,r),e=e.sibling}function Zp(e,i,r){switch(e.tag){case 26:Ws(e,i,r),e.flags&sr&&e.memoizedState!==null&&L0(r,_n,e.memoizedState,e.memoizedProps);break;case 5:Ws(e,i,r);break;case 3:case 4:var c=_n;_n=tl(e.stateNode.containerInfo),Ws(e,i,r),_n=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=sr,sr=16777216,Ws(e,i,r),sr=c):Ws(e,i,r));break;default:Ws(e,i,r)}}function Jp(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function ar(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];be=c,eg(c,e)}Jp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)tg(e),e=e.sibling}function tg(e){switch(e.tag){case 0:case 11:case 15:ar(e),e.flags&2048&&Mi(9,e,e.return);break;case 3:ar(e);break;case 12:ar(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Io(e)):ar(e);break;default:ar(e)}}function Io(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];be=c,eg(c,e)}Jp(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Mi(8,i,i.return),Io(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,Io(i));break;default:Io(i)}e=e.sibling}}function eg(e,i){for(;be!==null;){var r=be;switch(r.tag){case 0:case 11:case 15:Mi(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ja(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,be=c;else t:for(r=e;be!==null;){c=be;var f=c.sibling,m=c.return;if(qp(c),c===r){be=null;break t}if(f!==null){f.return=m,be=f;break t}be=m}}}var Xv={getCacheForType:function(e){var i=_e(he),r=i.data.get(e);return r===void 0&&(r=e(),i.data.set(e,r)),r},cacheSignal:function(){return _e(he).controller.signal}},Yv=typeof WeakMap=="function"?WeakMap:Map,Pt=0,Vt=null,xt=null,Ct=0,Ft=0,tn=null,Di=!1,Qs=!1,Tu=!1,si=0,re=0,Li=0,cs=0,Cu=0,en=0,Zs=0,rr=null,je=null,Ru=!1,jo=0,ng=0,Go=1/0,Vo=null,Oi=null,me=0,Ni=null,Js=null,ai=0,Mu=0,Du=null,ig=null,or=0,Lu=null;function nn(){return(Pt&2)!==0&&Ct!==0?Ct&-Ct:k.T!==null?zu():bd()}function sg(){if(en===0)if((Ct&536870912)===0||Dt){var e=Qr;Qr<<=1,(Qr&3932160)===0&&(Qr=262144),en=e}else en=536870912;return e=Ze.current,e!==null&&(e.flags|=32),en}function Ge(e,i,r){(e===Vt&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)&&(ta(e,0),ki(e,Ct,en,!1)),Ra(e,r),((Pt&2)===0||e!==Vt)&&(e===Vt&&((Pt&2)===0&&(cs|=r),re===4&&ki(e,Ct,en,!1)),On(e))}function ag(e,i,r){if((Pt&6)!==0)throw Error(s(327));var c=!r&&(i&127)===0&&(i&e.expiredLanes)===0||Ca(e,i),f=c?Wv(e,i):Nu(e,i,!0),m=c;do{if(f===0){Qs&&!c&&ki(e,i,0,!1);break}else{if(r=e.current.alternate,m&&!$v(r)){f=Nu(e,i,!1),m=!1;continue}if(f===2){if(m=i,e.errorRecoveryDisabledLanes&m)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var x=e;f=rr;var R=x.current.memoizedState.isDehydrated;if(R&&(ta(x,v).flags|=256),v=Nu(x,v,!1),v!==2){if(Tu&&!R){x.errorRecoveryDisabledLanes|=m,cs|=m,f=4;break t}m=je,je=f,m!==null&&(je===null?je=m:je.push.apply(je,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){ta(e,0),ki(e,i,0,!0);break}t:{switch(c=e,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:ki(c,i,en,!Di);break t;case 2:je=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=jo+300-Oe(),10<f)){if(ki(c,i,en,!Di),Jr(c,0,!0)!==0)break t;ai=i,c.timeoutHandle=Pg(rg.bind(null,c,r,je,Vo,Ru,i,en,cs,Zs,Di,m,"Throttled",-0,0),f);break t}rg(c,r,je,Vo,Ru,i,en,cs,Zs,Di,m,null,-0,0)}}break}while(!0);On(e)}function rg(e,i,r,c,f,m,v,x,R,U,X,K,H,G){if(e.timeoutHandle=-1,K=i.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vn},Zp(i,m,K);var it=(m&62914560)===m?jo-Oe():(m&4194048)===m?ng-Oe():0;if(it=O0(K,it),it!==null){ai=m,e.cancelPendingCommit=it(pg.bind(null,e,i,m,r,c,f,v,x,R,X,K,null,H,G)),ki(e,m,v,!U);return}}pg(e,i,m,r,c,f,v,x,R)}function $v(e){for(var i=e;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var f=r[c],m=f.getSnapshot;f=f.value;try{if(!We(m(),f))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ki(e,i,r,c){i&=~Cu,i&=~cs,e.suspendedLanes|=i,e.pingedLanes&=~i,c&&(e.warmLanes|=i),c=e.expirationTimes;for(var f=i;0<f;){var m=31-Ke(f),v=1<<m;c[m]=-1,f&=~v}r!==0&&gd(e,r,i)}function qo(){return(Pt&6)===0?(lr(0),!1):!0}function Ou(){if(xt!==null){if(Ft===0)var e=xt.return;else e=xt,$n=ts=null,$c(e),Vs=null,Va=0,e=xt;for(;e!==null;)zp(e.alternate,e),e=e.return;xt=null}}function ta(e,i){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,p0(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),ai=0,Ou(),Vt=e,xt=r=Xn(e.current,null),Ct=i,Ft=0,tn=null,Di=!1,Qs=Ca(e,i),Tu=!1,Zs=en=Cu=cs=Li=re=0,je=rr=null,Ru=!1,(i&8)!==0&&(i|=i&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=i;0<c;){var f=31-Ke(c),m=1<<f;i|=e[f],c&=~m}return si=i,ho(),r}function og(e,i){St=null,k.H=Za,i===Gs||i===Ao?(i=wf(),Ft=3):i===Pc?(i=wf(),Ft=4):Ft=i===uu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,tn=i,xt===null&&(re=1,ko(e,hn(i,e.current)))}function lg(){var e=Ze.current;return e===null?!0:(Ct&4194048)===Ct?gn===null:(Ct&62914560)===Ct||(Ct&536870912)!==0?e===gn:!1}function cg(){var e=k.H;return k.H=Za,e===null?Za:e}function ug(){var e=k.A;return k.A=Xv,e}function Xo(){re=4,Di||(Ct&4194048)!==Ct&&Ze.current!==null||(Qs=!0),(Li&134217727)===0&&(cs&134217727)===0||Vt===null||ki(Vt,Ct,en,!1)}function Nu(e,i,r){var c=Pt;Pt|=2;var f=cg(),m=ug();(Vt!==e||Ct!==i)&&(Vo=null,ta(e,i)),i=!1;var v=re;t:do try{if(Ft!==0&&xt!==null){var x=xt,R=tn;switch(Ft){case 8:Ou(),v=6;break t;case 3:case 2:case 9:case 6:Ze.current===null&&(i=!0);var U=Ft;if(Ft=0,tn=null,ea(e,x,R,U),r&&Qs){v=0;break t}break;default:U=Ft,Ft=0,tn=null,ea(e,x,R,U)}}Kv(),v=re;break}catch(X){og(e,X)}while(!0);return i&&e.shellSuspendCounter++,$n=ts=null,Pt=c,k.H=f,k.A=m,xt===null&&(Vt=null,Ct=0,ho()),v}function Kv(){for(;xt!==null;)hg(xt)}function Wv(e,i){var r=Pt;Pt|=2;var c=cg(),f=ug();Vt!==e||Ct!==i?(Vo=null,Go=Oe()+500,ta(e,i)):Qs=Ca(e,i);t:do try{if(Ft!==0&&xt!==null){i=xt;var m=tn;e:switch(Ft){case 1:Ft=0,tn=null,ea(e,i,m,1);break;case 2:case 9:if(Sf(m)){Ft=0,tn=null,dg(i);break}i=function(){Ft!==2&&Ft!==9||Vt!==e||(Ft=7),On(e)},m.then(i,i);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:Sf(m)?(Ft=0,tn=null,dg(i)):(Ft=0,tn=null,ea(e,i,m,7));break;case 5:var v=null;switch(xt.tag){case 26:v=xt.memoizedState;case 5:case 27:var x=xt;if(v?Qg(v):x.stateNode.complete){Ft=0,tn=null;var R=x.sibling;if(R!==null)xt=R;else{var U=x.return;U!==null?(xt=U,Yo(U)):xt=null}break e}}Ft=0,tn=null,ea(e,i,m,5);break;case 6:Ft=0,tn=null,ea(e,i,m,6);break;case 8:Ou(),re=6;break t;default:throw Error(s(462))}}Qv();break}catch(X){og(e,X)}while(!0);return $n=ts=null,k.H=c,k.A=f,Pt=r,xt!==null?0:(Vt=null,Ct=0,ho(),re)}function Qv(){for(;xt!==null&&!Xl();)hg(xt)}function hg(e){var i=Bp(e.alternate,e,si);e.memoizedProps=e.pendingProps,i===null?Yo(e):xt=i}function dg(e){var i=e,r=i.alternate;switch(i.tag){case 15:case 0:i=Mp(r,i,i.pendingProps,i.type,void 0,Ct);break;case 11:i=Mp(r,i,i.pendingProps,i.type.render,i.ref,Ct);break;case 5:$c(i);default:zp(r,i),i=xt=uf(i,si),i=Bp(r,i,si)}e.memoizedProps=e.pendingProps,i===null?Yo(e):xt=i}function ea(e,i,r,c){$n=ts=null,$c(i),Vs=null,Va=0;var f=i.return;try{if(Uv(e,f,i,r,Ct)){re=1,ko(e,hn(r,e.current)),xt=null;return}}catch(m){if(f!==null)throw xt=f,m;re=1,ko(e,hn(r,e.current)),xt=null;return}i.flags&32768?(Dt||c===1?e=!0:Qs||(Ct&536870912)!==0?e=!1:(Di=e=!0,(c===2||c===9||c===3||c===6)&&(c=Ze.current,c!==null&&c.tag===13&&(c.flags|=16384))),fg(i,e)):Yo(i)}function Yo(e){var i=e;do{if((i.flags&32768)!==0){fg(i,Di);return}e=i.return;var r=jv(i.alternate,i,si);if(r!==null){xt=r;return}if(i=i.sibling,i!==null){xt=i;return}xt=i=e}while(i!==null);re===0&&(re=5)}function fg(e,i){do{var r=Gv(e.alternate,e);if(r!==null){r.flags&=32767,xt=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(e=e.sibling,e!==null)){xt=e;return}xt=e=r}while(e!==null);re=6,xt=null}function pg(e,i,r,c,f,m,v,x,R){e.cancelPendingCommit=null;do $o();while(me!==0);if((Pt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Sc,Db(e,r,m,v,x,R),e===Vt&&(xt=Vt=null,Ct=0),Js=i,Ni=e,ai=r,Mu=m,Du=f,ig=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,e0(En,function(){return vg(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=k.T,k.T=null,f=j.p,j.p=2,v=Pt,Pt|=4;try{Vv(e,i,r)}finally{Pt=v,j.p=f,k.T=c}}me=1,gg(),mg(),yg()}}function gg(){if(me===1){me=0;var e=Ni,i=Js,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=k.T,k.T=null;var c=j.p;j.p=2;var f=Pt;Pt|=4;try{Kp(i,e);var m=qu,v=tf(e.containerInfo),x=m.focusedElem,R=m.selectionRange;if(v!==x&&x&&x.ownerDocument&&Jd(x.ownerDocument.documentElement,x)){if(R!==null&&mc(x)){var U=R.start,X=R.end;if(X===void 0&&(X=U),"selectionStart"in x)x.selectionStart=U,x.selectionEnd=Math.min(X,x.value.length);else{var K=x.ownerDocument||document,H=K&&K.defaultView||window;if(H.getSelection){var G=H.getSelection(),it=x.textContent.length,pt=Math.min(R.start,it),jt=R.end===void 0?pt:Math.min(R.end,it);!G.extend&&pt>jt&&(v=jt,jt=pt,pt=v);var z=Zd(x,pt),L=Zd(x,jt);if(z&&L&&(G.rangeCount!==1||G.anchorNode!==z.node||G.anchorOffset!==z.offset||G.focusNode!==L.node||G.focusOffset!==L.offset)){var F=K.createRange();F.setStart(z.node,z.offset),G.removeAllRanges(),pt>jt?(G.addRange(F),G.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),G.addRange(F))}}}}for(K=[],G=x;G=G.parentNode;)G.nodeType===1&&K.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<K.length;x++){var Y=K[x];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}rl=!!Vu,qu=Vu=null}finally{Pt=f,j.p=c,k.T=r}}e.current=i,me=2}}function mg(){if(me===2){me=0;var e=Ni,i=Js,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=k.T,k.T=null;var c=j.p;j.p=2;var f=Pt;Pt|=4;try{Vp(e,i.alternate,i)}finally{Pt=f,j.p=c,k.T=r}}me=3}}function yg(){if(me===4||me===3){me=0,Yl();var e=Ni,i=Js,r=ai,c=ig;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?me=5:(me=0,Js=Ni=null,bg(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Oi=null),Ql(r),i=i.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(Ta,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=k.T,f=j.p,j.p=2,k.T=null;try{for(var m=e.onRecoverableError,v=0;v<c.length;v++){var x=c[v];m(x.value,{componentStack:x.stack})}}finally{k.T=i,j.p=f}}(ai&3)!==0&&$o(),On(e),f=e.pendingLanes,(r&261930)!==0&&(f&42)!==0?e===Lu?or++:(or=0,Lu=e):or=0,lr(0)}}function bg(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,ja(i)))}function $o(){return gg(),mg(),yg(),vg()}function vg(){if(me!==5)return!1;var e=Ni,i=Mu;Mu=0;var r=Ql(ai),c=k.T,f=j.p;try{j.p=32>r?32:r,k.T=null,r=Du,Du=null;var m=Ni,v=ai;if(me=0,Js=Ni=null,ai=0,(Pt&6)!==0)throw Error(s(331));var x=Pt;if(Pt|=4,tg(m.current),Qp(m,m.current,v,r),Pt=x,lr(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(Ta,m)}catch{}return!0}finally{j.p=f,k.T=c,bg(e,i)}}function Ag(e,i,r){i=hn(r,i),i=cu(e.stateNode,i,2),e=Ti(e,i,2),e!==null&&(Ra(e,2),On(e))}function Ut(e,i,r){if(e.tag===3)Ag(e,e,r);else for(;i!==null;){if(i.tag===3){Ag(i,e,r);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Oi===null||!Oi.has(c))){e=hn(r,e),r=Sp(2),c=Ti(i,r,2),c!==null&&(Ep(r,c,i,e),Ra(c,2),On(c));break}}i=i.return}}function ku(e,i,r){var c=e.pingCache;if(c===null){c=e.pingCache=new Yv;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(r)||(Tu=!0,f.add(r),e=Zv.bind(null,e,i,r),i.then(e,e))}function Zv(e,i,r){var c=e.pingCache;c!==null&&c.delete(i),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Vt===e&&(Ct&r)===r&&(re===4||re===3&&(Ct&62914560)===Ct&&300>Oe()-jo?(Pt&2)===0&&ta(e,0):Cu|=r,Zs===Ct&&(Zs=0)),On(e)}function Sg(e,i){i===0&&(i=pd()),e=Qi(e,i),e!==null&&(Ra(e,i),On(e))}function Jv(e){var i=e.memoizedState,r=0;i!==null&&(r=i.retryLane),Sg(e,r)}function t0(e,i){var r=0;switch(e.tag){case 31:case 13:var c=e.stateNode,f=e.memoizedState;f!==null&&(r=f.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),Sg(e,r)}function e0(e,i){return xa(e,i)}var Ko=null,na=null,Bu=!1,Wo=!1,Pu=!1,Bi=0;function On(e){e!==na&&e.next===null&&(na===null?Ko=na=e:na=na.next=e),Wo=!0,Bu||(Bu=!0,i0())}function lr(e,i){if(!Pu&&Wo){Pu=!0;do for(var r=!1,c=Ko;c!==null;){if(e!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,x=c.pingedLanes;m=(1<<31-Ke(42|e)+1)-1,m&=f&~(v&~x),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,xg(c,m))}else m=Ct,m=Jr(c,c===Vt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Ca(c,m)||(r=!0,xg(c,m));c=c.next}while(r);Pu=!1}}function n0(){Eg()}function Eg(){Wo=Bu=!1;var e=0;Bi!==0&&f0()&&(e=Bi);for(var i=Oe(),r=null,c=Ko;c!==null;){var f=c.next,m=wg(c,i);m===0?(c.next=null,r===null?Ko=f:r.next=f,f===null&&(na=r)):(r=c,(e!==0||(m&3)!==0)&&(Wo=!0)),c=f}me!==0&&me!==5||lr(e),Bi!==0&&(Bi=0)}function wg(e,i){for(var r=e.suspendedLanes,c=e.pingedLanes,f=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var v=31-Ke(m),x=1<<v,R=f[v];R===-1?((x&r)===0||(x&c)!==0)&&(f[v]=Mb(x,i)):R<=i&&(e.expiredLanes|=x),m&=~x}if(i=Vt,r=Ct,r=Jr(e,e===i?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,r===0||e===i&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&mi(c),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Ca(e,r)){if(i=r&-r,i===e.callbackPriority)return i;switch(c!==null&&mi(c),Ql(r)){case 2:case 8:r=Sn;break;case 32:r=En;break;case 268435456:r=Es;break;default:r=En}return c=_g.bind(null,e),r=xa(r,c),e.callbackPriority=i,e.callbackNode=r,i}return c!==null&&c!==null&&mi(c),e.callbackPriority=2,e.callbackNode=null,2}function _g(e,i){if(me!==0&&me!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if($o()&&e.callbackNode!==r)return null;var c=Ct;return c=Jr(e,e===Vt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(ag(e,c,i),wg(e,Oe()),e.callbackNode!=null&&e.callbackNode===r?_g.bind(null,e):null)}function xg(e,i){if($o())return null;ag(e,i,!0)}function i0(){g0(function(){(Pt&6)!==0?xa(Kr,n0):Eg()})}function zu(){if(Bi===0){var e=Is;e===0&&(e=Wr,Wr<<=1,(Wr&261888)===0&&(Wr=256)),Bi=e}return Bi}function Tg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:io(""+e)}function Cg(e,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,e.id&&r.setAttribute("form",e.id),i.parentNode.insertBefore(r,i),e=new FormData(e),r.parentNode.removeChild(r),e}function s0(e,i,r,c,f){if(i==="submit"&&r&&r.stateNode===f){var m=Tg((f[ze]||null).action),v=c.submitter;v&&(i=(i=v[ze]||null)?Tg(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var x=new oo("action","action",null,c,f);e.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Bi!==0){var R=v?Cg(f,v):new FormData(f);iu(r,{pending:!0,data:R,method:f.method,action:m},null,R)}}else typeof m=="function"&&(x.preventDefault(),R=v?Cg(f,v):new FormData(f),iu(r,{pending:!0,data:R,method:f.method,action:m},m,R))},currentTarget:f}]})}}for(var Fu=0;Fu<Ac.length;Fu++){var Uu=Ac[Fu],a0=Uu.toLowerCase(),r0=Uu[0].toUpperCase()+Uu.slice(1);wn(a0,"on"+r0)}wn(sf,"onAnimationEnd"),wn(af,"onAnimationIteration"),wn(rf,"onAnimationStart"),wn("dblclick","onDoubleClick"),wn("focusin","onFocus"),wn("focusout","onBlur"),wn(Ev,"onTransitionRun"),wn(wv,"onTransitionStart"),wn(_v,"onTransitionCancel"),wn(of,"onTransitionEnd"),Cs("onMouseEnter",["mouseout","mouseover"]),Cs("onMouseLeave",["mouseout","mouseover"]),Cs("onPointerEnter",["pointerout","pointerover"]),Cs("onPointerLeave",["pointerout","pointerover"]),Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cr));function Rg(e,i){i=(i&4)!==0;for(var r=0;r<e.length;r++){var c=e[r],f=c.event;c=c.listeners;t:{var m=void 0;if(i)for(var v=c.length-1;0<=v;v--){var x=c[v],R=x.instance,U=x.currentTarget;if(x=x.listener,R!==m&&f.isPropagationStopped())break t;m=x,f.currentTarget=U;try{m(f)}catch(X){uo(X)}f.currentTarget=null,m=R}else for(v=0;v<c.length;v++){if(x=c[v],R=x.instance,U=x.currentTarget,x=x.listener,R!==m&&f.isPropagationStopped())break t;m=x,f.currentTarget=U;try{m(f)}catch(X){uo(X)}f.currentTarget=null,m=R}}}}function Tt(e,i){var r=i[Zl];r===void 0&&(r=i[Zl]=new Set);var c=e+"__bubble";r.has(c)||(Mg(i,e,2,!1),r.add(c))}function Hu(e,i,r){var c=0;i&&(c|=4),Mg(r,e,c,i)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function Iu(e){if(!e[Qo]){e[Qo]=!0,Sd.forEach(function(r){r!=="selectionchange"&&(o0.has(r)||Hu(r,!1,e),Hu(r,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Qo]||(i[Qo]=!0,Hu("selectionchange",!1,i))}}function Mg(e,i,r,c){switch(sm(i)){case 2:var f=B0;break;case 8:f=P0;break;default:f=nh}r=f.bind(null,i,r,e),f=void 0,!oc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?e.addEventListener(i,r,{capture:!0,passive:f}):e.addEventListener(i,r,!0):f!==void 0?e.addEventListener(i,r,{passive:f}):e.addEventListener(i,r,!1)}function ju(e,i,r,c,f){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var x=c.stateNode.containerInfo;if(x===f)break;if(v===4)for(v=c.return;v!==null;){var R=v.tag;if((R===3||R===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;x!==null;){if(v=_s(x),v===null)return;if(R=v.tag,R===5||R===6||R===26||R===27){c=m=v;continue t}x=x.parentNode}}c=c.return}Nd(function(){var U=m,X=ac(r),K=[];t:{var H=lf.get(e);if(H!==void 0){var G=oo,it=e;switch(e){case"keypress":if(ao(r)===0)break t;case"keydown":case"keyup":G=tv;break;case"focusin":it="focus",G=hc;break;case"focusout":it="blur",G=hc;break;case"beforeblur":case"afterblur":G=hc;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Pd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=jb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=iv;break;case sf:case af:case rf:G=qb;break;case of:G=av;break;case"scroll":case"scrollend":G=Hb;break;case"wheel":G=ov;break;case"copy":case"cut":case"paste":G=Yb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Fd;break;case"toggle":case"beforetoggle":G=cv}var pt=(i&4)!==0,jt=!pt&&(e==="scroll"||e==="scrollend"),z=pt?H!==null?H+"Capture":null:H;pt=[];for(var L=U,F;L!==null;){var Y=L;if(F=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||F===null||z===null||(Y=La(L,z),Y!=null&&pt.push(ur(L,Y,F))),jt)break;L=L.return}0<pt.length&&(H=new G(H,it,null,r,X),K.push({event:H,listeners:pt}))}}if((i&7)===0){t:{if(H=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",H&&r!==sc&&(it=r.relatedTarget||r.fromElement)&&(_s(it)||it[ws]))break t;if((G||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,G?(it=r.relatedTarget||r.toElement,G=U,it=it?_s(it):null,it!==null&&(jt=o(it),pt=it.tag,it!==jt||pt!==5&&pt!==27&&pt!==6)&&(it=null)):(G=null,it=U),G!==it)){if(pt=Pd,Y="onMouseLeave",z="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(pt=Fd,Y="onPointerLeave",z="onPointerEnter",L="pointer"),jt=G==null?H:Da(G),F=it==null?H:Da(it),H=new pt(Y,L+"leave",G,r,X),H.target=jt,H.relatedTarget=F,Y=null,_s(X)===U&&(pt=new pt(z,L+"enter",it,r,X),pt.target=F,pt.relatedTarget=jt,Y=pt),jt=Y,G&&it)e:{for(pt=l0,z=G,L=it,F=0,Y=z;Y;Y=pt(Y))F++;Y=0;for(var lt=L;lt;lt=pt(lt))Y++;for(;0<F-Y;)z=pt(z),F--;for(;0<Y-F;)L=pt(L),Y--;for(;F--;){if(z===L||L!==null&&z===L.alternate){pt=z;break e}z=pt(z),L=pt(L)}pt=null}else pt=null;G!==null&&Dg(K,H,G,pt,!1),it!==null&&jt!==null&&Dg(K,jt,it,pt,!0)}}t:{if(H=U?Da(U):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var kt=Xd;else if(Vd(H))if(Yd)kt=vv;else{kt=yv;var st=mv}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?U&&ic(U.elementType)&&(kt=Xd):kt=bv;if(kt&&(kt=kt(e,U))){qd(K,kt,r,X);break t}st&&st(e,H,U),e==="focusout"&&U&&H.type==="number"&&U.memoizedProps.value!=null&&nc(H,"number",H.value)}switch(st=U?Da(U):window,e){case"focusin":(Vd(st)||st.contentEditable==="true")&&(Ns=st,yc=U,Ua=null);break;case"focusout":Ua=yc=Ns=null;break;case"mousedown":bc=!0;break;case"contextmenu":case"mouseup":case"dragend":bc=!1,ef(K,r,X);break;case"selectionchange":if(Sv)break;case"keydown":case"keyup":ef(K,r,X)}var Et;if(fc)t:{switch(e){case"compositionstart":var Rt="onCompositionStart";break t;case"compositionend":Rt="onCompositionEnd";break t;case"compositionupdate":Rt="onCompositionUpdate";break t}Rt=void 0}else Os?jd(e,r)&&(Rt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Rt="onCompositionStart");Rt&&(Ud&&r.locale!=="ko"&&(Os||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&Os&&(Et=kd()):(vi=X,lc="value"in vi?vi.value:vi.textContent,Os=!0)),st=Zo(U,Rt),0<st.length&&(Rt=new zd(Rt,e,null,r,X),K.push({event:Rt,listeners:st}),Et?Rt.data=Et:(Et=Gd(r),Et!==null&&(Rt.data=Et)))),(Et=hv?dv(e,r):fv(e,r))&&(Rt=Zo(U,"onBeforeInput"),0<Rt.length&&(st=new zd("onBeforeInput","beforeinput",null,r,X),K.push({event:st,listeners:Rt}),st.data=Et)),s0(K,e,U,r,X)}Rg(K,i)})}function ur(e,i,r){return{instance:e,listener:i,currentTarget:r}}function Zo(e,i){for(var r=i+"Capture",c=[];e!==null;){var f=e,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=La(e,r),f!=null&&c.unshift(ur(e,f,m)),f=La(e,i),f!=null&&c.push(ur(e,f,m))),e.tag===3)return c;e=e.return}return[]}function l0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dg(e,i,r,c,f){for(var m=i._reactName,v=[];r!==null&&r!==c;){var x=r,R=x.alternate,U=x.stateNode;if(x=x.tag,R!==null&&R===c)break;x!==5&&x!==26&&x!==27||U===null||(R=U,f?(U=La(r,m),U!=null&&v.unshift(ur(r,U,R))):f||(U=La(r,m),U!=null&&v.push(ur(r,U,R)))),r=r.return}v.length!==0&&e.push({event:i,listeners:v})}var c0=/\r\n?/g,u0=/\u0000|\uFFFD/g;function Lg(e){return(typeof e=="string"?e:""+e).replace(c0,`
`).replace(u0,"")}function Og(e,i){return i=Lg(i),Lg(e)===i}function It(e,i,r,c,f,m){switch(r){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Ms(e,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Ms(e,""+c);break;case"className":eo(e,"class",c);break;case"tabIndex":eo(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":eo(e,r,c);break;case"style":Ld(e,c,m);break;case"data":if(i!=="object"){eo(e,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||r!=="href")){e.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(r);break}c=io(""+c),e.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(i!=="input"&&It(e,i,"name",f.name,f,null),It(e,i,"formEncType",f.formEncType,f,null),It(e,i,"formMethod",f.formMethod,f,null),It(e,i,"formTarget",f.formTarget,f,null)):(It(e,i,"encType",f.encType,f,null),It(e,i,"method",f.method,f,null),It(e,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(r);break}c=io(""+c),e.setAttribute(r,c);break;case"onClick":c!=null&&(e.onclick=Vn);break;case"onScroll":c!=null&&Tt("scroll",e);break;case"onScrollEnd":c!=null&&Tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}r=io(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,""+c):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":c===!0?e.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(r,c):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(r,c):e.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(r):e.setAttribute(r,c);break;case"popover":Tt("beforetoggle",e),Tt("toggle",e),to(e,"popover",c);break;case"xlinkActuate":Gn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Gn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Gn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Gn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Gn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Gn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":to(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Fb.get(r)||r,to(e,r,c))}}function Gu(e,i,r,c,f,m){switch(r){case"style":Ld(e,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof c=="string"?Ms(e,c):(typeof c=="number"||typeof c=="bigint")&&Ms(e,""+c);break;case"onScroll":c!=null&&Tt("scroll",e);break;case"onScrollEnd":c!=null&&Tt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ed.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),i=r.slice(2,f?r.length-7:void 0),m=e[ze]||null,m=m!=null?m[r]:null,typeof m=="function"&&e.removeEventListener(i,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(i,c,f);break t}r in e?e[r]=c:c===!0?e.setAttribute(r,""):to(e,r,c)}}}function Te(e,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",e),Tt("load",e);var c=!1,f=!1,m;for(m in r)if(r.hasOwnProperty(m)){var v=r[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:It(e,i,m,v,r,null)}}f&&It(e,i,"srcSet",r.srcSet,r,null),c&&It(e,i,"src",r.src,r,null);return;case"input":Tt("invalid",e);var x=m=v=f=null,R=null,U=null;for(c in r)if(r.hasOwnProperty(c)){var X=r[c];if(X!=null)switch(c){case"name":f=X;break;case"type":v=X;break;case"checked":R=X;break;case"defaultChecked":U=X;break;case"value":m=X;break;case"defaultValue":x=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:It(e,i,c,X,r,null)}}Cd(e,m,x,R,U,v,f,!1);return;case"select":Tt("invalid",e),c=v=m=null;for(f in r)if(r.hasOwnProperty(f)&&(x=r[f],x!=null))switch(f){case"value":m=x;break;case"defaultValue":v=x;break;case"multiple":c=x;default:It(e,i,f,x,r,null)}i=m,r=v,e.multiple=!!c,i!=null?Rs(e,!!c,i,!1):r!=null&&Rs(e,!!c,r,!0);return;case"textarea":Tt("invalid",e),m=f=c=null;for(v in r)if(r.hasOwnProperty(v)&&(x=r[v],x!=null))switch(v){case"value":c=x;break;case"defaultValue":f=x;break;case"children":m=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:It(e,i,v,x,r,null)}Md(e,c,f,m);return;case"option":for(R in r)if(r.hasOwnProperty(R)&&(c=r[R],c!=null))switch(R){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:It(e,i,R,c,r,null)}return;case"dialog":Tt("beforetoggle",e),Tt("toggle",e),Tt("cancel",e),Tt("close",e);break;case"iframe":case"object":Tt("load",e);break;case"video":case"audio":for(c=0;c<cr.length;c++)Tt(cr[c],e);break;case"image":Tt("error",e),Tt("load",e);break;case"details":Tt("toggle",e);break;case"embed":case"source":case"link":Tt("error",e),Tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in r)if(r.hasOwnProperty(U)&&(c=r[U],c!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:It(e,i,U,c,r,null)}return;default:if(ic(i)){for(X in r)r.hasOwnProperty(X)&&(c=r[X],c!==void 0&&Gu(e,i,X,c,r,void 0));return}}for(x in r)r.hasOwnProperty(x)&&(c=r[x],c!=null&&It(e,i,x,c,r,null))}function h0(e,i,r,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,x=null,R=null,U=null,X=null;for(G in r){var K=r[G];if(r.hasOwnProperty(G)&&K!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":R=K;default:c.hasOwnProperty(G)||It(e,i,G,null,c,K)}}for(var H in c){var G=c[H];if(K=r[H],c.hasOwnProperty(H)&&(G!=null||K!=null))switch(H){case"type":m=G;break;case"name":f=G;break;case"checked":U=G;break;case"defaultChecked":X=G;break;case"value":v=G;break;case"defaultValue":x=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:G!==K&&It(e,i,H,G,c,K)}}ec(e,v,x,R,U,X,m,f);return;case"select":G=v=x=H=null;for(m in r)if(R=r[m],r.hasOwnProperty(m)&&R!=null)switch(m){case"value":break;case"multiple":G=R;default:c.hasOwnProperty(m)||It(e,i,m,null,c,R)}for(f in c)if(m=c[f],R=r[f],c.hasOwnProperty(f)&&(m!=null||R!=null))switch(f){case"value":H=m;break;case"defaultValue":x=m;break;case"multiple":v=m;default:m!==R&&It(e,i,f,m,c,R)}i=x,r=v,c=G,H!=null?Rs(e,!!r,H,!1):!!c!=!!r&&(i!=null?Rs(e,!!r,i,!0):Rs(e,!!r,r?[]:"",!1));return;case"textarea":G=H=null;for(x in r)if(f=r[x],r.hasOwnProperty(x)&&f!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:It(e,i,x,null,c,f)}for(v in c)if(f=c[v],m=r[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":H=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&It(e,i,v,f,c,m)}Rd(e,H,G);return;case"option":for(var it in r)if(H=r[it],r.hasOwnProperty(it)&&H!=null&&!c.hasOwnProperty(it))switch(it){case"selected":e.selected=!1;break;default:It(e,i,it,null,c,H)}for(R in c)if(H=c[R],G=r[R],c.hasOwnProperty(R)&&H!==G&&(H!=null||G!=null))switch(R){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:It(e,i,R,H,c,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in r)H=r[pt],r.hasOwnProperty(pt)&&H!=null&&!c.hasOwnProperty(pt)&&It(e,i,pt,null,c,H);for(U in c)if(H=c[U],G=r[U],c.hasOwnProperty(U)&&H!==G&&(H!=null||G!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:It(e,i,U,H,c,G)}return;default:if(ic(i)){for(var jt in r)H=r[jt],r.hasOwnProperty(jt)&&H!==void 0&&!c.hasOwnProperty(jt)&&Gu(e,i,jt,void 0,c,H);for(X in c)H=c[X],G=r[X],!c.hasOwnProperty(X)||H===G||H===void 0&&G===void 0||Gu(e,i,X,H,c,G);return}}for(var z in r)H=r[z],r.hasOwnProperty(z)&&H!=null&&!c.hasOwnProperty(z)&&It(e,i,z,null,c,H);for(K in c)H=c[K],G=r[K],!c.hasOwnProperty(K)||H===G||H==null&&G==null||It(e,i,K,H,c,G)}function Ng(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function d0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var f=r[c],m=f.transferSize,v=f.initiatorType,x=f.duration;if(m&&x&&Ng(v)){for(v=0,x=f.responseEnd,c+=1;c<r.length;c++){var R=r[c],U=R.startTime;if(U>x)break;var X=R.transferSize,K=R.initiatorType;X&&Ng(K)&&(R=R.responseEnd,v+=X*(R<x?1:(x-U)/(R-U)))}if(--c,i+=8*(m+v)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Vu=null,qu=null;function Jo(e){return e.nodeType===9?e:e.ownerDocument}function kg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bg(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Xu(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Yu=null;function f0(){var e=window.event;return e&&e.type==="popstate"?e===Yu?!1:(Yu=e,!0):(Yu=null,!1)}var Pg=typeof setTimeout=="function"?setTimeout:void 0,p0=typeof clearTimeout=="function"?clearTimeout:void 0,zg=typeof Promise=="function"?Promise:void 0,g0=typeof queueMicrotask=="function"?queueMicrotask:typeof zg<"u"?function(e){return zg.resolve(null).then(e).catch(m0)}:Pg;function m0(e){setTimeout(function(){throw e})}function Pi(e){return e==="head"}function Fg(e,i){var r=i,c=0;do{var f=r.nextSibling;if(e.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(c===0){e.removeChild(f),ra(i);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")hr(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,hr(r);for(var m=r.firstChild;m;){var v=m.nextSibling,x=m.nodeName;m[Ma]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=v}}else r==="body"&&hr(e.ownerDocument.body);r=f}while(r);ra(i)}function Ug(e,i){var r=e;e=0;do{var c=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=c}while(r)}function $u(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":$u(r),Jl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function y0(e,i,r,c){for(;e.nodeType===1;){var f=r;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[Ma])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=mn(e.nextSibling),e===null)break}return null}function b0(e,i,r){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=mn(e.nextSibling),e===null))return null;return e}function Hg(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=mn(e.nextSibling),e===null))return null;return e}function Ku(e){return e.data==="$?"||e.data==="$~"}function Wu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function v0(e,i){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||r.readyState!=="loading")i();else{var c=function(){i(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function mn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var Qu=null;function Ig(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(i===0)return mn(e.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}e=e.nextSibling}return null}function jg(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return e;i--}else r!=="/$"&&r!=="/&"||i++}e=e.previousSibling}return null}function Gg(e,i,r){switch(i=Jo(r),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function hr(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Jl(e)}var yn=new Map,Vg=new Set;function tl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ri=j.d;j.d={f:A0,r:S0,D:E0,C:w0,L:_0,m:x0,X:C0,S:T0,M:R0};function A0(){var e=ri.f(),i=qo();return e||i}function S0(e){var i=xs(e);i!==null&&i.tag===5&&i.type==="form"?op(i):ri.r(e)}var ia=typeof document>"u"?null:document;function qg(e,i,r){var c=ia;if(c&&typeof i=="string"&&i){var f=cn(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),Vg.has(f)||(Vg.add(f),e={rel:e,crossOrigin:r,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),Te(i,"link",e),ye(i),c.head.appendChild(i)))}}function E0(e){ri.D(e),qg("dns-prefetch",e,null)}function w0(e,i){ri.C(e,i),qg("preconnect",e,i)}function _0(e,i,r){ri.L(e,i,r);var c=ia;if(c&&e&&i){var f='link[rel="preload"][as="'+cn(i)+'"]';i==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+cn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+cn(r.imageSizes)+'"]')):f+='[href="'+cn(e)+'"]';var m=f;switch(i){case"style":m=sa(e);break;case"script":m=aa(e)}yn.has(m)||(e=y({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:e,as:i},r),yn.set(m,e),c.querySelector(f)!==null||i==="style"&&c.querySelector(dr(m))||i==="script"&&c.querySelector(fr(m))||(i=c.createElement("link"),Te(i,"link",e),ye(i),c.head.appendChild(i)))}}function x0(e,i){ri.m(e,i);var r=ia;if(r&&e){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+cn(c)+'"][href="'+cn(e)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=aa(e)}if(!yn.has(m)&&(e=y({rel:"modulepreload",href:e},i),yn.set(m,e),r.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(fr(m)))return}c=r.createElement("link"),Te(c,"link",e),ye(c),r.head.appendChild(c)}}}function T0(e,i,r){ri.S(e,i,r);var c=ia;if(c&&e){var f=Ts(c).hoistableStyles,m=sa(e);i=i||"default";var v=f.get(m);if(!v){var x={loading:0,preload:null};if(v=c.querySelector(dr(m)))x.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":i},r),(r=yn.get(m))&&Zu(e,r);var R=v=c.createElement("link");ye(R),Te(R,"link",e),R._p=new Promise(function(U,X){R.onload=U,R.onerror=X}),R.addEventListener("load",function(){x.loading|=1}),R.addEventListener("error",function(){x.loading|=2}),x.loading|=4,el(v,i,c)}v={type:"stylesheet",instance:v,count:1,state:x},f.set(m,v)}}}function C0(e,i){ri.X(e,i);var r=ia;if(r&&e){var c=Ts(r).hoistableScripts,f=aa(e),m=c.get(f);m||(m=r.querySelector(fr(f)),m||(e=y({src:e,async:!0},i),(i=yn.get(f))&&Ju(e,i),m=r.createElement("script"),ye(m),Te(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function R0(e,i){ri.M(e,i);var r=ia;if(r&&e){var c=Ts(r).hoistableScripts,f=aa(e),m=c.get(f);m||(m=r.querySelector(fr(f)),m||(e=y({src:e,async:!0,type:"module"},i),(i=yn.get(f))&&Ju(e,i),m=r.createElement("script"),ye(m),Te(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Xg(e,i,r,c){var f=(f=ht.current)?tl(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=sa(r.href),r=Ts(f).hoistableStyles,c=r.get(i),c||(c={type:"style",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=sa(r.href);var m=Ts(f).hoistableStyles,v=m.get(e);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,v),(m=f.querySelector(dr(e)))&&!m._p&&(v.instance=m,v.state.loading=5),yn.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},yn.set(e,r),m||M0(f,e,r,v.state))),i&&c===null)throw Error(s(528,""));return v}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=aa(r),r=Ts(f).hoistableScripts,c=r.get(i),c||(c={type:"script",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function sa(e){return'href="'+cn(e)+'"'}function dr(e){return'link[rel="stylesheet"]['+e+"]"}function Yg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function M0(e,i,r,c){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=e.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Te(i,"link",r),ye(i),e.head.appendChild(i))}function aa(e){return'[src="'+cn(e)+'"]'}function fr(e){return"script[async]"+e}function $g(e,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var c=e.querySelector('style[data-href~="'+cn(r.href)+'"]');if(c)return i.instance=c,ye(c),c;var f=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),ye(c),Te(c,"style",f),el(c,r.precedence,e),i.instance=c;case"stylesheet":f=sa(r.href);var m=e.querySelector(dr(f));if(m)return i.state.loading|=4,i.instance=m,ye(m),m;c=Yg(r),(f=yn.get(f))&&Zu(c,f),m=(e.ownerDocument||e).createElement("link"),ye(m);var v=m;return v._p=new Promise(function(x,R){v.onload=x,v.onerror=R}),Te(m,"link",c),i.state.loading|=4,el(m,r.precedence,e),i.instance=m;case"script":return m=aa(r.src),(f=e.querySelector(fr(m)))?(i.instance=f,ye(f),f):(c=r,(f=yn.get(m))&&(c=y({},r),Ju(c,f)),e=e.ownerDocument||e,f=e.createElement("script"),ye(f),Te(f,"link",c),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,el(c,r.precedence,e));return i.instance}function el(e,i,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var x=c[v];if(x.dataset.precedence===i)m=x;else if(m!==f)break}m?m.parentNode.insertBefore(e,m.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(e,i.firstChild))}function Zu(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Ju(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var nl=null;function Kg(e,i,r){if(nl===null){var c=new Map,f=nl=new Map;f.set(r,c)}else f=nl,c=f.get(r),c||(c=new Map,f.set(r,c));if(c.has(e))return c;for(c.set(e,null),r=r.getElementsByTagName(e),f=0;f<r.length;f++){var m=r[f];if(!(m[Ma]||m[Ee]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=e+v;var x=c.get(v);x?x.push(m):c.set(v,[m])}}return c}function Wg(e,i,r){e=e.ownerDocument||e,e.head.insertBefore(r,i==="title"?e.querySelector("head > title"):null)}function D0(e,i,r){if(r===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Qg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function L0(e,i,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=sa(c.href),m=i.querySelector(dr(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=il.bind(e),i.then(e,e)),r.state.loading|=4,r.instance=m,ye(m);return}m=i.ownerDocument||i,c=Yg(c),(f=yn.get(f))&&Zu(c,f),m=m.createElement("link"),ye(m);var v=m;v._p=new Promise(function(x,R){v.onload=x,v.onerror=R}),Te(m,"link",c),r.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=il.bind(e),i.addEventListener("load",r),i.addEventListener("error",r))}}var th=0;function O0(e,i){return e.stylesheets&&e.count===0&&al(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var c=setTimeout(function(){if(e.stylesheets&&al(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+i);0<e.imgBytes&&th===0&&(th=62500*d0());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&al(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>th?50:800)+i);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function il(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)al(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var sl=null;function al(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,sl=new Map,i.forEach(N0,e),sl=null,il.call(e))}function N0(e,i){if(!(i.state.loading&4)){var r=sl.get(e);if(r)var c=r.get(null);else{r=new Map,sl.set(e,r);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),c=v)}c&&r.set(null,c)}f=i.instance,v=f.getAttribute("data-precedence"),m=r.get(v)||c,m===c&&r.set(null,f),r.set(v,f),this.count++,c=il.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var pr={$$typeof:C,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function k0(e,i,r,c,f,m,v,x,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.hiddenUpdates=Kl(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Zg(e,i,r,c,f,m,v,x,R,U,X,K){return e=new k0(e,i,r,v,R,U,X,K,x),i=1,m===!0&&(i|=24),m=Qe(3,null,null,i),e.current=m,m.stateNode=e,i=Nc(),i.refCount++,e.pooledCache=i,i.refCount++,m.memoizedState={element:c,isDehydrated:r,cache:i},zc(m),e}function Jg(e){return e?(e=Ps,e):Ps}function tm(e,i,r,c,f,m){f=Jg(f),c.context===null?c.context=f:c.pendingContext=f,c=xi(i),c.payload={element:r},m=m===void 0?null:m,m!==null&&(c.callback=m),r=Ti(e,c,i),r!==null&&(Ge(r,e,i),Xa(r,e,i))}function em(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<i?r:i}}function eh(e,i){em(e,i),(e=e.alternate)&&em(e,i)}function nm(e){if(e.tag===13||e.tag===31){var i=Qi(e,67108864);i!==null&&Ge(i,e,67108864),eh(e,67108864)}}function im(e){if(e.tag===13||e.tag===31){var i=nn();i=Wl(i);var r=Qi(e,i);r!==null&&Ge(r,e,i),eh(e,i)}}var rl=!0;function B0(e,i,r,c){var f=k.T;k.T=null;var m=j.p;try{j.p=2,nh(e,i,r,c)}finally{j.p=m,k.T=f}}function P0(e,i,r,c){var f=k.T;k.T=null;var m=j.p;try{j.p=8,nh(e,i,r,c)}finally{j.p=m,k.T=f}}function nh(e,i,r,c){if(rl){var f=ih(c);if(f===null)ju(e,i,c,ol,r),am(e,c);else if(F0(f,e,i,r,c))c.stopPropagation();else if(am(e,c),i&4&&-1<z0.indexOf(e)){for(;f!==null;){var m=xs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Xi(m.pendingLanes);if(v!==0){var x=m;for(x.pendingLanes|=2,x.entangledLanes|=2;v;){var R=1<<31-Ke(v);x.entanglements[1]|=R,v&=~R}On(m),(Pt&6)===0&&(Go=Oe()+500,lr(0))}}break;case 31:case 13:x=Qi(m,2),x!==null&&Ge(x,m,2),qo(),eh(m,2)}if(m=ih(c),m===null&&ju(e,i,c,ol,r),m===f)break;f=m}f!==null&&c.stopPropagation()}else ju(e,i,c,null,r)}}function ih(e){return e=ac(e),sh(e)}var ol=null;function sh(e){if(ol=null,e=_s(e),e!==null){var i=o(e);if(i===null)e=null;else{var r=i.tag;if(r===13){if(e=l(i),e!==null)return e;e=null}else if(r===31){if(e=u(i),e!==null)return e;e=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return ol=e,null}function sm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($l()){case Kr:return 2;case Sn:return 8;case En:case Rn:return 32;case Es:return 268435456;default:return 32}default:return 32}}var ah=!1,zi=null,Fi=null,Ui=null,gr=new Map,mr=new Map,Hi=[],z0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function am(e,i){switch(e){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":gr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":mr.delete(i.pointerId)}}function yr(e,i,r,c,f,m){return e===null||e.nativeEvent!==m?(e={blockedOn:i,domEventName:r,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},i!==null&&(i=xs(i),i!==null&&nm(i)),e):(e.eventSystemFlags|=c,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function F0(e,i,r,c,f){switch(i){case"focusin":return zi=yr(zi,e,i,r,c,f),!0;case"dragenter":return Fi=yr(Fi,e,i,r,c,f),!0;case"mouseover":return Ui=yr(Ui,e,i,r,c,f),!0;case"pointerover":var m=f.pointerId;return gr.set(m,yr(gr.get(m)||null,e,i,r,c,f)),!0;case"gotpointercapture":return m=f.pointerId,mr.set(m,yr(mr.get(m)||null,e,i,r,c,f)),!0}return!1}function rm(e){var i=_s(e.target);if(i!==null){var r=o(i);if(r!==null){if(i=r.tag,i===13){if(i=l(r),i!==null){e.blockedOn=i,vd(e.priority,function(){im(r)});return}}else if(i===31){if(i=u(r),i!==null){e.blockedOn=i,vd(e.priority,function(){im(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ll(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var r=ih(e.nativeEvent);if(r===null){r=e.nativeEvent;var c=new r.constructor(r.type,r);sc=c,r.target.dispatchEvent(c),sc=null}else return i=xs(r),i!==null&&nm(i),e.blockedOn=r,!1;i.shift()}return!0}function om(e,i,r){ll(e)&&r.delete(i)}function U0(){ah=!1,zi!==null&&ll(zi)&&(zi=null),Fi!==null&&ll(Fi)&&(Fi=null),Ui!==null&&ll(Ui)&&(Ui=null),gr.forEach(om),mr.forEach(om)}function cl(e,i){e.blockedOn===i&&(e.blockedOn=null,ah||(ah=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,U0)))}var ul=null;function lm(e){ul!==e&&(ul=e,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){ul===e&&(ul=null);for(var i=0;i<e.length;i+=3){var r=e[i],c=e[i+1],f=e[i+2];if(typeof c!="function"){if(sh(c||r)===null)continue;break}var m=xs(r);m!==null&&(e.splice(i,3),i-=3,iu(m,{pending:!0,data:f,method:r.method,action:c},c,f))}}))}function ra(e){function i(R){return cl(R,e)}zi!==null&&cl(zi,e),Fi!==null&&cl(Fi,e),Ui!==null&&cl(Ui,e),gr.forEach(i),mr.forEach(i);for(var r=0;r<Hi.length;r++){var c=Hi[r];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Hi.length&&(r=Hi[0],r.blockedOn===null);)rm(r),r.blockedOn===null&&Hi.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var f=r[c],m=r[c+1],v=f[ze]||null;if(typeof m=="function")v||lm(r);else if(v){var x=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[ze]||null)x=v.formAction;else if(sh(f)!==null)continue}else x=v.action;typeof x=="function"?r[c+1]=x:(r.splice(c,3),c-=3),lm(r)}}}function cm(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function rh(e){this._internalRoot=e}hl.prototype.render=rh.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var r=i.current,c=nn();tm(r,c,e,i,null,null)},hl.prototype.unmount=rh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;tm(e.current,2,null,e,null,null),qo(),i[ws]=null}};function hl(e){this._internalRoot=e}hl.prototype.unstable_scheduleHydration=function(e){if(e){var i=bd();e={blockedOn:null,target:e,priority:i};for(var r=0;r<Hi.length&&i!==0&&i<Hi[r].priority;r++);Hi.splice(r,0,e),r===0&&rm(e)}};var um=t.version;if(um!=="19.2.0")throw Error(s(527,um,"19.2.0"));j.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var H0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{Ta=dl.inject(H0),$e=dl}catch{}}return vr.createRoot=function(e,i){if(!a(e))throw Error(s(299));var r=!1,c="",f=yp,m=bp,v=vp;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=Zg(e,1,!1,null,null,r,c,null,f,m,v,cm),e[ws]=i.current,Iu(e),new rh(i)},vr.hydrateRoot=function(e,i,r){if(!a(e))throw Error(s(299));var c=!1,f="",m=yp,v=bp,x=vp,R=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError),r.formState!==void 0&&(R=r.formState)),i=Zg(e,1,!0,i,r??null,c,f,R,m,v,x,cm),i.context=Jg(null),r=i.current,c=nn(),c=Wl(c),f=xi(c),f.callback=null,Ti(r,f,c),r=c,i.current.lanes=r,Ra(i,r),On(i),e[ws]=i.current,Iu(e),new hl(i)},vr.version="19.2.0",vr}var Em;function Q0(){if(Em)return ch.exports;Em=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),ch.exports=W0(),ch.exports}var Z0=Q0(),N=Hh();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var wm="popstate";function J0(h={}){function t(s,a){let{pathname:o,search:l,hash:u}=s.location;return xh("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Dr(a)}return eA(t,n,null,h)}function ne(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function In(h,t){if(!h){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tA(){return Math.random().toString(36).substring(2,10)}function _m(h,t){return{usr:h.state,key:h.key,idx:t}}function xh(h,t,n=null,s){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof t=="string"?Sa(t):t,state:n,key:t&&t.key||s||tA()}}function Dr({pathname:h="/",search:t="",hash:n=""}){return t&&t!=="?"&&(h+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(h+=n.charAt(0)==="#"?n:"#"+n),h}function Sa(h){let t={};if(h){let n=h.indexOf("#");n>=0&&(t.hash=h.substring(n),h=h.substring(0,n));let s=h.indexOf("?");s>=0&&(t.search=h.substring(s),h=h.substring(0,s)),h&&(t.pathname=h)}return t}function eA(h,t,n,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,u="POP",d=null,p=g();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function g(){return(l.state||{idx:null}).idx}function y(){u="POP";let _=g(),w=_==null?null:_-p;p=_,d&&d({action:u,location:S.location,delta:w})}function b(_,w){u="PUSH";let T=xh(S.location,_,w);p=g()+1;let C=_m(T,p),O=S.createHref(T);try{l.pushState(C,"",O)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;a.location.assign(O)}o&&d&&d({action:u,location:S.location,delta:1})}function A(_,w){u="REPLACE";let T=xh(S.location,_,w);p=g();let C=_m(T,p),O=S.createHref(T);l.replaceState(C,"",O),o&&d&&d({action:u,location:S.location,delta:0})}function E(_){return nA(_)}let S={get action(){return u},get location(){return h(a,l)},listen(_){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(wm,y),d=_,()=>{a.removeEventListener(wm,y),d=null}},createHref(_){return t(a,_)},createURL:E,encodeLocation(_){let w=E(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:b,replace:A,go(_){return l.go(_)}};return S}function nA(h,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ne(n,"No window.location.(origin|href) available to create URL");let s=typeof h=="string"?h:Dr(h);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function uy(h,t,n="/"){return iA(h,t,n,!1)}function iA(h,t,n,s){let a=typeof t=="string"?Sa(t):t,o=ui(a.pathname||"/",n);if(o==null)return null;let l=hy(h);sA(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let p=gA(o);u=fA(l[d],p,s)}return u}function hy(h,t=[],n=[],s="",a=!1){let o=(l,u,d=a,p)=>{let g={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&d)return;ne(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let y=ci([s,g.relativePath]),b=n.concat(g);l.children&&l.children.length>0&&(ne(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),hy(l.children,t,b,y,d)),!(l.path==null&&!l.index)&&t.push({path:y,score:hA(y,l.index),routesMeta:b})};return h.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of dy(l.path))o(l,u,!0,d)}),t}function dy(h){let t=h.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=dy(s.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...l),u.map(d=>h.startsWith("/")&&d===""?"/":d)}function sA(h){h.sort((t,n)=>t.score!==n.score?n.score-t.score:dA(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var aA=/^:[\w-]+$/,rA=3,oA=2,lA=1,cA=10,uA=-2,xm=h=>h==="*";function hA(h,t){let n=h.split("/"),s=n.length;return n.some(xm)&&(s+=uA),t&&(s+=oA),n.filter(a=>!xm(a)).reduce((a,o)=>a+(aA.test(o)?rA:o===""?lA:cA),s)}function dA(h,t){return h.length===t.length&&h.slice(0,-1).every((s,a)=>s===t[a])?h[h.length-1]-t[t.length-1]:0}function fA(h,t,n=!1){let{routesMeta:s}=h,a={},o="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],p=u===s.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=Rl({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),b=d.route;if(!y&&p&&n&&!s[s.length-1].route.index&&(y=Rl({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),l.push({params:a,pathname:ci([o,y.pathname]),pathnameBase:vA(ci([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=ci([o,y.pathnameBase]))}return l}function Rl(h,t){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[n,s]=pA(h.path,h.caseSensitive,h.end),a=t.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((p,{paramName:g,isOptional:y},b)=>{if(g==="*"){let E=u[b]||"";l=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const A=u[b];return y&&!A?p[g]=void 0:p[g]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:h}}function pA(h,t=!1,n=!0){In(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let s=[],a="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return h.endsWith("*")?(s.push({paramName:"*"}),a+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":h!==""&&h!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function gA(h){try{return h.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return In(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),h}}function ui(h,t){if(t==="/")return h;if(!h.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=h.charAt(n);return s&&s!=="/"?null:h.slice(n)||"/"}function mA(h,t="/"){let{pathname:n,search:s="",hash:a=""}=typeof h=="string"?Sa(h):h;return{pathname:n?n.startsWith("/")?n:yA(n,t):t,search:AA(s),hash:SA(a)}}function yA(h,t){let n=t.replace(/\/+$/,"").split("/");return h.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function ph(h,t,n,s){return`Cannot include a '${h}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bA(h){return h.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function fy(h){let t=bA(h);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function py(h,t,n,s=!1){let a;typeof h=="string"?a=Sa(h):(a={...h},ne(!a.pathname||!a.pathname.includes("?"),ph("?","pathname","search",a)),ne(!a.pathname||!a.pathname.includes("#"),ph("#","pathname","hash",a)),ne(!a.search||!a.search.includes("#"),ph("#","search","hash",a)));let o=h===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=n;else{let y=t.length-1;if(!s&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}u=y>=0?t[y]:"/"}let d=mA(a,u),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var ci=h=>h.join("/").replace(/\/\/+/g,"/"),vA=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),AA=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,SA=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h;function EA(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}var gy=["POST","PUT","PATCH","DELETE"];new Set(gy);var wA=["GET",...gy];new Set(wA);var Ea=N.createContext(null);Ea.displayName="DataRouter";var kl=N.createContext(null);kl.displayName="DataRouterState";N.createContext(!1);var my=N.createContext({isTransitioning:!1});my.displayName="ViewTransition";var _A=N.createContext(new Map);_A.displayName="Fetchers";var xA=N.createContext(null);xA.displayName="Await";var jn=N.createContext(null);jn.displayName="Navigation";var zr=N.createContext(null);zr.displayName="Location";var fi=N.createContext({outlet:null,matches:[],isDataRoute:!1});fi.displayName="Route";var Ih=N.createContext(null);Ih.displayName="RouteError";function TA(h,{relative:t}={}){ne(Fr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=N.useContext(jn),{hash:a,pathname:o,search:l}=Ur(h,{relative:t}),u=o;return n!=="/"&&(u=o==="/"?n:ci([n,o])),s.createHref({pathname:u,search:l,hash:a})}function Fr(){return N.useContext(zr)!=null}function vs(){return ne(Fr(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(zr).location}var yy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function by(h){N.useContext(jn).static||N.useLayoutEffect(h)}function CA(){let{isDataRoute:h}=N.useContext(fi);return h?HA():RA()}function RA(){ne(Fr(),"useNavigate() may be used only in the context of a <Router> component.");let h=N.useContext(Ea),{basename:t,navigator:n}=N.useContext(jn),{matches:s}=N.useContext(fi),{pathname:a}=vs(),o=JSON.stringify(fy(s)),l=N.useRef(!1);return by(()=>{l.current=!0}),N.useCallback((d,p={})=>{if(In(l.current,yy),!l.current)return;if(typeof d=="number"){n.go(d);return}let g=py(d,JSON.parse(o),a,p.relative==="path");h==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:ci([t,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[t,n,o,a,h])}N.createContext(null);function Ur(h,{relative:t}={}){let{matches:n}=N.useContext(fi),{pathname:s}=vs(),a=JSON.stringify(fy(n));return N.useMemo(()=>py(h,JSON.parse(a),s,t==="path"),[h,a,s,t])}function MA(h,t){return vy(h,t)}function vy(h,t,n,s,a){ne(Fr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=N.useContext(jn),{matches:l}=N.useContext(fi),u=l[l.length-1],d=u?u.params:{},p=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let T=y&&y.path||"";Ay(p,!y||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let b=vs(),A;if(t){let T=typeof t=="string"?Sa(t):t;ne(g==="/"||T.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${T.pathname}" was given in the \`location\` prop.`),A=T}else A=b;let E=A.pathname||"/",S=E;if(g!=="/"){let T=g.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=uy(h,{pathname:S});In(y||_!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),In(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=kA(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:ci([g,o.encodeLocation?o.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?g:ci([g,o.encodeLocation?o.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),l,n,s,a);return t&&w?N.createElement(zr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},w):w}function DA(){let h=UA(),t=EA(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),n=h instanceof Error?h.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",h),l=N.createElement(N.Fragment,null,N.createElement("p",null,"💿 Hey developer 👋"),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:o},"ErrorBoundary")," or"," ",N.createElement("code",{style:o},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:a},n):null,l)}var LA=N.createElement(DA,null),OA=class extends N.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,t){return t.location!==h.location||t.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:t.error,location:t.location,revalidation:h.revalidation||t.revalidation}}componentDidCatch(h,t){this.props.unstable_onError?this.props.unstable_onError(h,t):console.error("React Router caught the following error during render",h)}render(){return this.state.error!==void 0?N.createElement(fi.Provider,{value:this.props.routeContext},N.createElement(Ih.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NA({routeContext:h,match:t,children:n}){let s=N.useContext(Ea);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(fi.Provider,{value:h},n)}function kA(h,t=[],n=null,s=null,a=null){if(h==null){if(!n)return null;if(n.errors)h=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)h=n.matches;else return null}let o=h,l=n?.errors;if(l!=null){let p=o.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);ne(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:y,errors:b}=n,A=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||A){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,g,y)=>{let b,A=!1,E=null,S=null;n&&(b=l&&g.route.id?l[g.route.id]:void 0,E=g.route.errorElement||LA,u&&(d<0&&y===0?(Ay("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,S=null):d===y&&(A=!0,S=g.route.hydrateFallbackElement||null)));let _=t.concat(o.slice(0,y+1)),w=()=>{let T;return b?T=E:A?T=S:g.route.Component?T=N.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=p,N.createElement(NA,{match:g,routeContext:{outlet:p,matches:_,isDataRoute:n!=null},children:T})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?N.createElement(OA,{location:n.location,revalidation:n.revalidation,component:E,error:b,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:s}):w()},null)}function jh(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BA(h){let t=N.useContext(Ea);return ne(t,jh(h)),t}function PA(h){let t=N.useContext(kl);return ne(t,jh(h)),t}function zA(h){let t=N.useContext(fi);return ne(t,jh(h)),t}function Gh(h){let t=zA(h),n=t.matches[t.matches.length-1];return ne(n.route.id,`${h} can only be used on routes that contain a unique "id"`),n.route.id}function FA(){return Gh("useRouteId")}function UA(){let h=N.useContext(Ih),t=PA("useRouteError"),n=Gh("useRouteError");return h!==void 0?h:t.errors?.[n]}function HA(){let{router:h}=BA("useNavigate"),t=Gh("useNavigate"),n=N.useRef(!1);return by(()=>{n.current=!0}),N.useCallback(async(a,o={})=>{In(n.current,yy),n.current&&(typeof a=="number"?h.navigate(a):await h.navigate(a,{fromRouteId:t,...o}))},[h,t])}var Tm={};function Ay(h,t,n){!t&&!Tm[h]&&(Tm[h]=!0,In(!1,n))}N.memo(IA);function IA({routes:h,future:t,state:n,unstable_onError:s}){return vy(h,void 0,n,s,t)}function Th(h){ne(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jA({basename:h="/",children:t=null,location:n,navigationType:s="POP",navigator:a,static:o=!1}){ne(!Fr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=h.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof n=="string"&&(n=Sa(n));let{pathname:d="/",search:p="",hash:g="",state:y=null,key:b="default"}=n,A=N.useMemo(()=>{let E=ui(d,l);return E==null?null:{location:{pathname:E,search:p,hash:g,state:y,key:b},navigationType:s}},[l,d,p,g,y,b,s]);return In(A!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:N.createElement(jn.Provider,{value:u},N.createElement(zr.Provider,{children:t,value:A}))}function GA({children:h,location:t}){return MA(Ch(h),t)}function Ch(h,t=[]){let n=[];return N.Children.forEach(h,(s,a)=>{if(!N.isValidElement(s))return;let o=[...t,a];if(s.type===N.Fragment){n.push.apply(n,Ch(s.props.children,o));return}ne(s.type===Th,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ne(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=Ch(s.props.children,o)),n.push(l)}),n}var _l="get",xl="application/x-www-form-urlencoded";function Bl(h){return h!=null&&typeof h.tagName=="string"}function VA(h){return Bl(h)&&h.tagName.toLowerCase()==="button"}function qA(h){return Bl(h)&&h.tagName.toLowerCase()==="form"}function XA(h){return Bl(h)&&h.tagName.toLowerCase()==="input"}function YA(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function $A(h,t){return h.button===0&&(!t||t==="_self")&&!YA(h)}var fl=null;function KA(){if(fl===null)try{new FormData(document.createElement("form"),0),fl=!1}catch{fl=!0}return fl}var WA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gh(h){return h!=null&&!WA.has(h)?(In(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xl}"`),null):h}function QA(h,t){let n,s,a,o,l;if(qA(h)){let u=h.getAttribute("action");s=u?ui(u,t):null,n=h.getAttribute("method")||_l,a=gh(h.getAttribute("enctype"))||xl,o=new FormData(h)}else if(VA(h)||XA(h)&&(h.type==="submit"||h.type==="image")){let u=h.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=h.getAttribute("formaction")||u.getAttribute("action");if(s=d?ui(d,t):null,n=h.getAttribute("formmethod")||u.getAttribute("method")||_l,a=gh(h.getAttribute("formenctype"))||gh(u.getAttribute("enctype"))||xl,o=new FormData(u,h),!KA()){let{name:p,type:g,value:y}=h;if(g==="image"){let b=p?`${p}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else p&&o.append(p,y)}}else{if(Bl(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=_l,s=null,a=xl,l=h}return o&&a==="text/plain"&&(l=o,o=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Vh(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function ZA(h,t,n){let s=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&ui(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function JA(h,t){if(h.id in t)return t[h.id];try{let n=await import(h.module);return t[h.id]=n,n}catch(n){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tS(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function eS(h,t,n){let s=await Promise.all(h.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await JA(o,n);return l.links?l.links():[]}return[]}));return aS(s.flat(1).filter(tS).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Cm(h,t,n,s,a,o){let l=(d,p)=>n[p]?d.route.id!==n[p].route.id:!0,u=(d,p)=>n[p].pathname!==d.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,p)=>l(d,p)||u(d,p)):o==="data"?t.filter((d,p)=>{let g=s.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,p)||u(d,p))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(h,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function nS(h,t,{includeHydrateFallback:n}={}){return iS(h.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function iS(h){return[...new Set(h)]}function sS(h){let t={},n=Object.keys(h).sort();for(let s of n)t[s]=h[s];return t}function aS(h,t){let n=new Set;return new Set(t),h.reduce((s,a)=>{let o=JSON.stringify(sS(a));return n.has(o)||(n.add(o),s.push({key:o,link:a})),s},[])}function Sy(){let h=N.useContext(Ea);return Vh(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function rS(){let h=N.useContext(kl);return Vh(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var qh=N.createContext(void 0);qh.displayName="FrameworkContext";function Ey(){let h=N.useContext(qh);return Vh(h,"You must render this element inside a <HydratedRouter> element"),h}function oS(h,t){let n=N.useContext(qh),[s,a]=N.useState(!1),[o,l]=N.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=t,b=N.useRef(null);N.useEffect(()=>{if(h==="render"&&l(!0),h==="viewport"){let S=w=>{w.forEach(T=>{l(T.isIntersecting)})},_=new IntersectionObserver(S,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[h]),N.useEffect(()=>{if(s){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[s]);let A=()=>{a(!0)},E=()=>{a(!1),l(!1)};return n?h!=="intent"?[o,b,{}]:[o,b,{onFocus:Ar(u,A),onBlur:Ar(d,E),onMouseEnter:Ar(p,A),onMouseLeave:Ar(g,E),onTouchStart:Ar(y,A)}]:[!1,b,{}]}function Ar(h,t){return n=>{h&&h(n),n.defaultPrevented||t(n)}}function lS({page:h,...t}){let{router:n}=Sy(),s=N.useMemo(()=>uy(n.routes,h,n.basename),[n.routes,h,n.basename]);return s?N.createElement(uS,{page:h,matches:s,...t}):null}function cS(h){let{manifest:t,routeModules:n}=Ey(),[s,a]=N.useState([]);return N.useEffect(()=>{let o=!1;return eS(h,t,n).then(l=>{o||a(l)}),()=>{o=!0}},[h,t,n]),s}function uS({page:h,matches:t,...n}){let s=vs(),{manifest:a,routeModules:o}=Ey(),{basename:l}=Sy(),{loaderData:u,matches:d}=rS(),p=N.useMemo(()=>Cm(h,t,d,a,s,"data"),[h,t,d,a,s]),g=N.useMemo(()=>Cm(h,t,d,a,s,"assets"),[h,t,d,a,s]),y=N.useMemo(()=>{if(h===s.pathname+s.search+s.hash)return[];let E=new Set,S=!1;if(t.forEach(w=>{let T=a.routes[w.route.id];!T||!T.hasLoader||(!p.some(C=>C.route.id===w.route.id)&&w.route.id in u&&o[w.route.id]?.shouldRevalidate||T.hasClientLoader?S=!0:E.add(w.route.id))}),E.size===0)return[];let _=ZA(h,l,"data");return S&&E.size>0&&_.searchParams.set("_routes",t.filter(w=>E.has(w.route.id)).map(w=>w.route.id).join(",")),[_.pathname+_.search]},[l,u,s,a,p,t,h,o]),b=N.useMemo(()=>nS(g,a),[g,a]),A=cS(g);return N.createElement(N.Fragment,null,y.map(E=>N.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),b.map(E=>N.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),A.map(({key:E,link:S})=>N.createElement("link",{key:E,nonce:n.nonce,...S})))}function hS(...h){return t=>{h.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var wy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wy&&(window.__reactRouterVersion="7.9.4")}catch{}function dS({basename:h,children:t,window:n}){let s=N.useRef();s.current==null&&(s.current=J0({window:n,v5Compat:!0}));let a=s.current,[o,l]=N.useState({action:a.action,location:a.location}),u=N.useCallback(d=>{N.startTransition(()=>l(d))},[l]);return N.useLayoutEffect(()=>a.listen(u),[a,u]),N.createElement(jA,{basename:h,children:t,location:o.location,navigationType:o.action,navigator:a})}var _y=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xh=N.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:a,reloadDocument:o,replace:l,state:u,target:d,to:p,preventScrollReset:g,viewTransition:y,...b},A){let{basename:E}=N.useContext(jn),S=typeof p=="string"&&_y.test(p),_,w=!1;if(typeof p=="string"&&S&&(_=p,wy))try{let q=new URL(window.location.href),Q=p.startsWith("//")?new URL(q.protocol+p):new URL(p),Z=ui(Q.pathname,E);Q.origin===q.origin&&Z!=null?p=Z+Q.search+Q.hash:w=!0}catch{In(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=TA(p,{relative:a}),[C,O,M]=oS(s,b),P=mS(p,{replace:l,state:u,target:d,preventScrollReset:g,relative:a,viewTransition:y});function B(q){t&&t(q),q.defaultPrevented||P(q)}let I=N.createElement("a",{...b,...M,href:_||T,onClick:w||o?t:B,ref:hS(A,O),target:d,"data-discover":!S&&n==="render"?"true":void 0});return C&&!S?N.createElement(N.Fragment,null,I,N.createElement(lS,{page:T})):I});Xh.displayName="Link";var fS=N.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:u,children:d,...p},g){let y=Ur(l,{relative:p.relative}),b=vs(),A=N.useContext(kl),{navigator:E,basename:S}=N.useContext(jn),_=A!=null&&SS(y)&&u===!0,w=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,T=b.pathname,C=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;n||(T=T.toLowerCase(),C=C?C.toLowerCase():null,w=w.toLowerCase()),C&&S&&(C=ui(C,S)||C);const O=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let M=T===w||!a&&T.startsWith(w)&&T.charAt(O)==="/",P=C!=null&&(C===w||!a&&C.startsWith(w)&&C.charAt(w.length)==="/"),B={isActive:M,isPending:P,isTransitioning:_},I=M?t:void 0,q;typeof s=="function"?q=s(B):q=[s,M?"active":null,P?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let Q=typeof o=="function"?o(B):o;return N.createElement(Xh,{...p,"aria-current":I,className:q,ref:g,style:Q,to:l,viewTransition:u},typeof d=="function"?d(B):d)});fS.displayName="NavLink";var pS=N.forwardRef(({discover:h="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:a,state:o,method:l=_l,action:u,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:y,...b},A)=>{let E=vS(),S=AS(u,{relative:p}),_=l.toLowerCase()==="get"?"get":"post",w=typeof u=="string"&&_y.test(u),T=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let O=C.nativeEvent.submitter,M=O?.getAttribute("formmethod")||l;E(O||C.currentTarget,{fetcherKey:t,method:M,navigate:n,replace:a,state:o,relative:p,preventScrollReset:g,viewTransition:y})};return N.createElement("form",{ref:A,method:_,action:S,onSubmit:s?d:T,...b,"data-discover":!w&&h==="render"?"true":void 0})});pS.displayName="Form";function gS(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xy(h){let t=N.useContext(Ea);return ne(t,gS(h)),t}function mS(h,{target:t,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l}={}){let u=CA(),d=vs(),p=Ur(h,{relative:o});return N.useCallback(g=>{if($A(g,t)){g.preventDefault();let y=n!==void 0?n:Dr(d)===Dr(p);u(h,{replace:y,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,p,n,s,t,h,a,o,l])}var yS=0,bS=()=>`__${String(++yS)}__`;function vS(){let{router:h}=xy("useSubmit"),{basename:t}=N.useContext(jn),n=FA();return N.useCallback(async(s,a={})=>{let{action:o,method:l,encType:u,formData:d,body:p}=QA(s,t);if(a.navigate===!1){let g=a.fetcherKey||bS();await h.fetch(g,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await h.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[h,t,n])}function AS(h,{relative:t}={}){let{basename:n}=N.useContext(jn),s=N.useContext(fi);ne(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={...Ur(h||".",{relative:t})},l=vs();if(h==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();o.search=g?`?${g}`:""}}return(!h||h===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:ci([n,o.pathname])),Dr(o)}function SS(h,{relative:t}={}){let n=N.useContext(my);ne(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=xy("useViewTransitionState"),a=Ur(h,{relative:t});if(!n.isTransitioning)return!1;let o=ui(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=ui(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Rl(a.pathname,l)!=null||Rl(a.pathname,o)!=null}const ke=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Rh=[.001,0,0,.001,0,0],mh=1.35,sn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Hn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Lr="pdfjs_internal_editor_",bt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Ty={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ce={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Rr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ce={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},la={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Hr={ERRORS:0,WARNINGS:1,INFOS:5},ba={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},pl={moveTo:0,lineTo:1,curveTo:2,closePath:3},Cy={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Pl=Hr.WARNINGS;function ES(h){Number.isInteger(h)&&(Pl=h)}function wS(){return Pl}function zl(h){Pl>=Hr.INFOS&&console.info(`Info: ${h}`)}function vt(h){Pl>=Hr.WARNINGS&&console.warn(`Warning: ${h}`)}function Xt(h){throw new Error(h)}function Lt(h,t){h||Xt(t)}function _S(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Yh(h,t=null,n=null){if(!h)return null;if(n&&typeof h=="string"&&(n.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),n.tryConvertEncoding))try{h=MS(h)}catch{}const s=t?URL.parse(h,t):URL.parse(h);return _S(s)?s:null}function $h(h,t,n=!1){const s=URL.parse(h);return s?(s.hash=t,s.href):n&&Yh(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function wt(h,t,n,s=!1){return Object.defineProperty(h,t,{value:n,enumerable:!s,configurable:!0,writable:!1}),n}const As=(function(){function t(n,s){this.message=n,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class Rm extends As{constructor(t,n){super(t,"PasswordException"),this.code=n}}class yh extends As{constructor(t,n){super(t,"UnknownErrorException"),this.details=n}}class Ml extends As{constructor(t){super(t,"InvalidPDFException")}}class Or extends As{constructor(t,n,s){super(t,"ResponseException"),this.status=n,this.missing=s}}class xS extends As{constructor(t){super(t,"FormatError")}}class hi extends As{constructor(t){super(t,"AbortException")}}function Ry(h){(typeof h!="object"||h?.length===void 0)&&Xt("Invalid argument for bytesToString");const t=h.length,n=8192;if(t<n)return String.fromCharCode.apply(null,h);const s=[];for(let a=0;a<t;a+=n){const o=Math.min(a+n,t),l=h.subarray(a,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function Ir(h){typeof h!="string"&&Xt("Invalid argument for stringToBytes");const t=h.length,n=new Uint8Array(t);for(let s=0;s<t;++s)n[s]=h.charCodeAt(s)&255;return n}function TS(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function CS(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function RS(){try{return new Function(""),!0}catch{return!1}}class Se{static get isLittleEndian(){return wt(this,"isLittleEndian",CS())}static get isEvalSupported(){return wt(this,"isEvalSupported",RS())}static get isOffscreenCanvasSupported(){return wt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return wt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:n}=navigator;return wt(this,"platform",{isAndroid:n.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){return wt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const bh=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class nt{static makeHexColor(t,n,s){return`#${bh[t]}${bh[n]}${bh[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,n){let s;t[0]?(t[0]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=t[0],n[2]*=t[0],t[3]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=t[3],n[3]*=t[3]):(s=n[0],n[0]=n[1],n[1]=s,s=n[2],n[2]=n[3],n[3]=s,t[1]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=t[1],n[3]*=t[1],t[2]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=t[2],n[2]*=t[2]),n[0]+=t[4],n[1]+=t[5],n[2]+=t[4],n[3]+=t[5]}static transform(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}static multiplyByDOMMatrix(t,n){return[t[0]*n.a+t[2]*n.b,t[1]*n.a+t[3]*n.b,t[0]*n.c+t[2]*n.d,t[1]*n.c+t[3]*n.d,t[0]*n.e+t[2]*n.f+t[4],t[1]*n.e+t[3]*n.f+t[5]]}static applyTransform(t,n,s=0){const a=t[s],o=t[s+1];t[s]=a*n[0]+o*n[2]+n[4],t[s+1]=a*n[1]+o*n[3]+n[5]}static applyTransformToBezier(t,n,s=0){const a=n[0],o=n[1],l=n[2],u=n[3],d=n[4],p=n[5];for(let g=0;g<6;g+=2){const y=t[s+g],b=t[s+g+1];t[s+g]=y*a+b*l+d,t[s+g+1]=y*o+b*u+p}}static applyInverseTransform(t,n){const s=t[0],a=t[1],o=n[0]*n[3]-n[1]*n[2];t[0]=(s*n[3]-a*n[2]+n[2]*n[5]-n[4]*n[3])/o,t[1]=(-s*n[1]+a*n[0]+n[4]*n[1]-n[5]*n[0])/o}static axialAlignedBoundingBox(t,n,s){const a=n[0],o=n[1],l=n[2],u=n[3],d=n[4],p=n[5],g=t[0],y=t[1],b=t[2],A=t[3];let E=a*g+d,S=E,_=a*b+d,w=_,T=u*y+p,C=T,O=u*A+p,M=O;if(o!==0||l!==0){const P=o*g,B=o*b,I=l*y,q=l*A;E+=I,w+=I,_+=q,S+=q,T+=P,M+=P,O+=B,C+=B}s[0]=Math.min(s[0],E,_,S,w),s[1]=Math.min(s[1],T,O,C,M),s[2]=Math.max(s[2],E,_,S,w),s[3]=Math.max(s[3],T,O,C,M)}static inverseTransform(t){const n=t[0]*t[3]-t[1]*t[2];return[t[3]/n,-t[1]/n,-t[2]/n,t[0]/n,(t[2]*t[5]-t[4]*t[3])/n,(t[4]*t[1]-t[5]*t[0])/n]}static singularValueDecompose2dScale(t,n){const s=t[0],a=t[1],o=t[2],l=t[3],u=s**2+a**2,d=s*o+a*l,p=o**2+l**2,g=(u+p)/2,y=Math.sqrt(g**2-(u*p-d**2));n[0]=Math.sqrt(g+y||1),n[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const n=t.slice(0);return t[0]>t[2]&&(n[0]=t[2],n[2]=t[0]),t[1]>t[3]&&(n[1]=t[3],n[3]=t[1]),n}static intersect(t,n){const s=Math.max(Math.min(t[0],t[2]),Math.min(n[0],n[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(n[0],n[2]));if(s>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(n[1],n[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(n[1],n[3]));return o>l?null:[s,o,a,l]}static pointBoundingBox(t,n,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],n),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],n)}static rectBoundingBox(t,n,s,a,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],n,a),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],n,a)}static#t(t,n,s,a,o,l,u,d,p,g){if(p<=0||p>=1)return;const y=1-p,b=p*p,A=b*p,E=y*(y*(y*t+3*p*n)+3*b*s)+A*a,S=y*(y*(y*o+3*p*l)+3*b*u)+A*d;g[0]=Math.min(g[0],E),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],E),g[3]=Math.max(g[3],S)}static#e(t,n,s,a,o,l,u,d,p,g,y,b){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,n,s,a,o,l,u,d,-y/g,b);return}const A=g**2-4*y*p;if(A<0)return;const E=Math.sqrt(A),S=2*p;this.#t(t,n,s,a,o,l,u,d,(-g+E)/S,b),this.#t(t,n,s,a,o,l,u,d,(-g-E)/S,b)}static bezierBoundingBox(t,n,s,a,o,l,u,d,p){p[0]=Math.min(p[0],t,u),p[1]=Math.min(p[1],n,d),p[2]=Math.max(p[2],t,u),p[3]=Math.max(p[3],n,d),this.#e(t,s,o,u,n,a,l,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),p),this.#e(t,s,o,u,n,a,l,d,3*(-n+3*(a-l)+d),6*(n-2*a+l),3*(a-n),p)}}function MS(h){return decodeURIComponent(escape(h))}let vh=null,Mm=null;function My(h){return vh||(vh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Mm=new Map([["ﬅ","ſt"]])),h.replaceAll(vh,(t,n,s)=>n?n.normalize("NFKC"):Mm.get(s))}function Kh(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),Ry(h)}const Wh="pdfjs_internal_id_";function DS(h,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[s,a,...o]=n;if(!h(s)&&!Number.isInteger(s)||!t(a))return!1;const l=o.length;let u=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function De(h,t,n){return Math.min(Math.max(h,t),n)}function Dy(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(Ry(h))}function LS(h){return Uint8Array.fromBase64?Uint8Array.fromBase64(h):Ir(atob(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(n=>{n(h(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,n)=>t+n,0)});class Nr{static textContent(t){const n=[],s={items:n,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(Nr.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&n.push({str:l}),!!o.children)for(const d of o.children)a(d)}return a(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Qh{static setupStorage(t,n,s,a,o){const l=a.getValue(n,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(n,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?t.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(n,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(n,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of s.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(n,{value:p})});break}}static setAttributes({html:t,element:n,storage:s=null,intent:a,linkService:o}){const{attributes:l}=n,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[d,p]of Object.entries(l))if(p!=null)switch(d){case"class":p.length&&t.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,p)}u&&o.addLinkAttributes(t,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(t,l.dataId,n,s)}static render(t){const n=t.annotationStorage,s=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(l),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);l.append(y),u&&Nr.shouldBuildText(a.name)&&p.push(y)}return{textDivs:p}}const g=[[a,-1,l]];for(;g.length>0;){const[y,b,A]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const E=y.children[++g.at(-1)[1]];if(E===null)continue;const{name:S}=E;if(S==="#text"){const w=document.createTextNode(E.value);p.push(w),A.append(w);continue}const _=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,S):document.createElement(S);if(A.append(_),E.attributes&&this.setAttributes({html:_,element:E,storage:n,intent:o,linkService:s}),E.children?.length>0)g.push([E,-1,_]);else if(E.value){const w=document.createTextNode(E.value);u&&Nr.shouldBuildText(S)&&p.push(w),_.append(w)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const n=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=n,t.div.hidden=!1}}const oi="http://www.w3.org/2000/svg";class ms{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function wa(h,t="text"){if(xr(h,document.baseURI)){const n=await fetch(h);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,s)=>{const a=new XMLHttpRequest;a.open("GET",h,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":n(a.response);return}n(a.responseText);return}s(new Error(a.statusText))}},a.send(null)})}class jr{constructor({viewBox:t,userUnit:n,scale:s,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=n,this.scale=s,this.rotation=a,this.offsetX=o,this.offsetY=l,s*=n;const d=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let g,y,b,A;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,y=0,b=0,A=1;break;case 90:g=0,y=1,b=1,A=0;break;case 270:g=0,y=-1,b=-1,A=0;break;case 0:g=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,A=-A);let E,S,_,w;g===0?(E=Math.abs(p-t[1])*s+o,S=Math.abs(d-t[0])*s+l,_=(t[3]-t[1])*s,w=(t[2]-t[0])*s):(E=Math.abs(d-t[0])*s+o,S=Math.abs(p-t[1])*s+l,_=(t[2]-t[0])*s,w=(t[3]-t[1])*s),this.transform=[g*s,y*s,b*s,A*s,E-g*s*d-b*s*p,S-y*s*d-A*s*p],this.width=_,this.height=w}get rawDims(){const t=this.viewBox;return wt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:n=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new jr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:n,offsetX:s,offsetY:a,dontFlip:o})}convertToViewportPoint(t,n){const s=[t,n];return nt.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const n=[t[0],t[1]];nt.applyTransform(n,this.transform);const s=[t[2],t[3]];return nt.applyTransform(s,this.transform),[n[0],n[1],s[0],s[1]]}convertToPdfPoint(t,n){const s=[t,n];return nt.applyInverseTransform(s,this.transform),s}}class Fl extends As{constructor(t,n=0){super(t,"RenderingCancelledException"),this.extraDelay=n}}function Gr(h){const t=h.length;let n=0;for(;n<t&&h[n].trim()==="";)n++;return h.substring(n,n+5).toLowerCase()==="data:"}function Ul(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function Ly(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function Oy(h,t="document.pdf"){if(typeof h!="string")return t;if(Gr(h))return vt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(h);if(!s)return t;const a=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return a(l);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const p of u)if(o.test(p))return a(p);const d=Array.from(s.searchParams.keys()).reverse();for(const p of d)if(o.test(p))return a(p)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return a(d[0])}return t}class Dm{started=Object.create(null);times=[];time(t){t in this.started&&vt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||vt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let n=0;for(const{name:s}of this.times)n=Math.max(s.length,n);for(const{name:s,start:a,end:o}of this.times)t.push(`${s.padEnd(n)} ${o-a}ms
`);return t.join("")}}function xr(h,t){const n=t?URL.parse(h,t):URL.parse(h);return n?.protocol==="http:"||n?.protocol==="https:"}function on(h){h.preventDefault()}function ee(h){h.preventDefault(),h.stopPropagation()}function OS(h){console.log("Deprecated API usage: "+h)}class Dl{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#t.exec(t);if(!n)return null;const s=parseInt(n[1],10);let a=parseInt(n[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(n[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(n[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(n[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(n[6],10);d=d>=0&&d<=59?d:0;const p=n[7]||"Z";let g=parseInt(n[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(n[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(l+=g,u+=y):p==="+"&&(l-=g,u-=y),new Date(Date.UTC(s,a,o,l,u,d))}}function Ny(h,{scale:t=1,rotation:n=0}){const{width:s,height:a}=h.attributes.style,o=[0,0,parseInt(s),parseInt(a)];return new jr({viewBox:o,userUnit:1,scale:t,rotation:n})}function _a(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(vt(`Not a valid color format: "${h}"`),[0,0,0])}function NS(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of h.keys()){t.style.color=n;const s=window.getComputedStyle(t).color;h.set(n,_a(s))}t.remove()}function te(h){const{a:t,b:n,c:s,d:a,e:o,f:l}=h.getTransform();return[t,n,s,a,o,l]}function Bn(h){const{a:t,b:n,c:s,d:a,e:o,f:l}=h.getTransform().invertSelf();return[t,n,s,a,o,l]}function Vi(h,t,n=!1,s=!0){if(t instanceof jr){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=h,u=Se.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,p=`var(--total-scale-factor) * ${o}px`,g=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=u?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!n||t.rotation%180===0?(l.width=g,l.height=y):(l.width=y,l.height=g)}s&&h.setAttribute("data-main-rotation",t.rotation)}class Cn{constructor(){const{pixelRatio:t}=Cn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,n,s,a,o=-1){let l=1/0,u=1/0,d=1/0;s=Cn.capPixels(s,o),s>0&&(l=Math.sqrt(s/(t*n))),a!==-1&&(u=a/t,d=a/n);const p=Math.min(l,u,d);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,n){if(n>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return t>0?Math.min(t,s):s}return t}}const Ll=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class kS{static get isDarkMode(){return wt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class ky{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:n}=t;n.width=n.height="0",n.display="none",n.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),wt(this,"commentForegroundColor",_a(s))}}function By(h,t,n,s){s=Math.min(Math.max(s??1,0),1);const a=255*(1-s);return h=Math.round(h*s+a),t=Math.round(t*s+a),n=Math.round(n*s+a),[h,t,n]}function Lm(h,t){const n=h[0]/255,s=h[1]/255,a=h[2]/255,o=Math.max(n,s,a),l=Math.min(n,s,a),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=u<.5?d/(o+l):d/(2-o-l),o){case n:t[0]=((s-a)/d+(s<a?6:0))*60;break;case s:t[0]=((a-n)/d+2)*60;break;case a:t[0]=((n-s)/d+4)*60;break}}t[2]=u}function Mh(h,t){const n=h[0],s=h[1],a=h[2],o=(1-Math.abs(2*a-1))*s,l=o*(1-Math.abs(n/60%2-1)),u=a-o/2;switch(Math.floor(n/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function Om(h){return h<=.03928?h/12.92:((h+.055)/1.055)**2.4}function Nm(h,t,n){Mh(h,n),n.map(Om);const s=.2126*n[0]+.7152*n[1]+.0722*n[2];Mh(t,n),n.map(Om);const a=.2126*n[0]+.7152*n[1]+.0722*n[2];return s>a?(s+.05)/(a+.05):(a+.05)/(s+.05)}const km=new Map;function Py(h,t){const n=h[0]+h[1]*256+h[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=km.get(n);if(s)return s;const a=new Float32Array(9),o=a.subarray(0,3),l=a.subarray(3,6);Lm(h,l);const u=a.subarray(6,9);Lm(t,u);const d=u[2]<.5,p=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),Nm(l,u,o)<p){let g,y;d?(g=l[2],y=1):(g=0,y=l[2]);const b=.005;for(;y-g>b;){const A=l[2]=(g+y)/2;d===Nm(l,u,o)<p?g=A:y=A}l[2]=d?y:g}return Mh(l,o),s=nt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),km.set(n,s),s}function Zh({html:h,dir:t,className:n},s){const a=document.createDocumentFragment();if(typeof h=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=h.split(/(?:\r\n?|\n)/);for(let u=0,d=l.length;u<d;++u){const p=l[u];o.append(document.createTextNode(p)),u<d-1&&o.append(document.createElement("br"))}a.append(o)}else Qh.render({xfaHtml:h,div:a,intent:"richText"});a.firstChild.classList.add("richText",n),s.append(a)}class Mr{#t=null;#e=null;#i;#n=null;#r=null;#s=null;#a=null;#o=null;static#c=null;constructor(t){this.#i=t,Mr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const n=this.#i._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(t.addEventListener("contextmenu",on,{signal:n}),t.addEventListener("pointerdown",Mr.#l,{signal:n}));const s=this.#n=document.createElement("div");s.className="buttons",t.append(s);const a=this.#i.toolbarPosition;if(a){const{style:o}=t,l=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,ee(t)}#h(t){this.#i._focusEventsAllowed=!0,ee(t)}#f(t){const n=this.#i._uiManager._signal;return!(n instanceof AbortSignal)||n.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:n}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:n}),t.addEventListener("contextmenu",on,{signal:n}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:n}=this.#i,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",Mr.#c[t]),this.#f(s)&&s.addEventListener("click",a=>{n.delete()},{signal:n._signal}),this.#n.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const n=await t.render();this.#f(n),this.#n.append(n,this.#m),this.#r=t}addComment(t,n=null){if(this.#s)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const a=this.#a=this.#m;n?(this.#n.insertBefore(s,n),this.#n.insertBefore(a,n)):this.#n.append(s,a),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const n=t.renderButton();this.#f(n),this.#n.append(n,this.#m)}async addEditSignatureButton(t){const n=this.#o=await t.renderEditButton(this.#i);this.#f(n),this.#n.append(n,this.#m)}removeButton(t){switch(t){case"comment":this.#s?.removeToolbarCommentButton(),this.#s=null,this.#a?.remove(),this.#a=null;break}}async addButton(t,n){switch(t){case"colorPicker":this.addColorPicker(n);break;case"altText":await this.addAltText(n);break;case"editSignature":await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(n);break}}async addButtonBefore(t,n,s){const a=this.#n.querySelector(s);a&&t==="comment"&&this.addComment(n,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class BS{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const n=this.#i._signal;n instanceof AbortSignal&&!n.aborted&&t.addEventListener("contextmenu",on,{signal:n});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,n){let s=0,a=0;for(const o of t){const l=o.y+o.height;if(l<s)continue;const u=o.x+(n?o.width:0);if(l>s){a=u,s=l;continue}n?u>a&&(a=u):u<a&&(a=u)}return[n?1-a:a,s]}show(t,n,s){const[a,o]=this.#r(n,s),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,n,s,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",n);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",s);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",on,{signal:u}),o.addEventListener("click",a,{signal:u})),this.#t.append(o)}}function zy(h,t,n){for(const s of n)t.addEventListener(s,h[s].bind(h))}class PS{#t=0;get id(){return`${Lr}${this.#t++}`}}class Jh{#t=Kh();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return wt(this,"_isSVGFittingCanvas",o)}async#n(t,n){this.#i||=new Map;let s=this.#i.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof n=="string"?(s.url=n,a=await wa(n,"blob")):n instanceof File?a=s.file=n:n instanceof Blob&&(a=n),a.type==="image/svg+xml"){const o=Jh._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((p,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,p()},l.onload=async()=>{const y=s.svgUrl=l.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=l.onerror=g});l.readAsDataURL(a),await d}else s.bitmap=await createImageBitmap(a);s.refCounter=1}catch(a){vt(a),s=null}return this.#i.set(t,s),s&&this.#i.set(s.id,s),s}async getFromFile(t){const{lastModified:n,name:s,size:a,type:o}=t;return this.#n(`${n}_${s}_${a}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,n){const s=await n;return this.#n(t,s)}async getFromId(t){this.#i||=new Map;const n=this.#i.get(t);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:s}=n;return delete n.blobPromise,this.getFromBlob(n.id,s)}return this.getFromUrl(n.url)}getFromCanvas(t,n){this.#i||=new Map;let s=this.#i.get(t);if(s?.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(n.width,n.height);return a.getContext("2d").drawImage(n,0,0),s={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,s),this.#i.set(s.id,s),s}getSvgUrl(t){const n=this.#i.get(t);return n?.isSvg?n.svgUrl:null}deleteId(t){this.#i||=new Map;const n=this.#i.get(t);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:s}=n;if(!n.url&&!n.file){const a=new OffscreenCanvas(s.width,s.height);a.getContext("bitmaprenderer").transferFromImageBitmap(s),n.blobPromise=a.convertToBlob()}s.close?.(),n.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class zS{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:n,post:s,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:n,post:s,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(l&&this.#t[this.#n].type===o){u&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const p=this.#n+1;p===this.#i?this.#t.splice(0,1):(this.#n=p,p<this.#t.length&&this.#t.splice(p)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:n}=this.#t[this.#n];t(),n?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:n}=this.#t[this.#n];t(),n?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let n=this.#n;n>=0;n--)if(this.#t[n].type!==t){this.#t.splice(n+1,this.#n-n),this.#n=n;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class Vr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=Se.platform;for(const[s,a,o={}]of t)for(const l of s){const u=l.startsWith("mac+");n&&u?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!n&&!u&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(t,n){if(!this.allKeys.has(n.key))return;const s=this.callbacks.get(this.#t(n));if(!s)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:u=null}}=s;u&&!u(t,n)||(a.bind(t,...l,n)(),o||ee(n))}}class td{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return NS(t),wt(this,"_colors",t)}convert(t){const n=_a(t);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[s,a]of this._colors)if(a.every((o,l)=>o===n[l]))return td._colorsMapping.get(s);return n}getHexCode(t){const n=this._colors.get(t);return n?nt.makeHexColor(...n):t}}class di{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#s=null;#a=null;#o=null;#c=new zS;#l=null;#d=null;#h=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#x=null;#w=null;#A=null;#C=null;#E=!1;#_=null;#D=new PS;#R=!1;#M=!1;#z=!1;#O=null;#k=null;#F=null;#B=null;#V=null;#T=bt.NONE;#S=new Set;#N=null;#U=null;#I=null;#Y=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#P=null;#q=null;#Z=null;#J=null;#H=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=di.prototype,n=l=>l.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return wt(this,"_keyboardManager",new Vr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:n}]]))}constructor(t,n,s,a,o,l,u,d,p,g,y,b,A,E,S,_){const w=this._signal=this.#t.signal;this.#q=t,this.#Z=n,this.#J=s,this.#s=a,this.#l=o,this.#U=l,this.#X=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:w}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),u._on("setpreference",this.onSetPreference.bind(this),{signal:w}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:w}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:w}),this.#lt(),this.#dt(),this.#et(),this.#a=d.annotationStorage,this.#x=d.filterFactory,this.#I=p,this.#C=g||null,this.#y=y,this.#v=b,this.#b=A,this.#V=E||null,this.viewParameters={realScale:ms.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=_!==!1,o?.setSidebarUiManager(this)}destroy(){this.#H?.resolve(),this.#H=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#g.clear(),this.#B?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#_?.hide(),this.#_=null,this.#F?.destroy(),this.#F=null,this.#i=null,this.#w&&(clearTimeout(this.#w),this.#w=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return wt(this,"hcmFilter",this.#I?this.#x.addHCMFilter(this.#I.foreground,this.#I.background):"none")}get direction(){return wt(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return wt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(n=>n.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return wt(this,"highlightColors",null);const n=new Map,s=!!this.#I;for(const[a,o]of t){const l=a.endsWith("_HCM");if(s&&l){n.set(a.replace("_HCM",""),o);continue}!s&&!l&&n.set(a,o)}return wt(this,"highlightColors",n)}get highlightColorNames(){return wt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const n=this.highlightColorNames.get(t);return this._highlightColors.get(n)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,n=!1){this.#s?.editAltText(this,t,n)}hasCommentManager(){return!!this.#l}editComment(t,n,s,a){this.#l?.showDialog(this,t,n,s,a)}selectComment(t,n){this.#r.get(t)?.getEditorByUID(n)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,n,s=void 0){this.#l?.toggleCommentPopup(t,n,s)}makeCommentColor(t,n){return t&&this.#l?.makeCommentColor(t,n)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:n,promise:s}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),n())};this._eventBus.on("editorsrendered",a),await s}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,n){this._eventBus.dispatch("setpreference",{source:this,name:t,value:n})}onSetPreference({name:t,value:n}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=n;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,n){for(const s of this.#r.values()){const{x:a,y:o,width:l,height:u}=s.div.getBoundingClientRect();if(t>=a&&t<=a+l&&n>=o&&n<=o+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ms.PDF_TO_CSS_UNITS;for(const n of this.#g)n.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:n}=this;if(n.hasTextLayer(t))return n;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",n=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u}=s,d=s.toString(),g=this.#Q(s).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;s.empty();const b=this.#tt(g),A=this.#T===bt.NONE,E=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u,text:d});A&&this.showAllEditors("highlight",!0,!0),n&&S?.editComment()};if(A){this.switchToMode(bt.HIGHLIGHT,E);return}E()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(s);a&&(this.#_||=new BS(this),this.#_.show(s,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const n=`${Lr}${t}`,s=this.#a.getRawValue(n);return s&&this.#a.remove(n),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,n=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),n?s.setAttribute("data-l10n-args",JSON.stringify(n)):s.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#_?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:n}=t;if(n===this.#N)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#N&&(this.#_?.hide(),this.#N=null,this.#L({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#N=n,this.#L({hasSelectedText:!0}),!(this.#T!==bt.HIGHLIGHT&&this.#T!==bt.NONE)&&(this.#T===bt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===bt.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#M){const l=new AbortController,u=this.combinedSignal(l),d=p=>{p.type==="pointerup"&&p.button!==0||(l.abort(),o?.toggleDrawing(!0),p.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#T===bt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const n of this.#S)if(n.div.contains(t)){this.#k=[n,t],n._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,n]=this.#k;this.#k=null,n.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#O?.abort(),this.#O=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(t){for(const{type:n}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(n)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const n of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(n.type)){s.paste(n,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const s of this.#S){const a=s.serialize(!0);a&&n.push(a)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:n}=t;for(const o of n.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=n.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){vt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of s){const p=await a.deserialize(d);if(!p)return;o.push(p)}const l=()=>{for(const d of o)this.#st(d);this.#at(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){vt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==bt.NONE&&!this.isEditorHandlingKeyboard&&di._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(t){Object.entries(t).some(([s,a])=>this.#$[s]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#T===bt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Mt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#L({isEditing:this.#T!==bt.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const n of this.#u)this.#G(n.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,n=null,s=!1,a=!1,o=!1){if(this.#T!==t&&!(this.#H&&(await this.#H.promise,!this.#H))){if(this.#H=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===bt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===bt.NONE){this.setEditingState(!1),this.#pt();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#H.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();t===bt.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#r.values())l.updateMode(t);if(t===bt.POPUP){this.#i||=await this.#X.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,u=[];for(const d of this.#n.values()){const{annotationElementId:p,hasComment:g,deleted:y}=d;p&&l.add(p),g&&!y&&u.push(d.getData())}for(const d of this.#i){const{id:p,popupRef:g,contentsObj:y}=d;g&&y?.str&&!l.has(p)&&!this.#m.has(p)&&u.push(d)}this.#l?.showSidebar(u)}if(!n){s&&this.addNewEditorFromKeyboard(),this.#H.resolve();return}for(const l of this.#n.values())l.uid===n?(this.setSelected(l),o?l.editComment():a?l.enterInEditMode():l.focus()):l.unselect();this.#H.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,n){if(this.#u){switch(t){case Mt.CREATE:this.currentLayer.addNewEditor(n);return;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,n),this.showAllEditors("highlight",n);break}if(this.hasSelection)for(const s of this.#S)s.updateParams(t,n);else for(const s of this.#u)s.updateDefaultParams(t,n)}}showAllEditors(t,n,s=!1){for(const o of this.#n.values())o.editorType===t&&o.show(n);(this.#Y?.get(Mt.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#G([[Mt.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const n of this.#r.values())t?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const n of this.#r.values())t.push(n.enable());await Promise.all(t);for(const n of this.#n.values())n.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const n of this.#n.values())n.pageIndex===t&&(yield n)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.focusMainContainer(),this.#w=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const n=this.#r.get(t.pageIndex);n?n.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const n of this.#S)n!==t&&n.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...this.#S],s=()=>{this._editorUndoBar?.show(a,n.length===1?n[0].editorType:n.length);for(const o of n)o.remove()},a=()=>{for(const o of n)this.#st(o)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const n of this.#S)n.unselect();this.#S.clear();for(const n of t)n.isEmpty()||(this.#S.add(n),n.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==bt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(t,n,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=n;const[a,o]=this.#j,l=[...this.#S],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},u);for(const d of l)d.translateInPage(t,n),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#S)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let n=!1;for(const[{x:a,y:o,pageIndex:l},u]of t)u.newX=a,u.newY=o,u.newPageIndex=l,n||=a!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!n)return!1;const s=(a,o,l,u)=>{if(this.#n.has(a.id)){const d=this.#r.get(u);d?a._setParentAndPosition(d,o,l):(a.pageIndex=u,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:u}]of t)s(a,o,l,u)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:u}]of t)s(a,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,n){if(this.#p)for(const s of this.#p.keys())s.drag(t,n)}rebuild(t){if(t.parent===null){const n=this.getLayer(t.pageIndex);n?(n.changeParent(t),n.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==bt.NONE}get imageManager(){return wt(this,"imageManager",new Jh)}getSelectionBoxes(t){if(!t)return null;const n=document.getSelection();for(let p=0,g=n.rangeCount;p<g;p++)if(!t.contains(n.getRangeAt(p).commonAncestorContainer))return null;const{x:s,y:a,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(p,g,y,b)=>({x:(g-a)/l,y:1-(p+y-s)/o,width:b/l,height:y/o});break;case"180":u=(p,g,y,b)=>({x:1-(p+y-s)/o,y:1-(g+b-a)/l,width:y/o,height:b/l});break;case"270":u=(p,g,y,b)=>({x:1-(g+b-a)/l,y:(p-s)/o,width:b/l,height:y/o});break;default:u=(p,g,y,b)=>({x:(p-s)/o,y:(g-a)/l,width:y/o,height:b/l});break}const d=[];for(let p=0,g=n.rangeCount;p<g;p++){const y=n.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:A,width:E,height:S}of y.getClientRects())E===0||S===0||d.push(u(b,A,E,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:n}){(this.#o||=new Map).set(t,n)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const n=this.#o?.get(t.data.id);if(!n)return;const s=this.#a.getRawValue(n);s&&(this.#T===bt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,n,s){const a=this.#B?.get(t);a&&(a.setCanvas(n,s),this.#B.delete(t))}addMissingCanvas(t,n){(this.#B||=new Map).set(t,n)}}class Fn{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Fn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Fn._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const n=this.#n=document.createElement("span");t.append(n),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Fn.#f.missing),n.setAttribute("data-l10n-id",Fn.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",on,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,a(o))},{signal:s}),await this.#p(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Fn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const n=this.#o=document.createElement("div");n.className="noAltTextBadge",this.#c.div.append(n)}this.#o.classList.toggle("hidden",!t)}serialize(t){let n=this.#t;return!t&&this.#l===n&&(n=this.#d),{altText:n,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:n,guessedText:s,textWithDisclaimer:a,cancel:o=!1}){s&&(this.#l=s,this.#d=a),!(this.#t===t&&this.#e===n)&&(o||(this.#t=t,this.#e=n),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Fn.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",Fn.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#r;if(!n){this.#r=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#t),n.parentNode||t.append(n),this.#c.getElementForAltText()?.setAttribute("aria-describedby",n.id)}}class gl{#t=null;#e=null;#i=!1;#n=null;#r=null;#s=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const n=this.#n.commentButtonPosition;if(n){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-n[0]:n[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*n[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(s.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:n,height:s}=this.#t.getBoundingClientRect(),{x:a,y:o,width:l,height:u}=this.#n.parent.boundingClientRect;return[(t-a)/l,(n+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:n}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=n)}#d(t,n){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",n?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#n._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",on,{signal:s}),n&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,ee(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,ee(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#i=!0,a(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:s}),t}edit(t){const n=this.commentPopupPositionInLayer;let s,a;if(n)[s,a]=n;else{[s,a]=this.#n.commentButtonPosition;const{width:g,height:y,x:b,y:A}=this.#n;s=b+s*g,a=A+a*y}const o=this.#n.parent.boundingClientRect,{x:l,y:u,width:d,height:p}=o;this.#n._uiManager.editComment(this.#n,l+s*d,u+a*p,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#s=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,n=null){this.#r=t,this.data=t,this.#o=null,this.#s=n}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#s=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class qr{#t;#e=!1;#i=null;#n;#r;#s;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:n=null,isPinchingStopped:s=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#i=s,this.#n=n,this.#r=a,this.#s=o,this.#a=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Cn.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},d=p=>{p.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(ee(p),d(p))},u),l.addEventListener("pointerup",d,u),l.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),l);const u=this.#p.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",ee,l),o.addEventListener("pointermove",ee,l),o.addEventListener("pointercancel",ee,l),o.addEventListener("pointerup",ee,l),this.#r?.()}if(ee(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[n,s]=t.touches;n.identifier>s.identifier&&([n,s]=[s,n]),this.#l={touch0X:n.screenX,touch0Y:n.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ee(t);let[n,s]=t.touches;n.identifier>s.identifier&&([n,s]=[s,n]);const{screenX:a,screenY:o}=n,{screenX:l,screenY:u}=s,d=this.#l,{touch0X:p,touch0Y:g,touch1X:y,touch1Y:b}=d,A=y-p,E=b-g,S=l-a,_=u-o,w=Math.hypot(S,_)||1,T=Math.hypot(A,E)||1;if(!this.#e&&Math.abs(T-w)<=qr.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=l,d.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(a+l)/2,(o+u)/2];this.#s?.(C,T,w)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(ee(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ct{#t=null;#e=null;#i=null;#n=null;#r=null;#s=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#y=!1;#v=!1;#b=null;#x=0;#w=0;#A=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#_=ct._zIndex++;static _borderLineWidth=-1;static _colorManager=new td;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ct.prototype._resizeWithKeyboard,n=di.TRANSLATE_SMALL,s=di.TRANSLATE_BIG;return wt(this,"_resizerKeyboardManager",new Vr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ct.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:n,rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[o,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return wt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const n=new FS({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});n.annotationElementId=t.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(t,n){if(ct._l10n??=t,ct._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ct._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ct._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,n){Xt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(t){this.#E=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(t*2),this.y+=this.width*t/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(t*2),this.y-=this.width*t/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,n,s,a){const[o,l]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(t+s)/o,this.y=(n+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,n){const[s,a]=this.parentDimensions;this.setAt(t*s,n*a,this.width*s,this.height*a),this._onTranslated()}#D([t,n],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/t,this.y+=a/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,n){this.#D(this.parentDimensions,t,n)}translateInPage(t,n){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,n){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=n/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,p]=this.getBaseTranslation();l+=d,u+=p;const{style:g}=s;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,n){}_onTranslated(t,n){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,n]=this.parentDimensions,{_borderLineWidth:s}=ct,a=s/t,o=s/n;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:n},pageDimensions:[s,a]}=this;let{x:o,y:l,width:u,height:d}=this;if(u*=s,d*=a,o*=s,l*=a,this._mustFixPosition)switch(t){case 0:o=De(o,0,s-u),l=De(l,0,a-d);break;case 90:o=De(o,0,s-d),l=De(l,u,a);break;case 180:o=De(o,u,s),l=De(l,d,a);break;case 270:o=De(o,d,s),l=De(l,0,a-u);break}this.x=o/=s,this.y=l/=a;const[p,g]=this.getBaseTranslation();o+=p,l+=g,n.left=`${(100*o).toFixed(2)}%`,n.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#R(t,n,s){switch(s){case 90:return[n,-t];case 180:return[-t,-n];case 270:return[-n,t];default:return[t,n]}}screenToPageTranslation(t,n){return ct.#R(t,n,this.parentRotation)}pageTranslationToScreen(t,n){return ct.#R(t,n,360-this.parentRotation)}#M(t){switch(t){case 90:{const[n,s]=this.pageDimensions;return[0,-n/s,s/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,s]=this.pageDimensions;return[0,n/s,-s/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[n,s]}=this;return[n*t,s*t]}setDims(){const{div:{style:t},width:n,height:s}=this;t.width=`${(100*n).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const s of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",this.#O.bind(this,s),{signal:n}),a.addEventListener("contextmenu",on,{signal:n}),a.tabIndex=-1}this.div.prepend(this.#c)}#O(t,n){n.preventDefault();const{isMac:s}=Se.platform;if(n.button!==0||n.ctrlKey&&s)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[n.screenX,n.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",ee,{passive:!1,signal:l}),window.addEventListener("contextmenu",on,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const p=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#F()};window.addEventListener("pointerup",p,{signal:l}),window.addEventListener("blur",p,{signal:l})}#k(t,n,s,a){this.width=s,this.height=a,this.x=t,this.y=n,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:n,savedWidth:s,savedHeight:a}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,d=this.height;o===t&&l===n&&u===s&&d===a||this.addCommands({cmd:this.#k.bind(this,o,l,u,d),undo:this.#k.bind(this,t,n,s,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,n){const[s,a]=this.parentDimensions,o=this.x,l=this.y,u=this.width,d=this.height,p=ct.MIN_SIZE/s,g=ct.MIN_SIZE/a,y=this.#M(this.rotation),b=(k,j)=>[y[0]*k+y[2]*j,y[1]*k+y[3]*j],A=this.#M(360-this.rotation),E=(k,j)=>[A[0]*k+A[2]*j,A[1]*k+A[3]*j];let S,_,w=!1,T=!1;switch(t){case"topLeft":w=!0,S=(k,j)=>[0,0],_=(k,j)=>[k,j];break;case"topMiddle":S=(k,j)=>[k/2,0],_=(k,j)=>[k/2,j];break;case"topRight":w=!0,S=(k,j)=>[k,0],_=(k,j)=>[0,j];break;case"middleRight":T=!0,S=(k,j)=>[k,j/2],_=(k,j)=>[0,j/2];break;case"bottomRight":w=!0,S=(k,j)=>[k,j],_=(k,j)=>[0,0];break;case"bottomMiddle":S=(k,j)=>[k/2,j],_=(k,j)=>[k/2,0];break;case"bottomLeft":w=!0,S=(k,j)=>[0,j],_=(k,j)=>[k,0];break;case"middleLeft":T=!0,S=(k,j)=>[0,j/2],_=(k,j)=>[k,j/2];break}const C=S(u,d),O=_(u,d);let M=b(...O);const P=ct._round(o+M[0]),B=ct._round(l+M[1]);let I=1,q=1,Q,Z;if(n.fromKeyboard)({deltaX:Q,deltaY:Z}=n);else{const{screenX:k,screenY:j}=n,[J,dt]=this.#l;[Q,Z]=this.screenToPageTranslation(k-J,j-dt),this.#l[0]=k,this.#l[1]=j}if([Q,Z]=E(Q/s,Z/a),w){const k=Math.hypot(u,d);I=q=Math.max(Math.min(Math.hypot(O[0]-C[0]-Q,O[1]-C[1]-Z)/k,1/u,1/d),p/u,g/d)}else T?I=De(Math.abs(O[0]-C[0]-Q),p,1)/u:q=De(Math.abs(O[1]-C[1]-Z),g,1)/d;const ut=ct._round(u*I),ft=ct._round(d*q);M=b(..._(ut,ft));const at=P-M[0],gt=B-M[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ut,this.height=ft,this.x=at,this.y=gt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Mr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[n,s]of t)await this._editToolbar.addButton(n,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const n=this._editToolbar?.div;n?n.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Fn.initialize(ct._l10n),this.#i=new Fn(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new gl(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:n,date:s,deleted:a}}=this.#n;return{text:n,richText:t,date:s,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new gl(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:n,richText:s}){if(!n||(this.#n||=new gl(this),this.#n.setInitialText(t,s),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new gl(this),this.#n.edit(t)}toggleComment(t,n=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,n)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,d=a-100,p=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,p,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:n}}){this.#n.data=n?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#I();const[n,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/n).toFixed(2)}%`,t.style.maxHeight=`${(100*n/s).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),zy(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new qr({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,n,s){let o=.7*(s/n)+1-.7;if(o===1)return;const l=this.#M(this.rotation),u=(P,B)=>[l[0]*P+l[2]*B,l[1]*P+l[3]*B],[d,p]=this.parentDimensions,g=this.x,y=this.y,b=this.width,A=this.height,E=ct.MIN_SIZE/d,S=ct.MIN_SIZE/p;o=Math.max(Math.min(o,1/b,1/A),E/b,S/A);const _=ct._round(b*o),w=ct._round(A*o);if(_===b&&w===A)return;this.#u||=[g,y,b,A];const T=u(b/2,A/2),C=ct._round(g+T[0]),O=ct._round(y+T[1]),M=u(_/2,w/2);this.x=C-M[0],this.y=O-M[1],this.width=_,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:n}=Se.platform;if(t.button!==0||t.ctrlKey&&n){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#U(t);return}this.#N(t)}#N(t){const{isMac:n}=Se.platform;t.ctrlKey&&!n||t.shiftKey||t.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:n}=this;this._uiManager.setUpDragSession();let s=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},u=p=>{a.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#N(p),s&&this._onStopDragging()};n&&(this.#x=t.clientX,this.#w=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",p=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=p;if(b!==this.#a){ee(p);return}const[A,E]=this.screenToPageTranslation(g-this.#x,y-this.#w);this.#x=g,this.#w=y,this._uiManager.dragSelectedEditors(A,E)},l),window.addEventListener("touchmove",ee,l),window.addEventListener("pointerdown",p=>{p.pointerType===this.#o&&(this.#C||p.isPrimary)&&u(p),ee(p)},l));const d=p=>{if(!this.#a||this.#a===p.pointerId){u(p);return}ee(p)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,n,s){t.changeParent(this),this.x=n,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,n,s=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[u,d]=this.pageTranslation,p=t/a,g=n/a,y=this.x*o,b=this.y*l,A=this.width*o,E=this.height*l;switch(s){case 0:return[y+p+u,l-b-g-E+d,y+p+A+u,l-b-g+d];case 90:return[y+g+u,l-b+p+d,y+g+E+u,l-b+p+A+d];case 180:return[y-p-A+u,l-b+g+d,y-p+u,l-b+g+E+d];case 270:return[y-g-E+u,l-b-p-A+d,y-g+u,l-b-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,n){const[s,a,o,l]=t,u=o-s,d=l-a;switch(this.rotation){case 0:return[s,n-l,u,d];case 90:return[s,n-a,d,u];case 180:return[o,n-a,u,d];case 270:return[o,n-l,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ct._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:n,date:s,opacity:a,deleted:o,richText:l},uid:u,pageIndex:d,creationDate:p,modificationDate:g}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:p,modificationDate:s||g,popupRef:!o,color:n,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:n,bottom:s,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return n<l&&a>0&&t<o&&s>0}#I(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#I()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,n=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,n,s){const a=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[u,d,p,g]=a.getRectInCurrentCoords(t.rect,l);return a.x=u/o,a.y=d/l,a.width=p/o,a.height=g/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#C?.destroy(),this.#C=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,n]}=this,[s,a,o,l]=this.getPDFRect();return[ct._round(s+(o-s)*t),ct._round(a+(l-a)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#c.children;if(!this.#e){this.#e=Array.from(n);const l=this.#Y.bind(this),u=this.#X.bind(this),d=this._uiManager._signal;for(const p of this.#e){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",l,{signal:d}),p.addEventListener("blur",u,{signal:d}),p.addEventListener("focus",this.#$.bind(this,g),{signal:d}),p.setAttribute("data-l10n-id",ct._l10nResizer[g])}}const s=this.#e[0];let a=0;for(const l of n){if(l===s)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)this.#c.append(this.#c.firstChild);else if(o>a)for(let u=0;u<o-a;u++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const u of n){const p=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ct._l10nResizer[p])}}this.#j(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){ct._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#$(t){this.#m=this.#v?t:""}#j(t){if(this.#e)for(const n of this.#e)n.tabIndex=t}_resizeWithKeyboard(t,n){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:n,fromKeyboard:!0})}#P(){this.#v=!1,this.#j(-1),this.#F()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,n=!1){if(n){this.#A||=new Map;const{action:s}=t;let a=this.#A.get(s);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(s),this.#A.size===0&&(this.#A=null)},ct._telemetryTimeout),this.#A.set(s,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let n=t.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),t.container.prepend(n);else if(n.nodeName==="CANVAS"){const s=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),s.before(n)}return n}resetAnnotationElement(t){const{firstChild:n}=t.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class FS extends ct{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Bm=3285377520,bn=4294901760,Pn=65535;class Fy{constructor(t){this.h1=t?t&4294967295:Bm,this.h2=t?t&4294967295:Bm}update(t){let n,s;if(typeof t=="string"){n=new Uint8Array(t.length*2),s=0;for(let S=0,_=t.length;S<_;S++){const w=t.charCodeAt(S);w<=255?n[s++]=w:(n[s++]=w>>>8,n[s++]=w&255)}}else if(ArrayBuffer.isView(t))n=t.slice(),s=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=s>>2,o=s-a*4,l=new Uint32Array(n.buffer,0,a);let u=0,d=0,p=this.h1,g=this.h2;const y=3432918353,b=461845907,A=y&Pn,E=b&Pn;for(let S=0;S<a;S++)S&1?(u=l[S],u=u*y&bn|u*A&Pn,u=u<<15|u>>>17,u=u*b&bn|u*E&Pn,p^=u,p=p<<13|p>>>19,p=p*5+3864292196):(d=l[S],d=d*y&bn|d*A&Pn,d=d<<15|d>>>17,d=d*b&bn|d*E&Pn,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=n[a*4+2]<<16;case 2:u^=n[a*4+1]<<8;case 1:u^=n[a*4],u=u*y&bn|u*A&Pn,u=u<<15|u>>>17,u=u*b&bn|u*E&Pn,a&1?p^=u:g^=u}this.h1=p,this.h2=g}hexdigest(){let t=this.h1,n=this.h2;return t^=n>>>1,t=t*3981806797&bn|t*36045&Pn,n=n*4283543511&bn|((n<<16|t>>>16)*2950163797&bn)>>>16,t^=n>>>1,t=t*444984403&bn|t*60499&Pn,n=n*3301882366&bn|((n<<16|t>>>16)*3120437893&bn)>>>16,t^=n>>>1,(t>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const Dh=Object.freeze({map:null,hash:"",transfer:void 0});class ed{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,n){const s=this.#n.get(t);return s===void 0?n:Object.assign(n,s)}getRawValue(t){return this.#n.get(t)}remove(t){const n=this.#n.get(t);if(n!==void 0&&(n instanceof ct&&this.#i.delete(n.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#n.values())if(s instanceof ct)return;this.onAnnotationEditor(null)}}setValue(t,n){const s=this.#n.get(t);let a=!1;if(s!==void 0)for(const[o,l]of Object.entries(n))s[o]!==l&&(a=!0,s[o]=l);else a=!0,this.#n.set(t,n);a&&this.#r(),n instanceof ct&&((this.#i||=new Map).set(n.annotationElementId,n),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Uy(this)}get serializable(){if(this.#n.size===0)return Dh;const t=new Map,n=new Fy,s=[],a=Object.create(null);let o=!1;for(const[l,u]of this.#n){const d=u instanceof ct?u.serialize(!1,a):u;d&&(t.set(l,d),n.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&s.push(l.bitmap);return t.size>0?{map:t,hash:n.hexdigest(),transfer:s}:Dh}get editorStats(){let t=null;const n=new Map;let s=0,a=0;for(const o of this.#n.values()){if(!(o instanceof ct)){o.popup&&(o.popup.deleted?a+=1:s+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(s+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;n.has(u)||n.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[p,g]of Object.entries(l)){if(p==="type")continue;let y=d.get(p);y||(y=new Map,d.set(p,y));const b=y.get(g)??0;y.set(g,b+1)}}if((a>0||s>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:s}),!t)return null;for(const[o,l]of n)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,n){const s=this.#i?.get(t);return s?(s.updateFromAnnotationLayer(n),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const n of this.#i.values())n.serialize()&&t.push(n.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Uy extends ed{#t;constructor(t){super();const{map:n,hash:s,transfer:a}=t.serializable,o=structuredClone(n,a?{transfer:a}:null);this.#t={map:o,hash:s,transfer:a}}get print(){Xt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return wt(this,"modifiedIds",{ids:new Set,hash:""})}}class US{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:n=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(t,n.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:n,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Lt(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,u=new FontFace(a,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(a),s?.(t)}catch{vt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Xt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(a){throw vt(`Failed to load font '${s.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const n=t.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const a=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return wt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return wt(this,"isSyncFontLoadingSupported",ke||Se.platform.isFirefox)}_queueLoadingCallback(t){function n(){for(Lt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,a={done:!1,complete:n,callback:t};return s.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return wt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,n){function s(O,M){return O.charCodeAt(M)<<24|O.charCodeAt(M+1)<<16|O.charCodeAt(M+2)<<8|O.charCodeAt(M+3)&255}function a(O,M,P,B){const I=O.substring(0,M),q=O.substring(M+P);return I+B+q}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let p=0;function g(O,M){if(++p>30){vt("Load test font never loaded."),M();return}if(d.font="30px "+O,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(g.bind(null,O,M))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const E=16,S=1482184792;let _=s(b,E);for(o=0,l=y.length-3;o<l;o+=4)_=_-S+s(y,o)|0;o<y.length&&(_=_-S+s(y+"XXX",o)|0),b=a(b,E,4,TS(_));const w=`url(data:font/opentype;base64,${btoa(b)});`,T=`@font-face {font-family:"${y}";src:${w}}`;this.insertRule(T);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const O of[t.loadedName,y]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=O,C.append(M)}this._document.body.append(C),g(y,()=>{C.remove(),n.complete()})}}class HS{#t;constructor(t,n=null,s,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=n,s&&Object.assign(this,s),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Dy(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),n}getPathGenerator(t,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const s=this.loadedName+"_path_"+n;let a;try{a=t.get(s)}catch(l){vt(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[n]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function IS(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(ke)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function jS(h){if(ke&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return Ir(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ml(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const Lh=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,GS=h=>typeof h=="object"&&typeof h?.name=="string",Hy=DS.bind(null,Lh,GS);class VS{#t=new Map;#e=Promise.resolve();postMessage(t,n){const s={data:structuredClone(t,n?{transfer:n}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,s)})}addEventListener(t,n,s=null){let a=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){vt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,n);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(n,a)}removeEventListener(t,n){this.#t.get(n)?.(),this.#t.delete(n)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const yl={DATA:1,ERROR:2},ge={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Pm(){}function qe(h){if(h instanceof hi||h instanceof Ml||h instanceof Rm||h instanceof Or||h instanceof yh)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||Xt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new hi(h.message);case"InvalidPDFException":return new Ml(h.message);case"PasswordException":return new Rm(h.message,h.code);case"ResponseException":return new Or(h.message,h.status,h.missing);case"UnknownErrorException":return new yh(h.message,h.details)}return new yh(h.message,h.toString())}class Tr{#t=new AbortController;constructor(t,n,s){this.sourceName=t,this.targetName=n,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const s=t.callbackId,a=this.callbackCapabilities[s];if(!a)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===yl.DATA)a.resolve(t.data);else if(t.callback===yl.ERROR)a.reject(qe(t.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(n,t.data).then(function(l){o.postMessage({sourceName:s,targetName:a,callback:yl.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:a,callback:yl.ERROR,callbackId:t.callbackId,reason:qe(l)})});return}if(t.streamId){this.#i(t);return}n(t.data)}on(t,n){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=n}send(t,n,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:n},s)}sendWithPromise(t,n,s){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:n},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,n,s,a){const o=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:n,desiredSize:p.desiredSize},a),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:u,stream:ge.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{Lt(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:ge.CANCEL,streamId:o,reason:qe(p)}),g.promise}},s)}#i(t){const n=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(p,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:a,stream:ge.ENQUEUE,streamId:n,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:ge.CLOSE,streamId:n}),delete l.streamSinks[n])},error(p){Lt(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:ge.ERROR,streamId:n,reason:qe(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[n]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:ge.START_COMPLETE,streamId:n,success:!0})},function(p){o.postMessage({sourceName:s,targetName:a,stream:ge.START_COMPLETE,streamId:n,reason:qe(p)})})}#n(t){const n=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[n],u=this.streamSinks[n];switch(t.stream){case ge.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(qe(t.reason));break;case ge.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(qe(t.reason));break;case ge.PULL:if(!u){o.postMessage({sourceName:s,targetName:a,stream:ge.PULL_COMPLETE,streamId:n,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Pm).then(function(){o.postMessage({sourceName:s,targetName:a,stream:ge.PULL_COMPLETE,streamId:n,success:!0})},function(p){o.postMessage({sourceName:s,targetName:a,stream:ge.PULL_COMPLETE,streamId:n,reason:qe(p)})});break;case ge.ENQUEUE:if(Lt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ge.CLOSE:if(Lt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,n);break;case ge.ERROR:Lt(l,"error should have stream controller"),l.controller.error(qe(t.reason)),this.#r(l,n);break;case ge.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(qe(t.reason)),this.#r(l,n);break;case ge.CANCEL:if(!u)break;const d=qe(t.reason);Promise.try(u.onCancel||Pm,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:ge.CANCEL_COMPLETE,streamId:n,success:!0})},function(p){o.postMessage({sourceName:s,targetName:a,stream:ge.CANCEL_COMPLETE,streamId:n,reason:qe(p)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#r(t,n){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#t?.abort(),this.#t=null}}class Iy{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,n){if(t<=0||n<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,n);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,n,s){if(!t.canvas)throw new Error("Canvas is not specified");if(n<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=n,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,n){Xt("Abstract method `_createCanvas` called.")}}class qS extends Iy{constructor({ownerDocument:t=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=t}_createCanvas(t,n){const s=this._document.createElement("canvas");return s.width=t,s.height=n,s}}class jy{constructor({baseUrl:t=null,isCompressed:n=!0}){this.baseUrl=t,this.isCompressed=n}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(t){Xt("Abstract method `_fetch` called.")}}class zm extends jy{async _fetch(t){const n=await wa(t,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):Ir(n)}}class Gy{addFilter(t){return"none"}addHCMFilter(t,n){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,n,s,a,o){return"none"}destroy(t=!1){}}class XS extends Gy{#t;#e;#i;#n;#r;#s;#a=0;constructor({docId:t,ownerDocument:n=globalThis.document}){super(),this.#n=t,this.#r=n}get#o(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=this.#r.createElementNS(oi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#i=this.#r.createElementNS(oi,"defs"),t.append(s),s.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],p=new Array(256);for(let y=0;y<256;y++)p[y]=d[y]/255;const g=p.join(",");return[g,g,g]}const[n,s,a]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=n[d]/255,l[d]=s[d]/255,u[d]=a[d]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const n=this.#r.URL;n!==this.#r.baseURI&&(Gr(n)?vt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=$h(n,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let n=this.#o.get(t);if(n)return n;const[s,a,o]=this.#d(t),l=t.length===1?s:`${s}${a}${o}`;if(n=this.#o.get(l),n)return this.#o.set(t,n),n;const u=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(l,d);const p=this.#p(u);return this.#g(s,a,o,p),d}addHCMFilter(t,n){const s=`${t}-${n}`,a="base";let o=this.#c.get(a);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(a,o)),!t||!n))return o.url;const l=this.#v(t);t=nt.makeHexColor(...l);const u=this.#v(n);if(n=nt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const E=A/255;d[A]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const p=d.join(","),g=`g_${this.#n}_hcm_filter`,y=o.filter=this.#p(g);this.#g(p,p,p,y),this.#m(y);const b=(A,E)=>{const S=l[A]/255,_=u[A]/255,w=new Array(E+1);for(let T=0;T<=E;T++)w[T]=S+T/E*(_-S);return w.join(",")};return this.#g(b(0,5),b(1,5),b(2,5),y),o.url=this.#h(g),o.url}addAlphaFilter(t){let n=this.#o.get(t);if(n)return n;const[s]=this.#d([t]),a=`alpha_${s}`;if(n=this.#o.get(a),n)return this.#o.set(t,n),n;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#p(o);return this.#y(s,u),l}addLuminosityFilter(t){let n=this.#o.get(t||"luminosity");if(n)return n;let s,a;if(t?([s]=this.#d([t]),a=`luminosity_${s}`):a="luminosity",n=this.#o.get(a),n)return this.#o.set(t,n),n;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#p(o);return this.#f(u),t&&this.#y(s,u),l}addHighlightHCMFilter(t,n,s,a,o){const l=`${n}-${s}-${a}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!n||!s))return u.url;const[d,p]=[n,s].map(this.#v.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[b,A]=[a,o].map(this.#v.bind(this));y<g&&([g,y,b,A]=[y,g,A,b]),this.#l.style.color="";const E=(w,T,C)=>{const O=new Array(256),M=(y-g)/C,P=w/255,B=(T-w)/(255*C);let I=0;for(let q=0;q<=C;q++){const Q=Math.round(g+q*M),Z=P+q*B;for(let ut=I;ut<=Q;ut++)O[ut]=Z;I=Q+1}for(let q=I;q<256;q++)O[q]=O[I-1];return O.join(",")},S=`g_${this.#n}_hcm_${t}_filter`,_=u.filter=this.#p(S);return this.#m(_),this.#g(E(b[0],A[0],5),E(b[1],A[1],5),E(b[2],A[2],5),_),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#f(t){const n=this.#r.createElementNS(oi,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)}#m(t){const n=this.#r.createElementNS(oi,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)}#p(t){const n=this.#r.createElementNS(oi,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),this.#l.append(n),n}#u(t,n,s){const a=this.#r.createElementNS(oi,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),t.append(a)}#g(t,n,s,a){const o=this.#r.createElementNS(oi,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",n),this.#u(o,"feFuncB",s)}#y(t,n){const s=this.#r.createElementNS(oi,"feComponentTransfer");n.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,_a(getComputedStyle(this.#l).getPropertyValue("color"))}}class Vy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(t){Xt("Abstract method `_fetch` called.")}}class Fm extends Vy{async _fetch(t){const n=await wa(t,"arraybuffer");return new Uint8Array(n)}}class qy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetch(n).catch(s=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(t){Xt("Abstract method `_fetch` called.")}}class Um extends qy{async _fetch(t){const n=await wa(t,"arraybuffer");return new Uint8Array(n)}}ke&&vt("Please use the `legacy` build in Node.js environments.");async function nd(h){const n=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(n)}class YS extends Gy{}class $S extends Iy{_createCanvas(t,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,n)}}class KS extends jy{async _fetch(t){return nd(t)}}class WS extends Vy{async _fetch(t){return nd(t)}}class QS extends qy{async _fetch(t){return nd(t)}}const oa="__forcedDependency",{floor:Hm,ceil:Im}=Math;function bl(h,t,n,s,a,o){h[t*4+0]=Math.min(h[t*4+0],n),h[t*4+1]=Math.min(h[t*4+1],s),h[t*4+2]=Math.max(h[t*4+2],a),h[t*4+3]=Math.max(h[t*4+3],o)}const Oh=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class ZS{#t;#e;constructor(t,n){this.#t=t,this.#e=n}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Oh}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const vl=(h,t)=>{if(!h)return;let n=h.get(t);return n||(n={dependencies:new Set,isRenderingOperation:!1},h.set(t,n)),n};class JS{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[oa]:[]};#i=new Map;#n=[];#r=[];#s=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#p;#u;#g;constructor(t,n,s=!1){this.#f=t.width,this.#m=t.height,this.#y(n),s&&(this.#g=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,n){const s=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),n&&n.length>0?(this.#u.set(n),this.#u.fill(Oh,n.length)):this.#u.fill(Oh)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[oa]:{__proto__:this.#e[oa]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const n=Object.getPrototypeOf(this.#t);if(n===null)return this;this.#t=n,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const s=this.#n.pop();return s!==void 0&&(vl(this.#g,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const n=this.#n.pop();return n!==void 0&&(vl(this.#g,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const n=this.#r.pop();return n!==void 0&&(vl(this.#g,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}pushBaseTransform(t){return this.#s.push(nt.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,n){return this.#t[t]=n,this}recordIncrementalData(t,n){return this.#e[t].push(n),this}resetIncrementalData(t,n){return this.#e[t].length=0,this}recordNamedData(t,n){return this.#i.set(t,n),this}recordSimpleDataFromNamed(t,n,s){this.#t[t]=this.#i.get(n)??s}recordFutureForcedDependency(t,n){return this.recordIncrementalData(oa,n),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const n of t)n in this.#t&&this.recordFutureForcedDependency(n,this.#t[n]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(oa,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,n,s,a,o,l){const u=nt.multiplyByDOMMatrix(this.#s.at(-1),n.getTransform()),d=[1/0,1/0,-1/0,-1/0];nt.axialAlignedBoundingBox([s,o,a,l],u,d);const p=nt.intersect(this.#a,d);return p?(this.#a[0]=p[0],this.#a[1]=p[1],this.#a[2]=p[2],this.#a[3]=p[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,n,s,a,o,l){const u=this.#a;if(u[0]===1/0)return this;const d=nt.multiplyByDOMMatrix(this.#s.at(-1),n.getTransform());if(u[0]===-1/0)return nt.axialAlignedBoundingBox([s,o,a,l],d,this.#o),this;const p=[1/0,1/0,-1/0,-1/0];return nt.axialAlignedBoundingBox([s,o,a,l],d,p),this.#o[0]=Math.min(this.#o[0],Math.max(p[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(p[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(p[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(p[3],u[3])),this}recordCharacterBBox(t,n,s,a=1,o=0,l=0,u){const d=s.bbox;let p,g;if(d&&(p=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),p!==!1&&(g=[0,0,0,0],nt.axialAlignedBoundingBox(d,s.fontMatrix,g),(a!==1||o!==0||l!==0)&&nt.scaleMinMax([a,0,0,-a,o,l],g),p)))return this.recordBBox(t,n,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return d&&g&&p===void 0&&(p=g[0]<=o-y.actualBoundingBoxLeft&&g[2]>=o+y.actualBoundingBoxRight&&g[1]<=l-y.actualBoundingBoxAscent&&g[3]>=l+y.actualBoundingBoxDescent,this.#h.set(s,p),p)?this.recordBBox(t,n,g[0],g[2],g[1],g[3]):this.recordBBox(t,n,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,l-y.actualBoundingBoxAscent,l+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#m,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,n){const s=this.#l,a=this.#t,o=this.#e;for(const l of n)l in this.#t?s.add(a[l]):l in o&&o[l].forEach(s.add,s);return this}recordNamedDependency(t,n){return this.#i.has(n)&&this.#l.add(this.#i.get(n)),this}recordOperation(t,n=!1){if(this.recordDependencies(t,[oa]),this.#g){const s=vl(this.#g,t),{dependencies:a}=s;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=Hm(this.#o[0]*256/this.#f),a=Hm(this.#o[1]*256/this.#m),o=Im(this.#o[2]*256/this.#f),l=Im(this.#o[3]*256/this.#m);bl(this.#p,t,s,a,o,l);for(const u of this.#l)u!==t&&bl(this.#p,u,s,a,o,l);for(const u of this.#n)u!==t&&bl(this.#p,u,s,a,o,l);for(const u of this.#r)u!==t&&bl(this.#p,u,s,a,o,l);n||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,n=!1){const s=Array.from(this.#l);this.recordOperation(t,n),this.recordIncrementalData("sameLineText",t);for(const a of s)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,n=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),n||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const n=this.#d.get(t);return this.#d.delete(t),n}_pushPendingDependencies(t){for(const n of t)this.#l.add(n)}take(){return this.#h.clear(),new ZS(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class Ol{#t;#e;#i;#n=0;#r=0;constructor(t,n,s){if(t instanceof Ol&&t.#i===!!s)return t;this.#t=t,this.#e=n,this.#i=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,n){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,n){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,n){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,n){return this}recordSimpleDataFromNamed(t,n,s){return this.#t.recordSimpleDataFromNamed(t,n,this.#e),this}recordFutureForcedDependency(t,n){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,n,s,a,o,l){return this.#i||this.#t.recordClipBox(this.#e,n,s,a,o,l),this}recordBBox(t,n,s,a,o,l){return this.#i||this.#t.recordBBox(this.#e,n,s,a,o,l),this}recordCharacterBBox(t,n,s,a,o,l,u){return this.#i||this.#t.recordCharacterBBox(this.#e,n,s,a,o,l,u),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,n){return this.#t.recordDependencies(this.#e,n),this}recordNamedDependency(t,n){return this.#t.recordNamedDependency(this.#e,n),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const vn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Re={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Nh(h,t){if(!t)return;const n=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],n,s),h.clip(a)}class id{isModifyingCurrentTransform(){return!1}getPattern(){Xt("Abstract method `getPattern` called.")}}class tE extends id{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let n;this._type==="axial"?n=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)n.addColorStop(s[0],s[1]);return n}getPattern(t,n,s,a){let o;if(a===Re.STROKE||a===Re.FILL){const l=n.current.getClippedPathBoundingBox(a,te(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,p=n.cachedCanvases.getCanvas("pattern",u,d),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),s=nt.transform(s,[1,0,0,1,l[0],l[1]]),g.transform(...n.baseTransform),this.matrix&&g.transform(...this.matrix),Nh(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else Nh(t,this._bbox),o=this._createGradient(t);return o}}function Ah(h,t,n,s,a,o,l,u){const d=t.coords,p=t.colors,g=h.data,y=h.width*4;let b;d[n+1]>d[s+1]&&(b=n,n=s,s=b,b=o,o=l,l=b),d[s+1]>d[a+1]&&(b=s,s=a,a=b,b=l,l=u,u=b),d[n+1]>d[s+1]&&(b=n,n=s,s=b,b=o,o=l,l=b);const A=(d[n]+t.offsetX)*t.scaleX,E=(d[n+1]+t.offsetY)*t.scaleY,S=(d[s]+t.offsetX)*t.scaleX,_=(d[s+1]+t.offsetY)*t.scaleY,w=(d[a]+t.offsetX)*t.scaleX,T=(d[a+1]+t.offsetY)*t.scaleY;if(E>=T)return;const C=p[o],O=p[o+1],M=p[o+2],P=p[l],B=p[l+1],I=p[l+2],q=p[u],Q=p[u+1],Z=p[u+2],ut=Math.round(E),ft=Math.round(T);let at,gt,k,j,J,dt,At,D;for(let V=ut;V<=ft;V++){if(V<_){const ot=V<E?0:(E-V)/(E-_);at=A-(A-S)*ot,gt=C-(C-P)*ot,k=O-(O-B)*ot,j=M-(M-I)*ot}else{let ot;V>T?ot=1:_===T?ot=0:ot=(_-V)/(_-T),at=S-(S-w)*ot,gt=P-(P-q)*ot,k=B-(B-Q)*ot,j=I-(I-Z)*ot}let W;V<E?W=0:V>T?W=1:W=(E-V)/(E-T),J=A-(A-w)*W,dt=C-(C-q)*W,At=O-(O-Q)*W,D=M-(M-Z)*W;const tt=Math.round(Math.min(at,J)),rt=Math.round(Math.max(at,J));let ht=y*V+tt*4;for(let ot=tt;ot<=rt;ot++)W=(at-ot)/(at-J),W<0?W=0:W>1&&(W=1),g[ht++]=gt-(gt-dt)*W|0,g[ht++]=k-(k-At)*W|0,g[ht++]=j-(j-D)*W|0,g[ht++]=255}}function eE(h,t,n){const s=t.coords,a=t.colors;let o,l;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,p=u-1;for(o=0;o<d;o++){let g=o*u;for(let y=0;y<p;y++,g++)Ah(h,n,s[g],s[g+1],s[g+u],a[g],a[g+1],a[g+u]),Ah(h,n,s[g+u+1],s[g+1],s[g+u],a[g+u+1],a[g+1],a[g+u])}break;case"triangles":for(o=0,l=s.length;o<l;o+=3)Ah(h,n,s[o],s[o+1],s[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class nE extends id{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,n,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=p/y,E=g/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/E},_=y+4,w=b+4,T=s.getCanvas("mesh",_,w),C=T.context,O=C.createImageData(y,b);if(n){const P=O.data;for(let B=0,I=P.length;B<I;B+=4)P[B]=n[0],P[B+1]=n[1],P[B+2]=n[2],P[B+3]=255}for(const P of this._figures)eE(O,P,S);return C.putImageData(O,2,2),{canvas:T.canvas,offsetX:u-2*A,offsetY:d-2*E,scaleX:A,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(t,n,s,a){Nh(t,this._bbox);const o=new Float32Array(2);if(a===Re.SHADING)nt.singularValueDecompose2dScale(te(t),o);else if(this.matrix){nt.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;nt.singularValueDecompose2dScale(n.baseTransform,o),o[0]*=u,o[1]*=d}else nt.singularValueDecompose2dScale(n.baseTransform,o);const l=this._createMeshCanvas(o,a===Re.SHADING?null:this._background,n.cachedCanvases);return a!==Re.SHADING&&(t.setTransform(...n.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class iE extends id{getPattern(){return"hotpink"}}function sE(h){switch(h[0]){case"RadialAxial":return new tE(h);case"Mesh":return new nE(h);case"Dummy":return new iE}throw new Error(`Unknown IR type: ${h[0]}`)}const jm={COLORED:1,UNCOLORED:2};class sd{static MAX_PATTERN_SIZE=3e3;constructor(t,n,s,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t,n){const{bbox:s,operatorList:a,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:d}=this;let{xstep:p,ystep:g}=this;p=Math.abs(p),g=Math.abs(g),zl("TilingType: "+l);const y=s[0],b=s[1],A=s[2],E=s[3],S=A-y,_=E-b,w=new Float32Array(2);nt.singularValueDecompose2dScale(this.matrix,w);const[T,C]=w;nt.singularValueDecompose2dScale(this.baseTransform,w);const O=T*w[0],M=C*w[1];let P=S,B=_,I=!1,q=!1;const Q=Math.ceil(p*O),Z=Math.ceil(g*M),ut=Math.ceil(S*O),ft=Math.ceil(_*M);Q>=ut?P=p:I=!0,Z>=ft?B=g:q=!0;const at=this.getSizeAndScale(P,this.ctx.canvas.width,O),gt=this.getSizeAndScale(B,this.ctx.canvas.height,M),k=t.cachedCanvases.getCanvas("pattern",at.size,gt.size),j=k.context,J=d.createCanvasGraphics(j,n);if(J.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(J,o,u),j.translate(-at.scale*y,-gt.scale*b),J.transform(0,at.scale,0,0,gt.scale,0,0),j.save(),J.dependencyTracker?.save(),this.clipBbox(J,y,b,A,E),J.baseTransform=te(J.ctx),J.executeOperatorList(a),J.endDrawing(),J.dependencyTracker?.restore(),j.restore(),I||q){const dt=k.canvas;I&&(P=p),q&&(B=g);const At=this.getSizeAndScale(P,this.ctx.canvas.width,O),D=this.getSizeAndScale(B,this.ctx.canvas.height,M),V=At.size,W=D.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",V,W),rt=tt.context,ht=I?Math.floor(S/p):0,ot=q?Math.floor(_/g):0;for(let Yt=0;Yt<=ht;Yt++)for(let _t=0;_t<=ot;_t++)rt.drawImage(dt,V*Yt,W*_t,V,W,0,0,V,W);return{canvas:tt.canvas,scaleX:At.scale,scaleY:D.scale,offsetX:y,offsetY:b}}return{canvas:k.canvas,scaleX:at.scale,scaleY:gt.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,n,s){const a=Math.max(sd.MAX_PATTERN_SIZE,n);let o=Math.ceil(t*s);return o>=a?o=a:s=o/t,{scale:s,size:o}}clipBbox(t,n,s,a,o){const l=a-n,u=o-s;t.ctx.rect(n,s,l,u),nt.axialAlignedBoundingBox([n,s,a,o],te(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,n,s){const a=t.ctx,o=t.current;switch(n){case jm.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=u;break;case jm.UNCOLORED:a.fillStyle=a.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new xS(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,n,s,a,o){let l=s;a!==Re.SHADING&&(l=nt.transform(l,n.baseTransform),this.matrix&&(l=nt.transform(l,this.matrix)));const u=this.createPatternCanvas(n,o);let d=new DOMMatrix(l);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const p=t.createPattern(u.canvas,"repeat");return p.setTransform(d),p}}function aE({src:h,srcPos:t=0,dest:n,width:s,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=Se.isLittleEndian?4278190080:255,[d,p]=l?[o,u]:[u,o],g=s>>3,y=s&7,b=h.length;n=new Uint32Array(n.buffer);let A=0;for(let E=0;E<a;E++){for(const _=t+g;t<_;t++){const w=t<b?h[t]:255;n[A++]=w&128?p:d,n[A++]=w&64?p:d,n[A++]=w&32?p:d,n[A++]=w&16?p:d,n[A++]=w&8?p:d,n[A++]=w&4?p:d,n[A++]=w&2?p:d,n[A++]=w&1?p:d}if(y===0)continue;const S=t<b?h[t++]:255;for(let _=0;_<y;_++)n[A++]=S&1<<7-_?p:d}return{srcPos:t,destPos:A}}const Gm=16,Vm=100,rE=15,qm=10,Xe=16,Sh=new DOMMatrix,rn=new Float32Array(2),ua=new Float32Array([1/0,1/0,-1/0,-1/0]);function oE(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},h.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},h.transform=function(n,s,a,o,l,u){t.transform(n,s,a,o,l,u),this.__originalTransform(n,s,a,o,l,u)},h.setTransform=function(n,s,a,o,l,u){t.setTransform(n,s,a,o,l,u),this.__originalSetTransform(n,s,a,o,l,u)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(n){t.rotate(n),this.__originalRotate(n)},h.clip=function(n){t.clip(n),this.__originalClip(n)},h.moveTo=function(n,s){t.moveTo(n,s),this.__originalMoveTo(n,s)},h.lineTo=function(n,s){t.lineTo(n,s),this.__originalLineTo(n,s)},h.bezierCurveTo=function(n,s,a,o,l,u){t.bezierCurveTo(n,s,a,o,l,u),this.__originalBezierCurveTo(n,s,a,o,l,u)},h.rect=function(n,s,a,o){t.rect(n,s,a,o),this.__originalRect(n,s,a,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class lE{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,n,s){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,n,s)):(a=this.canvasFactory.create(n,s),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const n=this.cache[t];this.canvasFactory.destroy(n),delete this.cache[t]}}}function Al(h,t,n,s,a,o,l,u,d,p){const[g,y,b,A,E,S]=te(h);if(y===0&&b===0){const T=l*g+E,C=Math.round(T),O=u*A+S,M=Math.round(O),P=(l+d)*g+E,B=Math.abs(Math.round(P)-C)||1,I=(u+p)*A+S,q=Math.abs(Math.round(I)-M)||1;return h.setTransform(Math.sign(g),0,0,Math.sign(A),C,M),h.drawImage(t,n,s,a,o,0,0,B,q),h.setTransform(g,y,b,A,E,S),[B,q]}if(g===0&&A===0){const T=u*b+E,C=Math.round(T),O=l*y+S,M=Math.round(O),P=(u+p)*b+E,B=Math.abs(Math.round(P)-C)||1,I=(l+d)*y+S,q=Math.abs(Math.round(I)-M)||1;return h.setTransform(0,Math.sign(y),Math.sign(b),0,C,M),h.drawImage(t,n,s,a,o,0,0,q,B),h.setTransform(g,y,b,A,E,S),[q,B]}h.drawImage(t,n,s,a,o,l,u,d,p);const _=Math.hypot(g,y),w=Math.hypot(b,A);return[_*d,w*p]}class Xm{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Rh;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ce.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,n,s){s?.(this),this.clipBox=new Float32Array([0,0,t,n]),this.minMax=ua.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Re.FILL,n=null){const s=this.minMax.slice();if(t===Re.STROKE){n||Xt("Stroke bounding box must include transform."),nt.singularValueDecompose2dScale(n,rn);const a=rn[0]*this.lineWidth/2,o=rn[1]*this.lineWidth/2;s[0]-=a,s[1]-=o,s[2]+=a,s[3]+=o}return s}updateClipFromPath(){const t=nt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ua,0)}getClippedPathBoundingBox(t=Re.FILL,n=null){return nt.intersect(this.clipBox,this.getPathBoundingBox(t,n))}}function Ym(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const n=t.height,s=t.width,a=n%Xe,o=(n-a)/Xe,l=a===0?o:o+1,u=h.createImageData(s,Xe);let d=0,p;const g=t.data,y=u.data;let b,A,E,S;if(t.kind===Rr.GRAYSCALE_1BPP){const _=g.byteLength,w=new Uint32Array(y.buffer,0,y.byteLength>>2),T=w.length,C=s+7>>3,O=4294967295,M=Se.isLittleEndian?4278190080:255;for(b=0;b<l;b++){for(E=b<o?Xe:a,p=0,A=0;A<E;A++){const P=_-d;let B=0;const I=P>C?s:P*8-7,q=I&-8;let Q=0,Z=0;for(;B<q;B+=8)Z=g[d++],w[p++]=Z&128?O:M,w[p++]=Z&64?O:M,w[p++]=Z&32?O:M,w[p++]=Z&16?O:M,w[p++]=Z&8?O:M,w[p++]=Z&4?O:M,w[p++]=Z&2?O:M,w[p++]=Z&1?O:M;for(;B<I;B++)Q===0&&(Z=g[d++],Q=128),w[p++]=Z&Q?O:M,Q>>=1}for(;p<T;)w[p++]=0;h.putImageData(u,0,b*Xe)}}else if(t.kind===Rr.RGBA_32BPP){for(A=0,S=s*Xe*4,b=0;b<o;b++)y.set(g.subarray(d,d+S)),d+=S,h.putImageData(u,0,A),A+=Xe;b<l&&(S=s*a*4,y.set(g.subarray(d,d+S)),h.putImageData(u,0,A))}else if(t.kind===Rr.RGB_24BPP)for(E=Xe,S=s*E,b=0;b<l;b++){for(b>=o&&(E=a,S=s*E),p=0,A=S;A--;)y[p++]=g[d++],y[p++]=g[d++],y[p++]=g[d++],y[p++]=255;h.putImageData(u,0,b*Xe)}else throw new Error(`bad image kind: ${t.kind}`)}function $m(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const n=t.height,s=t.width,a=n%Xe,o=(n-a)/Xe,l=a===0?o:o+1,u=h.createImageData(s,Xe);let d=0;const p=t.data,g=u.data;for(let y=0;y<l;y++){const b=y<o?Xe:a;({srcPos:d}=aE({src:p,srcPos:d,dest:g,width:s,height:b,nonBlackColor:0})),h.putImageData(u,0,y*Xe)}}function Sr(h,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function Sl(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function Km(h,t){if(t)return!0;nt.singularValueDecompose2dScale(h,rn);const n=Math.fround(Cn.pixelRatio*ms.PDF_TO_CSS_UNITS);return rn[0]<=n&&rn[1]<=n}const cE=["butt","round","square"],uE=["miter","round","bevel"],hE={},Wm={};class da{constructor(t,n,s,a,o,{optionalContentConfig:l,markedContentStack:u=null},d,p,g){this.ctx=t,this.current=new Xm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new lE(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,n,s=null){return typeof n=="string"?(this.dependencyTracker?.recordNamedDependency(t,n),n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n)):s}beginDrawing({transform:t,viewport:n,transparency:s=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...te(this.compositeCtx))}this.ctx.save(),Sl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=te(this.ctx)}executeOperatorList(t,n,s,a,o){const l=t.argsArray,u=t.fnArray;let d=n||0;const p=l.length;if(p===d)return d;const g=p-d>qm&&typeof s=="function",y=g?Date.now()+rE:0;let b=0;const A=this.commonObjs,E=this.objs;let S,_;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,s),d;if(!o||o(d))if(S=u[d],_=l[d]??null,S!==ba.dependency)_===null?this[S](d):this[S](d,..._);else for(const w of _){this.dependencyTracker?.recordNamedData(w,d);const T=w.startsWith("g_")?A:E;if(!T.has(w))return T.get(w,s),d}if(d++,d===p)return d;if(g&&++b>qm){if(Date.now()>y)return s(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const n of t.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const n=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(t,n){const s=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(n[0],n[1]),1),l=Math.max(Math.hypot(n[2],n[3]),1),u=s,d=a,p="prescale1",g,y;for(;o>2&&u>1||l>2&&d>1;){let b=u,A=d;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),l>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/A),g=this.cachedCanvases.getCanvas(p,b,A),y=g.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,u,d,0,0,b,A),t=g.canvas,u=b,d=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,n){const s=this.ctx,{width:a,height:o}=n,l=this.current.fillColor,u=this.current.patternFill,d=te(s);let p,g,y,b;if((n.bitmap||n.data)&&n.count>1){const Q=n.bitmap||n.data.buffer;g=JSON.stringify(u?d:[d.slice(0,4),l]),p=this._cachedBitmapsMap.get(Q),p||(p=new Map,this._cachedBitmapsMap.set(Q,p));const Z=p.get(g);if(Z&&!u){const ut=Math.round(Math.min(d[0],d[2])+d[4]),ft=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,vn.transformAndFill),{canvas:Z,offsetX:ut,offsetY:ft}}y=Z}y||(b=this.cachedCanvases.getCanvas("maskCanvas",a,o),$m(b.context,n));let A=nt.transform(d,[1/a,0,0,-1/o,0,0]);A=nt.transform(A,[1,0,0,1,0,-o]);const E=ua.slice();nt.axialAlignedBoundingBox([0,0,a,o],A,E);const[S,_,w,T]=E,C=Math.round(w-S)||1,O=Math.round(T-_)||1,M=this.cachedCanvases.getCanvas("fillCanvas",C,O),P=M.context,B=S,I=_;P.translate(-B,-I),P.transform(...A),y||(y=this._scaleImage(b.canvas,Bn(P)),y=y.img,p&&u&&p.set(g,y)),P.imageSmoothingEnabled=Km(te(P),n.interpolate),Al(P,y,0,0,y.width,y.height,0,0,a,o),P.globalCompositeOperation="source-in";const q=nt.transform(Bn(P),[1,0,0,1,-B,-I]);return P.fillStyle=u?l.getPattern(s,this,q,Re.FILL,t):l,P.fillRect(0,0,a,o),p&&!u&&(this.cachedCanvases.delete("fillCanvas"),p.set(g,M.canvas)),this.dependencyTracker?.recordDependencies(t,vn.transformAndFill),{canvas:M.canvas,offsetX:Math.round(B),offsetY:Math.round(I)}}setLineWidth(t,n){this.dependencyTracker?.recordSimpleData("lineWidth",t),n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(t,n){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=cE[n]}setLineJoin(t,n){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=uE[n]}setMiterLimit(t,n){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=n}setDash(t,n,s){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(n),a.lineDashOffset=s)}setRenderingIntent(t,n){}setFlatness(t,n){}setGState(t,n){for(const[s,a]of n)switch(s){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,s=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,n,s);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),Sr(this.suspendedCtx,l),oE(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Sr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,n,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,n,s,a){const o=a[0],l=a[1],u=a[2]-o,d=a[3]-l;u===0||d===0||(this.genericComposeSMask(n.context,s,u,d,n.subtype,n.backdrop,n.transferMap,o,l,n.offsetX,n.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,n,s,a,o,l,u,d,p,g,y){let b=t.canvas,A=d-g,E=p-y;if(l)if(A<0||E<0||A+s>b.width||E+a>b.height){const _=this.cachedCanvases.getCanvas("maskExtension",s,a),w=_.context;w.drawImage(b,-A,-E),w.globalCompositeOperation="destination-atop",w.fillStyle=l,w.fillRect(0,0,s,a),w.globalCompositeOperation="source-over",b=_.canvas,A=E=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(A,E,s,a),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(A,E,s,a),t.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?n.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,p,s,a),n.clip(S),n.globalCompositeOperation="destination-in",n.drawImage(b,A,E,s,a,d,p,s,a),n.restore()}save(t){this.inSMaskMode&&Sr(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Sr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,n,s,a,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(n,s,a,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,n,s,a){let[o]=s;if(!a){o||=s[0]=new Path2D,this[n](t,o);return}if(this.dependencyTracker!==null){const l=n===ba.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-l,a[2]+l,a[1]-l,a[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=s[0]=new Path2D;for(let u=0,d=o.length;u<d;)switch(o[u++]){case pl.moveTo:l.moveTo(o[u++],o[u++]);break;case pl.lineTo:l.lineTo(o[u++],o[u++]);break;case pl.curveTo:l.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case pl.closePath:l.closePath();break;default:vt(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=l}nt.axialAlignedBoundingBox(a,te(this.ctx),this.current.minMax),this[n](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,n,s=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,Bn(a),Re.STROKE,t),l){const u=new Path2D;u.addPath(n,a.getTransform().invertSelf().multiplySelf(l)),n=u}this.rescaleAndStroke(n,!1),a.restore()}else this.rescaleAndStroke(n,!0);this.dependencyTracker?.recordDependencies(t,vn.stroke),s&&this.consumePath(t,n,this.current.getClippedPathBoundingBox(Re.STROKE,te(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,n){this.stroke(t,n)}fill(t,n,s=!0){const a=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const p=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,Bn(a),Re.FILL,t),p){const g=new Path2D;g.addPath(n,a.getTransform().invertSelf().multiplySelf(p)),n=g}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(n,"evenodd"),this.pendingEOFill=!1):a.fill(n)),this.dependencyTracker?.recordDependencies(t,vn.fill),u&&(a.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,n,d)}eoFill(t,n){this.pendingEOFill=!0,this.fill(t,n)}fillStroke(t,n){this.fill(t,n,!1),this.stroke(t,n,!1),this.consumePath(t,n)}eoFillStroke(t,n){this.pendingEOFill=!0,this.fillStroke(t,n)}closeFillStroke(t,n){this.fillStroke(t,n)}closeEOFillStroke(t,n){this.pendingEOFill=!0,this.fillStroke(t,n)}endPath(t,n){this.consumePath(t,n)}rawFillPath(t,n){this.ctx.fill(n),this.dependencyTracker?.recordDependencies(t,vn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=hE}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Wm}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const n=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;n!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(n!==void 0){const a=new Path2D,o=s.getTransform().invertSelf();for(const{transform:l,x:u,y:d,fontSize:p,path:g}of n)g&&a.addPath(g,new DOMMatrix(l).preMultiplySelf(o).translate(u,d).scale(p,-p));s.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,n){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=n}setWordSpacing(t,n){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=n}setHScale(t,n){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=n/100}setLeading(t,n){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-n}setFont(t,n,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",n,t);const a=this.commonObjs.get(n),o=this.current;if(!a)throw new Error(`Can't find font for ${n}`);if(o.fontMatrix=a.fontMatrix||Rh,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&vt("Invalid font matrix for font "+n),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=s,a.isType3Font)return;const l=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${l}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const p=a.italic?"italic":"normal";let g=s;s<Gm?g=Gm:s>Vm&&(g=Vm),this.current.fontSizeScale=s/g,this.ctx.font=`${p} ${d} ${g}px ${u}`}setTextRenderingMode(t,n){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=n}setTextRise(t,n){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=n}moveText(t,n,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,n,s){this.setLeading(t,-s),this.moveText(t,n,s)}setTextMatrix(t,n){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=n,s.textMatrixScale=Math.hypot(n[0],n[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,n,s){const a=new Path2D;return a.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(n)),a}paintChar(t,n,s,a,o,l){const u=this.ctx,d=this.current,p=d.font,g=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,b=g&Ce.FILL_STROKE_MASK,A=!!(g&Ce.ADD_TO_PATH_FLAG),E=d.patternFill&&!p.missingFile,S=d.patternStroke&&!p.missingFile;let _;if((p.disableFontFace||A||E||S)&&!p.missingFile&&(_=p.getPathGenerator(this.commonObjs,n)),_&&(p.disableFontFace||E||S)){u.save(),u.translate(s,a),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,p);let w;if(b===Ce.FILL||b===Ce.FILL_STROKE)if(o){w=u.getTransform(),u.setTransform(...o);const T=this.#i(_,w,o);u.fill(T)}else u.fill(_);if(b===Ce.STROKE||b===Ce.FILL_STROKE)if(l){w||=u.getTransform(),u.setTransform(...l);const{a:T,b:C,c:O,d:M}=w,P=nt.inverseTransform(l),B=nt.transform([T,C,O,M,0,0],P);nt.singularValueDecompose2dScale(B,rn),u.lineWidth*=Math.max(rn[0],rn[1])/y,u.stroke(this.#i(_,w,l))}else u.lineWidth/=y,u.stroke(_);u.restore()}else(b===Ce.FILL||b===Ce.FILL_STROKE)&&(u.fillText(n,s,a),this.dependencyTracker?.recordCharacterBBox(t,u,p,y,s,a,()=>u.measureText(n))),(b===Ce.STROKE||b===Ce.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,p,y,s,a,()=>u.measureText(n)).recordDependencies(t,vn.stroke),u.strokeText(n,s,a));A&&((this.pendingTextPaths||=[]).push({transform:te(u),x:s,y:a,fontSize:y,path:_}),this.dependencyTracker?.recordCharacterBBox(t,u,p,y,s,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const n=t.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<n.length;a+=4)if(n[a]>0&&n[a]<255){s=!0;break}return wt(this,"isFontSubpixelAAEnabled",s)}showText(t,n){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,vn.showText).resetBBox(t),this.current.textRenderingMode&Ce.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,a=s.font;if(a.isType3Font){this.showType3Text(t,n),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=s.fontSizeScale,d=s.charSpacing,p=s.wordSpacing,g=s.fontDirection,y=s.textHScale*g,b=n.length,A=a.vertical,E=A?1:-1,S=a.defaultVMetrics,_=o*s.fontMatrix[0],w=s.textRenderingMode===Ce.FILL&&!a.disableFontFace&&!s.patternFill;l.save(),s.textMatrix&&l.transform(...s.textMatrix),l.translate(s.x,s.y+s.textRise),g>0?l.scale(y,-1):l.scale(y,1);let T,C;if(s.patternFill){l.save();const I=s.fillColor.getPattern(l,this,Bn(l),Re.FILL,t);T=te(l),l.restore(),l.fillStyle=I}if(s.patternStroke){l.save();const I=s.strokeColor.getPattern(l,this,Bn(l),Re.STROKE,t);C=te(l),l.restore(),l.strokeStyle=I}let O=s.lineWidth;const M=s.textMatrixScale;if(M===0||O===0){const I=s.textRenderingMode&Ce.FILL_STROKE_MASK;(I===Ce.STROKE||I===Ce.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=M;if(u!==1&&(l.scale(u,u),O/=u),l.lineWidth=O,a.isInvalidPDFjsFont){const I=[];let q=0;for(const Z of n)I.push(Z.unicode),q+=Z.width;const Q=I.join("");if(l.fillText(Q,0,0),this.dependencyTracker!==null){const Z=l.measureText(Q);this.dependencyTracker.recordBBox(t,this.ctx,-Z.actualBoundingBoxLeft,Z.actualBoundingBoxRight,-Z.actualBoundingBoxAscent,Z.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=q*_*y,l.restore(),this.compose();return}let P=0,B;for(B=0;B<b;++B){const I=n[B];if(typeof I=="number"){P+=E*I*o/1e3;continue}let q=!1;const Q=(I.isSpace?p:0)+d,Z=I.fontChar,ut=I.accent;let ft,at,gt=I.width;if(A){const J=I.vmetric||S,dt=-(I.vmetric?J[1]:gt*.5)*_,At=J[2]*_;gt=J?-J[0]:gt,ft=dt/u,at=(P+At)/u}else ft=P/u,at=0;let k;if(a.remeasure&&gt>0){k=l.measureText(Z);const J=k.width*1e3/o*u;if(gt<J&&this.isFontSubpixelAAEnabled){const dt=gt/J;q=!0,l.save(),l.scale(dt,1),ft/=dt}else gt!==J&&(ft+=(gt-J)/2e3*o/u)}if(this.contentVisible&&(I.isInFont||a.missingFile)){if(w&&!ut)l.fillText(Z,ft,at),this.dependencyTracker?.recordCharacterBBox(t,l,k?{bbox:null}:a,o/u,ft,at,()=>k??l.measureText(Z));else if(this.paintChar(t,Z,ft,at,T,C),ut){const J=ft+o*ut.offset.x/u,dt=at-o*ut.offset.y/u;this.paintChar(t,ut.fontChar,J,dt,T,C)}}const j=A?gt*_-Q*g:gt*_+Q*g;P+=j,q&&l.restore()}A?s.y-=P:s.x+=P*y,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,n){const s=this.ctx,a=this.current,o=a.font,l=a.fontSize,u=a.fontDirection,d=o.vertical?1:-1,p=a.charSpacing,g=a.wordSpacing,y=a.textHScale*u,b=a.fontMatrix||Rh,A=n.length,E=a.textRenderingMode===Ce.INVISIBLE;let S,_,w,T;if(E||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),a.textMatrix&&s.transform(...a.textMatrix),s.translate(a.x,a.y+a.textRise),s.scale(y,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new Ol(C,t):null,S=0;S<A;++S){if(_=n[S],typeof _=="number"){T=d*_*l/1e3,this.ctx.translate(T,0),a.x+=T*y;continue}const O=(_.isSpace?g:0)+p,M=o.charProcOperatorList[_.operatorListId];M?this.contentVisible&&(this.save(),s.scale(l,l),s.transform(...b),this.executeOperatorList(M),this.restore()):vt(`Type3 character "${_.operatorListId}" is not available.`);const P=[_.width,0];nt.applyTransform(P,b),w=P[0]*l+O,s.translate(w,0),a.x+=w*y}s.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,n,s){}setCharWidthAndBounds(t,n,s,a,o,l,u){const d=new Path2D;d.rect(a,o,l-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,l,o,u).recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}getColorN_Pattern(t,n){let s;if(n[0]==="TilingPattern"){const a=this.baseTransform||te(this.ctx),o={createCanvasGraphics:(l,u)=>new da(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Ol(this.dependencyTracker,u,!0):null)};s=new sd(n,this.ctx,o,a)}else s=this._getPattern(t,n[1],n[2]);return s}setStrokeColorN(t,...n){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,n),this.current.patternStroke=!0}setFillColorN(t,...n){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,n),this.current.patternFill=!0}setStrokeRGBColor(t,n){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=n,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,n){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=n,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,n,s=null){let a;return this.cachedPatterns.has(n)?a=this.cachedPatterns.get(n):(a=sE(this.getObject(t,n)),this.cachedPatterns.set(n,a)),s&&(a.matrix=s),a}shadingFill(t,n){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const a=this._getPattern(t,n);s.fillStyle=a.getPattern(s,this,Bn(s),Re.SHADING,t);const o=Bn(s);if(o){const{width:l,height:u}=s.canvas,d=ua.slice();nt.axialAlignedBoundingBox([0,0,l,u],o,d);const[p,g,y,b]=d;this.ctx.fillRect(p,g,y-p,b-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,vn.transform).recordDependencies(t,vn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Xt("Should not call beginInlineImage")}beginImageData(){Xt("Should not call beginImageData")}paintFormXObjectBegin(t,n,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),n&&this.transform(t,...n),this.baseTransform=te(this.ctx),s)){nt.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[a,o,l,u]=s,d=new Path2D;d.rect(a,o,l-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,n){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;n.isolated||zl("TODO: Support non-isolated groups."),n.knockout&&vt("Knockout groups not supported.");const a=te(s);if(n.matrix&&s.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let o=ua.slice();nt.axialAlignedBoundingBox(n.bbox,te(s),o);const l=[0,0,s.canvas.width,s.canvas.height];o=nt.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),p=Math.max(Math.ceil(o[2])-u,1),g=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,p,g]);let y="groupAt"+this.groupLevel;n.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,p,g),A=b.context;A.translate(-u,-d),A.transform(...a);let E=new Path2D;const[S,_,w,T]=n.bbox;if(E.rect(S,_,w-S,T-_),n.matrix){const C=new Path2D;C.addPath(E,new DOMMatrix(n.matrix)),E=C}A.clip(E),n.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:u,offsetY:d,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}),(!n.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,d),s.save()),Sr(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,n){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),n.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=te(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=ua.slice();nt.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,n,s,a,o,l){if(this.#t(),Sl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],d=s[3]-s[1];if(l&&this.annotationCanvasMap){a=a.slice(),a[4]-=s[0],a[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=d,nt.singularValueDecompose2dScale(te(this.ctx),rn);const{viewportScale:p}=this,g=Math.ceil(u*this.outputScaleX*p),y=Math.ceil(d*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(n,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(rn[0],0,0,-rn[1],0,d*rn[1]),Sl(this.ctx)}else{Sl(this.ctx),this.endPath(t);const p=new Path2D;p.rect(s[0],s[1],u,d),this.ctx.clip(p)}}this.current=new Xm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,n){if(!this.contentVisible)return;const s=n.count;n=this.getObject(t,n.data,n),n.count=s;const a=this.ctx,o=this._createMaskCanvas(t,n),l=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,n,s,a=0,o=0,l,u){if(!this.contentVisible)return;n=this.getObject(t,n.data,n);const d=this.ctx;d.save();const p=te(d);d.transform(s,a,o,l,0,0);const g=this._createMaskCanvas(t,n);d.setTransform(1,0,0,1,g.offsetX-p[4],g.offsetY-p[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const A=nt.transform(p,[s,a,o,l,u[y],u[y+1]]);d.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,n){if(!this.contentVisible)return;const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,vn.transformAndFill);for(const l of n){const{data:u,width:d,height:p,transform:g}=l,y=this.cachedCanvases.getCanvas("maskCanvas",d,p),b=y.context;b.save();const A=this.getObject(t,u,l);$m(b,A),b.globalCompositeOperation="source-in",b.fillStyle=o?a.getPattern(b,this,Bn(s),Re.FILL,t):a,b.fillRect(0,0,d,p),b.restore(),s.save(),s.transform(...g),s.scale(1,-1),Al(s,y.canvas,0,0,d,p,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,p),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,n){if(!this.contentVisible)return;const s=this.getObject(t,n);if(!s){vt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,n,s,a,o){if(!this.contentVisible)return;const l=this.getObject(t,n);if(!l){vt("Dependent image isn't ready yet");return}const u=l.width,d=l.height,p=[];for(let g=0,y=o.length;g<y;g+=2)p.push({transform:[s,0,0,a,o[g],o[g+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,l,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:n,width:s,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(n,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,n){if(!this.contentVisible)return;const s=n.width,a=n.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/s,-1/a);let u;if(n.bitmap)u=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)u=n;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,a).context;Ym(g,n),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,Bn(o));o.imageSmoothingEnabled=Km(te(o),n.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-a,0).recordDependencies(t,vn.imageXObject).recordOperation(t),Al(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,s,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,n,s){if(!this.contentVisible)return;const a=this.ctx;let o;if(n.bitmap)o=n.bitmap;else{const l=n.width,u=n.height,p=this.cachedCanvases.getCanvas("inlineImage",l,u).context;Ym(p,n),o=this.applyTransferMapsToCanvas(p)}this.dependencyTracker?.resetBBox(t);for(const l of s)a.save(),a.transform(...l.transform),a.scale(1,-1),Al(a,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,vn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,n){}markPointProps(t,n,s){}beginMarkedContent(t,n){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,n,s){this.dependencyTracker?.beginMarkedContent(t),n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,n,s){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===Wm?o.clip(n,"evenodd"):o.clip(n)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=te(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const n=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:n,b:s,c:a,d:o}=this.ctx.getTransform();let l,u;if(s===0&&a===0){const d=Math.abs(n),p=Math.abs(o);if(d===p)if(t===0)l=u=1/d;else{const g=d*t;l=u=g<1?1/g:1}else if(t===0)l=1/d,u=1/p;else{const g=d*t,y=p*t;l=g<1?1/g:1,u=y<1?1/y:1}}else{const d=Math.abs(n*o-s*a),p=Math.hypot(n,s),g=Math.hypot(a,o);if(t===0)l=g/d,u=p/d;else{const y=t*d;l=g>y?g/y:1,u=p>y?p/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,n){const{ctx:s,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(a||1)*o,s.stroke(t);return}const u=s.getLineDash();n&&s.save(),s.scale(o,l),Sh.a=1/o,Sh.d=1/l;const d=new Path2D;if(d.addPath(t,Sh),u.length>0){const p=Math.max(o,l);s.setLineDash(u.map(g=>g/p)),s.lineDashOffset/=p}s.lineWidth=a||1,s.stroke(d),n&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in ba)da.prototype[h]!==void 0&&(da.prototype[ba[h]]=da.prototype[h]);class fa{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const n=new TextEncoder,s={};let a=0;for(const p of fa.strings){const g=n.encode(t[p]);s[p]=g,a+=4+g.length}const o=new ArrayBuffer(a),l=new Uint8Array(o),u=new DataView(o);let d=0;for(const p of fa.strings){const g=s[p],y=g.length;u.setUint32(d,y),l.set(g,d+4),d+=4+y}return Lt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){Lt(t<fa.strings.length,"Invalid string index");let n=0;for(let a=0;a<t;a++)n+=this.#e.getUint32(n)+4;const s=this.#e.getUint32(n);return this.#i.decode(new Uint8Array(this.#t,n+4,s))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class pa{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const n=new TextEncoder,s={};let a=0;for(const b of pa.strings){const A=n.encode(t[b]);s[b]=A,a+=4+A.length}a+=4;let o,l,u=1+a;t.style&&(o=n.encode(t.style.style),l=n.encode(t.style.weight),u+=4+o.length+4+l.length);const d=new ArrayBuffer(u),p=new Uint8Array(d),g=new DataView(d);let y=0;g.setUint8(y++,t.guessFallback?1:0),g.setUint32(y,0),y+=4,a=0;for(const b of pa.strings){const A=s[b],E=A.length;a+=4+E,g.setUint32(y,E),p.set(A,y+4),y+=4+E}return g.setUint32(y-a-4,a),t.style&&(g.setUint32(y,o.length),p.set(o,y+4),y+=4+o.length,g.setUint32(y,l.length),p.set(l,y+4),y+=4+l.length),Lt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Lt(t<pa.strings.length,"Invalid string index");let n=5;for(let a=0;a<t;a++)n+=this.#e.getUint32(n)+4;const s=this.#e.getUint32(n);return this.#i.decode(new Uint8Array(this.#t,n+4,s))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const n=this.#e.getUint32(t),s=this.#i.decode(new Uint8Array(this.#t,t+4,n));t+=4+n;const a=this.#e.getUint32(t),o=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:s,weight:o}}}class Gt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#s;#a;#o;constructor({data:t,extra:n}){this.#s=t,this.#a=new TextDecoder,this.#o=new DataView(this.#s),n&&Object.assign(this,n)}#c(t){Lt(t<Gt.bools.length,"Invalid boolean index");const n=Math.floor(t/4),s=t*2%8,a=this.#o.getUint8(n)>>s&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Lt(t<Gt.numbers.length,"Invalid number index"),this.#o.getFloat64(Gt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Gt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<4;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Gt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<6;a++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Gt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<3;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Lt(t<Gt.strings.length,"Invalid string index");let n=Gt.#r+4;for(let o=0;o<t;o++)n+=this.#o.getUint32(n)+4;const s=this.#o.getUint32(n),a=new Uint8Array(s);return a.set(new Uint8Array(this.#s,n+4,s)),this.#a.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Gt.#r;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#s,t+4,o)}clearData(){let t=Gt.#r;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#s,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Gt.#r;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#s,t+4,a)),new fa(o.buffer)}get systemFontInfo(){let t=Gt.#r;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(this.#s,t+4,s)),new pa(a.buffer)}static write(t){const n=t.systemFontInfo?pa.write(t.systemFontInfo):null,s=t.cssFontInfo?fa.write(t.cssFontInfo):null,a=new TextEncoder,o={};let l=0;for(const S of Gt.strings)o[S]=a.encode(t[S]),l+=4+o[S].length;const u=Gt.#r+4+l+4+(n?n.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),p=new Uint8Array(d),g=new DataView(d);let y=0;const b=Gt.bools.length;let A=0,E=0;for(let S=0;S<b;S++){const _=t[Gt.bools[S]];A|=(_===void 0?0:_?2:1)<<E,E+=2,(E===8||S===b-1)&&(g.setUint8(y++,A),A=0,E=0)}Lt(y===Gt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of Gt.numbers)g.setFloat64(y,t[S]),y+=8;if(Lt(y===Gt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(y++,4);for(const S of t.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=8;if(Lt(y===Gt.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(y++,6);for(const S of t.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=48;if(Lt(y===Gt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(y++,1);for(const S of t.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=6;Lt(y===Gt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(Gt.#r,0),y+=4;for(const S of Gt.strings){const _=o[S],w=_.length;g.setUint32(y,w),p.set(_,y+4),y+=4+w}if(g.setUint32(Gt.#r,y-Gt.#r-4),!n)g.setUint32(y,0),y+=4;else{const S=n.byteLength;g.setUint32(y,S),Lt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),p.set(new Uint8Array(n),y+4),y+=4+S}if(!s)g.setUint32(y,0),y+=4;else{const S=s.byteLength;g.setUint32(y,S),Lt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),p.set(new Uint8Array(s),y+4),y+=4+S}return t.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,t.data.length),p.set(t.data,y+4),y+=4+t.data.length),Lt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class Gi{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class dE{#t;#e;constructor({parsedData:t,rawData:n}){this.#t=t,this.#e=n}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const ca=Symbol("INTERNAL");class fE{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:n,intent:s,usage:a,rbGroups:o}){this.#t=!!(t&sn.DISPLAY),this.#e=!!(t&sn.PRINT),this.name=n,this.intent=s,this.usage=a,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:n}=this.usage;return this.#t?n?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,n,s=!1){t!==ca&&Xt("Internal method `_setVisible` called."),this.#i=s,this.#n=n}}class pE{#t=null;#e=new Map;#i=null;#n=null;constructor(t,n=sn.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const s of t.groups)this.#e.set(s.id,new fE(n,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(ca,!1);for(const s of t.on)this.#e.get(s)._setVisible(ca,!0);for(const s of t.off)this.#e.get(s)._setVisible(ca,!1);this.#i=this.getHash()}}#r(t){const n=t.length;if(n<2)return!0;const s=t[0];for(let a=1;a<n;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return vt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return zl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(vt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const n of t.ids){if(!this.#e.has(n))return vt(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!1}return!0}return vt(`Unknown optional content policy ${t.policy}.`),!0}return vt(`Unknown group type ${t.type}.`),!0}setVisibility(t,n=!0,s=!0){const a=this.#e.get(t);if(!a){vt(`Optional content group not found: ${t}`);return}if(s&&n&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(ca,!1,!0);a._setVisible(ca,!!n,!0),this.#t=null}setOCGState({state:t,preserveRB:n}){let s;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const o=this.#e.get(a);if(o)switch(s){case"ON":this.setVisibility(a,!0,n);break;case"OFF":this.setVisibility(a,!1,n);break;case"Toggle":this.setVisibility(a,!o.visible,n);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Fy;for(const[n,s]of this.#e)t.update(`${n}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class gE{constructor(t,{disableRange:n=!1,disableStream:s=!1}){Lt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!n,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),t.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:n}){const s=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});Lt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const n=this._rangeReaders.indexOf(t);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){Lt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new mE(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new yE(this,t,n);return this._pdfDataRangeTransport.requestDataRange(t,n),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class mE{constructor(t,n,s=!1,a=null){this._stream=t,this._done=s||!1,this._filename=Ul(a)?a:null,this._queuedChunks=n||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class yE{constructor(t,n,s){this._stream=t,this._begin=n,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function bE(h){let t=!0,n=s("filename\\*","i").exec(h);if(n){n=n[1];let g=u(n);return g=unescape(g),g=d(g),g=p(g),o(g)}if(n=l(h),n){const g=p(n);return o(g)}if(n=s("filename","i").exec(h),n){n=n[1];let g=u(n);return g=p(g),o(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),A=Ir(y);y=b.decode(A),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function l(g){const y=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(g))!==null;){let[,S,_,w]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[_,w]}const E=[];for(let S=0;S<y.length&&S in y;++S){let[_,w]=y[S];w=u(w),_&&(w=unescape(w),S===0&&(w=d(w))),E.push(w)}return E.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),E=g.slice(y+1).replace(/^[^']*'/,"");return a(b,E)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,E){if(A==="q"||A==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,_){return String.fromCharCode(parseInt(_,16))}),a(b,E);try{E=atob(E)}catch{}return a(b,E)})}return""}function Xy(h,t){const n=new Headers;if(!h||!t||typeof t!="object")return n;for(const s in t){const a=t[s];a!==void 0&&n.append(s,a)}return n}function Hl(h){return URL.parse(h)?.origin??null}function Yy({responseHeaders:h,isHttp:t,rangeChunkSize:n,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*n)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function $y(h){const t=h.get("Content-Disposition");if(t){let n=bE(t);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(Ul(n))return n}return null}function Xr(h,t){return new Or(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function Ky(h){return h===200||h===206}function Wy(h,t,n){return{method:"GET",headers:h,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Qy(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(vt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class vE{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Xy(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new AE(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new SE(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class AE{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const n=t.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const s=new Headers(t.headers),a=n.url;fetch(a,Wy(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Hl(o.url),!Ky(o.status))throw Xr(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:d}=Yy({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=$y(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new hi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Qy(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class SE{constructor(t,n,s){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${n}-${s-1}`);const l=a.url;fetch(l,Wy(o,this._withCredentials,this._abortController)).then(u=>{const d=Hl(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!Ky(u.status))throw Xr(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Qy(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Eh=200,wh=206;function EE(h){const t=h.response;return typeof t!="string"?t:Ir(t).buffer}class wE{_responseOrigin=null;constructor({url:t,httpHeaders:n,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Xy(this.isHttp,n),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const n=new XMLHttpRequest,s=this.currXhrId++,a=this.pendingRequests[s]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[o,l]of this.headers)n.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(n.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=wh):a.expectedStatus=Eh,n.responseType="arraybuffer",Lt(t.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{t.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,s),n.onprogress=this.onProgress.bind(this,s),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,n.send(null),s}onProgress(t,n){const s=this.pendingRequests[t];s&&s.onProgress?.(n)}onStateChange(t,n){const s=this.pendingRequests[t];if(!s)return;const a=s.xhr;if(a.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){s.onError(a.status);return}const o=a.status||Eh;if(!(o===Eh&&s.expectedStatus===wh)&&o!==s.expectedStatus){s.onError(a.status);return}const u=EE(a);if(o===wh){const d=a.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);p?s.onDone({begin:parseInt(p[1],10),chunk:u}):(vt('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const n=this.pendingRequests[t].xhr;delete this.pendingRequests[t],n.abort()}}class _E{constructor(t){this._source=t,this._manager=new wE(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const n=this._rangeRequestReaders.indexOf(t);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return Lt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new xE(this._manager,this._source),this._fullRequestReader}getRangeReader(t,n){const s=new TE(this._manager,t,n);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class xE{constructor(t,n){this._manager=t,this._url=n.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,n=this._manager.getRequestXhr(t);this._manager._responseOrigin=Hl(n.responseURL);const s=n.getAllResponseHeaders(),a=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...p]=u.split(": ");return[d,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=Yy({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=$y(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Xr(t,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class TE{constructor(t,n,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:n,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Hl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const n=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Xr(t,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const CE=/^[a-z][a-z0-9\-+.]+:/i;function RE(h){if(CE.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class ME{constructor(t){this.source=t,this.url=RE(t.url),Lt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new DE(this),this._fullRequestReader}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const s=new LE(this,t,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class DE{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=Xr(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new hi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class LE{constructor(t,n,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:n,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Er=Symbol("INITIAL_DATA");class Zy{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Er}}get(t,n=null){if(n){const a=this.#e(t);return a.promise.then(()=>n(a.data)),null}const s=this.#t[t];if(!s||s.data===Er)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const n=this.#t[t];return!!n&&n.data!==Er}delete(t){const n=this.#t[t];return!n||n.data===Er?!1:(delete this.#t[t],!0)}resolve(t,n=null){const s=this.#e(t);s.data=n,s.resolve()}clear(){for(const t in this.#t){const{data:n}=this.#t[t];n?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:n}=this.#t[t];n!==Er&&(yield[t,n])}}}const OE=1e5,Qm=30;let kr=class An{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#x=new WeakMap;static#w=null;static#A=new Set;constructor({textContentSource:t,container:n,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=n,this.#h=s.scale*Cn.pixelRatio,this.#d=s.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-l,u+o],this.#o=a,this.#a=o,An.#M(),Vi(n,s),this.#t.promise.finally(()=>{An.#A.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:n}=Se.platform;return wt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&n?"Calibri, ":""}sans-serif`],["monospace",`${t&&n?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:n,done:s})=>{if(s){this.#t.resolve();return}this.#r??=n.lang,Object.assign(this.#f,n.styles),this.#C(n.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),An.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:n=null}){const s=t.scale*Cn.pixelRatio,a=t.rotation;if(a!==this.#d&&(n?.(),this.#d=a,Vi(this.#l,{rotation:a})),s!==this.#h){n?.(),this.#h=s;const o={div:null,properties:null,ctx:An.#D(this.#r)};for(const l of this.#u)o.properties=this.#g.get(l),o.div=l,this.#_(o)}}cancel(){const t=new hi("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#C(t){if(this.#i)return;this.#s.ctx??=An.#D(this.#r);const n=this.#u,s=this.#m;for(const a of t){if(n.length>OE){vt("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(a.str),this.#E(a)}}#E(t){const n=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(n);const a=nt.transform(this.#y,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#n&&l.fontSubstitution||l.fontFamily;u=An.fontFamilyMap.get(u)||u;const d=Math.hypot(a[2],a[3]),p=d*An.#z(u,l,this.#r);let g,y;o===0?(g=a[4],y=a[5]-p):(g=a[4]+p*Math.sin(o),y=a[5]-p*Math.cos(o));const b="calc(var(--total-scale-factor) *",A=n.style;this.#e===this.#l?(A.left=`${(100*g/this.#o).toFixed(2)}%`,A.top=`${(100*y/this.#a).toFixed(2)}%`):(A.left=`${b}${g.toFixed(2)}px)`,A.top=`${b}${y.toFixed(2)}px)`),A.fontSize=`${b}${(An.#w*d).toFixed(2)}px)`,A.fontFamily=u,s.fontSize=d,n.setAttribute("role","presentation"),n.textContent=t.str,n.dir=t.dir,this.#n&&(n.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);S!==_&&Math.max(S,_)/Math.min(S,_)>1.5&&(E=!0)}if(E&&(s.canvasWidth=l.vertical?t.height:t.width),this.#g.set(n,s),this.#s.div=n,this.#s.properties=s,this.#_(this.#s),s.hasText&&this.#e.append(n),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#_(t){const{div:n,properties:s,ctx:a}=t,{style:o}=n;let l="";if(An.#w>1&&(l=`scale(${1/An.#w})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=o,{canvasWidth:d,fontSize:p}=s;An.#R(a,p*this.#h,u);const{width:g}=a.measureText(n.textContent);g>0&&(l=`scaleX(${d*this.#h/g}) ${l}`)}s.angle!==0&&(l=`rotate(${s.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#D(t=null){let n=this.#b.get(t||="");if(!n){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),n=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,n),this.#x.set(n,{size:0,family:""})}return n}static#R(t,n,s){const a=this.#x.get(t);n===a.size&&s===a.family||(t.font=`${n}px ${s}`,a.size=n,a.family=s)}static#M(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#z(t,n,s){const a=this.#v.get(t);if(a)return a;const o=this.#D(s);o.canvas.width=o.canvas.height=Qm,this.#R(o,Qm,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let p=.8;return u?p=u/(u+d):(Se.platform.isFirefox&&vt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?p=n.ascent:n.descent&&(p=1+n.descent)),this.#v.set(t,p),p}};const NE=100;function ad(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new rd,{docId:n}=t,s=h.url?IS(h.url):null,a=h.data?jS(h.data):null,o=h.httpHeaders||null,l=h.withCredentials===!0,u=h.password??null,d=h.range instanceof od?h.range:null,p=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let g=h.worker instanceof va?h.worker:null;const y=h.verbosity,b=typeof h.docBaseUrl=="string"&&!Gr(h.docBaseUrl)?h.docBaseUrl:null,A=ml(h.cMapUrl),E=h.cMapPacked!==!1,S=h.CMapReaderFactory||(ke?KS:zm),_=ml(h.iccUrl),w=ml(h.standardFontDataUrl),T=h.StandardFontDataFactory||(ke?WS:Fm),C=ml(h.wasmUrl),O=h.WasmFactory||(ke?QS:Um),M=h.stopAtErrors!==!0,P=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,B=h.isEvalSupported!==!1,I=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!ke,q=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!ke&&(Se.platform.isFirefox||!globalThis.chrome),Q=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,Z=typeof h.disableFontFace=="boolean"?h.disableFontFace:ke,ut=h.fontExtraProperties===!0,ft=h.enableXfa===!0,at=h.ownerDocument||globalThis.document,gt=h.disableRange===!0,k=h.disableStream===!0,j=h.disableAutoFetch===!0,J=h.pdfBug===!0,dt=h.CanvasFactory||(ke?$S:qS),At=h.FilterFactory||(ke?YS:XS),D=h.enableHWA===!0,V=h.useWasm!==!1,W=d?d.length:h.length??NaN,tt=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!ke&&!Z,rt=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(S===zm&&T===Fm&&O===Um&&A&&w&&C&&xr(A,document.baseURI)&&xr(w,document.baseURI)&&xr(C,document.baseURI)),ht=null;ES(y);const ot={canvasFactory:new dt({ownerDocument:at,enableHWA:D}),filterFactory:new At({docId:n,ownerDocument:at}),cMapReaderFactory:rt?null:new S({baseUrl:A,isCompressed:E}),standardFontDataFactory:rt?null:new T({baseUrl:w}),wasmFactory:rt?null:new O({baseUrl:C})};g||(g=va.create({verbosity:y,port:Gi.workerPort}),t._worker=g);const Yt={docId:n,apiVersion:"5.4.296",data:a,password:u,disableAutoFetch:j,rangeChunkSize:p,length:W,docBaseUrl:b,enableXfa:ft,evaluatorOptions:{maxImageSize:P,disableFontFace:Z,ignoreErrors:M,isEvalSupported:B,isOffscreenCanvasSupported:I,isImageDecoderSupported:q,canvasMaxAreaInBytes:Q,fontExtraProperties:ut,useSystemFonts:tt,useWasm:V,useWorkerFetch:rt,cMapUrl:A,iccUrl:_,standardFontDataUrl:w,wasmUrl:C}},_t={ownerDocument:at,pdfBug:J,styleElement:ht,loadingParams:{disableAutoFetch:j,enableXfa:ft}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const zt=g.messageHandler.sendWithPromise("GetDocRequest",Yt,a?[a.buffer]:null);let Pe;if(d)Pe=new gE(d,{disableRange:gt,disableStream:k});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Ye=xr(s)?vE:ke?ME:_E;Pe=new Ye({url:s,length:W,httpHeaders:o,withCredentials:l,rangeChunkSize:p,disableRange:gt,disableStream:k})}return zt.then(Ye=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Ot=new Tr(n,Ye,g.port),Nt=new PE(Ot,t,Pe,_t,ot,D);t._transport=Nt,Ot.send("Ready",null)})}).catch(t._capability.reject),t}class rd{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${rd.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let od=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,n,s=!1,a=null){this.length=t,this.initialData=n,this.progressiveDone=s,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,n){for(const s of this.#r)s(t,n)}onDataProgress(t,n){this.#t.promise.then(()=>{for(const s of this.#n)s(t,n)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const n of this.#i)n(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,n){Xt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class kE{constructor(t,n){this._pdfInfo=t,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,n){return this._transport.getAnnotationsByType(t,n)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class BE{#t=!1;constructor(t,n,s,a=!1){this._pageIndex=t,this._pageInfo=n,this._transport=s,this._stats=a?new Dm:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new Zy,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}={}){return new jr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:n,offsetX:s,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:n=t.canvas,viewport:s,intent:a="display",annotationMode:o=Hn.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:p=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:E=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,o,y,b),{renderingIntent:_,cacheKey:w}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(_);let T=this._intentStates.get(w);T||(T=Object.create(null),this._intentStates.set(w,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const C=!!(_&sn.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const O=!!(this._pdfBug&&globalThis.StepperManager?.enabled),M=!this.recordedBBoxes&&(A||O),P=q=>{if(T.renderTasks.delete(B),M){const Q=B.gfx?.dependencyTracker.take();Q&&(B.stepper&&B.stepper.setOperatorBBoxes(Q,B.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=Q))}C&&(this.#t=!0),this.#e(),q?(B.capability.reject(q),this._abortOperatorList({intentState:T,reason:q instanceof Error?q:new Error(q)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},B=new ha({callback:P,params:{canvas:n,canvasContext:t,dependencyTracker:M?new JS(n,T.operatorList.length,O):null,viewport:s,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:E});(T.renderTasks||=new Set).add(B);const I=B.task;return Promise.all([T.displayReadyCapability.promise,d]).then(([q,Q])=>{if(this.destroyed){P();return}if(this._stats?.time("Rendering"),!(Q.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:q,optionalContentConfig:Q}),B.operatorListChanged()}).catch(P),I}getOperatorList({intent:t="display",annotationMode:n=Hn.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,n,s,a,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Nr.textContent(s));const n=this.streamTextContent(t);return new Promise(function(s,a){function o(){l.read().then(function({value:d,done:p}){if(p){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},a)}const l=n.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const s of n.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const n=this.#e();return t&&n&&(this._stats&&=new Dm),n}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,n){const s=this._intentStates.get(n);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let s=0,a=t.length;s<a;s++)n.operatorList.fnArray.push(t.fnArray[s]),n.operatorList.argsArray.push(t.argsArray[s]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(const s of n.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:s,modifiedIds:a}){const{map:o,transfer:l}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:o,modifiedIds:a},l).getReader(),p=this._intentStates.get(n);p.streamReader=d;const g=()=>{d.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();this.#e()}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:n,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(n instanceof Fl){let a=NE;n.extraDelay>0&&n.extraDelay<1e3&&(a+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},a);return}}if(t.streamReader.cancel(new hi(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var ji,Tn,li,fs,Nl,ps,gs,Be,Tl,Jy,tb,Cr,ya,Cl;const Zt=class Zt{constructor({name:t=null,port:n=null,verbosity:s=wS()}={}){Nn(this,Be);Nn(this,ji,Promise.withResolvers());Nn(this,Tn,null);Nn(this,li,null);Nn(this,fs,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,n){if(Qt(Zt,gs).has(n))throw new Error("Cannot use more than one PDFWorker per port.");Qt(Zt,gs).set(n,this),kn(this,Be,Jy).call(this,n)}else kn(this,Be,tb).call(this)}get promise(){return Qt(this,ji).promise}get port(){return Qt(this,li)}get messageHandler(){return Qt(this,Tn)}destroy(){this.destroyed=!0,Qt(this,fs)?.terminate(),Ve(this,fs,null),Qt(Zt,gs).delete(Qt(this,li)),Ve(this,li,null),Qt(this,Tn)?.destroy(),Ve(this,Tn,null)}static create(t){const n=Qt(this,gs).get(t?.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Zt(t)}static get workerSrc(){if(Gi.workerSrc)return Gi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return wt(this,"_setupFakeWorkerGlobal",(async()=>Qt(this,ya,Cl)?Qt(this,ya,Cl):(await import(this.workerSrc)).WorkerMessageHandler)())}};ji=new WeakMap,Tn=new WeakMap,li=new WeakMap,fs=new WeakMap,Nl=new WeakMap,ps=new WeakMap,gs=new WeakMap,Be=new WeakSet,Tl=function(){Qt(this,ji).resolve(),Qt(this,Tn).send("configure",{verbosity:this.verbosity})},Jy=function(t){Ve(this,li,t),Ve(this,Tn,new Tr("main","worker",t)),Qt(this,Tn).on("ready",()=>{}),kn(this,Be,Tl).call(this)},tb=function(){if(Qt(Zt,ps)||Qt(Zt,ya,Cl)){kn(this,Be,Cr).call(this);return}let{workerSrc:t}=Zt;try{Zt._isSameOrigin(window.location,t)||(t=Zt._createCDNWrapper(new URL(t,window.location).href));const n=new Worker(t,{type:"module"}),s=new Tr("main","worker",n),a=()=>{o.abort(),s.destroy(),n.terminate(),this.destroyed?Qt(this,ji).reject(new Error("Worker was destroyed")):kn(this,Be,Cr).call(this)},o=new AbortController;n.addEventListener("error",()=>{Qt(this,fs)||a()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}Ve(this,Tn,s),Ve(this,li,n),Ve(this,fs,n),kn(this,Be,Tl).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{kn(this,Be,Cr).call(this)}});const l=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};l();return}catch{zl("The worker has been disabled.")}kn(this,Be,Cr).call(this)},Cr=function(){Qt(Zt,ps)||(vt("Setting up fake worker."),Ve(Zt,ps,!0)),Zt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Qt(this,ji).reject(new Error("Worker was destroyed"));return}const n=new VS;Ve(this,li,n);const s=`fake${dm(Zt,Nl)._++}`,a=new Tr(s+"_worker",s,n);t.setup(a,n),Ve(this,Tn,new Tr(s,s+"_worker",n)),kn(this,Be,Tl).call(this)}).catch(t=>{Qt(this,ji).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ya=new WeakSet,Cl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Nn(Zt,ya),Nn(Zt,Nl,0),Nn(Zt,ps,!1),Nn(Zt,gs,new WeakMap),ke&&(Ve(Zt,ps,!0),Gi.workerSrc||="./pdf.worker.mjs"),Zt._isSameOrigin=(t,n)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const a=new URL(n,s);return s.origin===a.origin},Zt._createCDNWrapper=t=>{const n=`await import("${t}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Zt.fromPort=t=>{if(OS("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Zt.create(t)};let va=Zt;class PE{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,n,s,a,o,l){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new Zy,this.fontLoader=new US({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(t,n=null){const s=this.#t.get(t);if(s)return s;const a=this.messageHandler.sendWithPromise(t,n);return this.#t.set(t,a),a}get annotationStorage(){return wt(this,"annotationStorage",new ed)}getRenderingIntent(t,n=Hn.ENABLE,s=null,a=!1,o=!1){let l=sn.DISPLAY,u=Dh;switch(t){case"any":l=sn.ANY;break;case"display":break;case"print":l=sn.PRINT;break;default:vt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&sn.PRINT&&s instanceof Uy?s:this.annotationStorage;switch(n){case Hn.DISABLE:l+=sn.ANNOTATIONS_DISABLE;break;case Hn.ENABLE:break;case Hn.ENABLE_FORMS:l+=sn.ANNOTATIONS_FORMS;break;case Hn.ENABLE_STORAGE:l+=sn.ANNOTATIONS_STORAGE,u=d.serializable;break;default:vt(`getRenderingIntent - invalid annotationMode: ${n}`)}a&&(l+=sn.IS_EDITING),o&&(l+=sn.OPLIST);const{ids:p,hash:g}=d.modifiedIds,y=[l,u.hash,g];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),kr.cleanup(),this._networkStream?.cancelAllRequests(new hi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(s,a)=>{Lt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}Lt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{n.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(s,a)=>{Lt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){a.close();return}Lt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,n._capability.resolve(new kE(s,this))}),t.on("DocException",s=>{n._capability.reject(qe(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!n.onPassword)throw qe(s);const a=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};n.onPassword(a,s.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",s=>{n.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,a,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":if("error"in o){const g=o.error;vt(`Error during font loading: ${g}`),this.commonObjs.resolve(s,g);break}const l=new Gt(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,d=new HS(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:p}=o;Lt(p,"The imageRef must be defined.");for(const g of this.#e.values())for(const[,y]of g.objs)if(y?.ref===p)return y.dataLen?(this.commonObjs.resolve(s,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([s,a,o,l])=>{if(this.destroyed)return;const u=this.#e.get(a);if(!u.objs.has(s)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||n.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[s.type];if(!a)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&vt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=t-1,s=this.#i.get(n);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const l=new BE(n,o,this,this._params.pdfBug);return this.#e.set(n,l),l});return this.#i.set(n,a),a}getPageIndex(t){return Lh(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,n){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:n})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(n=>new pE(n,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",n=this.#t.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new dE(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#e.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),kr.cleanup()}}cachedPageNumber(t){if(!Lh(t))return null;const n=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(n)??null}}class zE{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:n}=this.#t;return t.form||t.canvas&&n?.size>0}}class ha{#t=null;static#e=new WeakSet;constructor({callback:t,params:n,objs:s,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:E=null}){this.callback=t,this.params=n,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zE(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=A,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=E}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(ha.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ha.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new da(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ha.#e.delete(this._canvas),t||=new Fl(`Rendering cancelled, page ${this._pageIndex+1}`,n),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ha.#e.delete(this._canvas),this.callback())))}}const eb="5.4.296",nb="f56dc8601";class an{#t=null;#e=null;#i;#n=null;#r=!1;#s=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return wt(this,"_keyboardManager",new Vr([[["Escape","mac+Escape"],an.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],an.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],an.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],an.prototype._moveToPrevious],[["Home","mac+Home"],an.prototype._moveToBeginning],[["End","mac+End"],an.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:n=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#l=t?._uiManager||n,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",an.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const n=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:n}),t.addEventListener("keydown",this.#m.bind(this),{signal:n});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#i,t.append(s),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),n=this.#l._signal;t.addEventListener("contextmenu",on,{signal:n}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=s,o.setAttribute("data-l10n-id",an.#d[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#i,o.addEventListener("click",this.#f.bind(this,a),{signal:n}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:n}),t}#f(t,n){n.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Mt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const n=t.target.getAttribute("data-color");n&&this.#f(n,t)}_moveToNext(t){if(!this.#g){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#g){this.#p(t);return}this.#n.lastChild?.focus()}#m(t){an._keyboardManager.exec(this,t)}#p(t){if(this.#g){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const n=this.#n=this.#h();this.#t.append(n)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#g){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const n=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=n.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Br{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,Br.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:n,colorValue:s}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=s||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Br.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(n,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Zm(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function wr(h){return Math.max(0,Math.min(255,255*h))}class Jm{static CMYK_G([t,n,s,a]){return["G",1-Math.min(1,.3*t+.59*s+.11*n+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=wr(t),[t,t,t]}static G_HTML([t]){const n=Zm(t);return`#${n}${n}${n}`}static RGB_G([t,n,s]){return["G",.3*t+.59*n+.11*s]}static RGB_rgb(t){return t.map(wr)}static RGB_HTML(t){return`#${t.map(Zm).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,n,s,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,s+a),1-Math.min(1,n+a)]}static CMYK_rgb([t,n,s,a]){return[wr(1-Math.min(1,t+a)),wr(1-Math.min(1,s+a)),wr(1-Math.min(1,n+a))]}static CMYK_HTML(t){const n=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([t,n,s]){const a=1-t,o=1-n,l=1-s,u=Math.min(a,o,l);return["CMYK",a,o,l,u]}}class FE{create(t,n,s=!1){if(t<=0||n<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${n}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${n}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Xt("Abstract method `_createSVG` called.")}}class Pr extends FE{_createSVG(t){return document.createElementNS(oi,t)}}const UE=9,ys=new WeakSet,HE=new Date().getTimezoneOffset()*60*1e3;class ty{static create(t){switch(t.data.annotationType){case ce.LINK:return new ld(t);case ce.TEXT:return new jE(t);case ce.WIDGET:switch(t.data.fieldType){case"Tx":return new GE(t);case"Btn":return t.data.radioButton?new ib(t):t.data.checkBox?new qE(t):new XE(t);case"Ch":return new YE(t);case"Sig":return new VE(t)}return new Ss(t);case ce.POPUP:return new kh(t);case ce.FREETEXT:return new sb(t);case ce.LINE:return new KE(t);case ce.SQUARE:return new WE(t);case ce.CIRCLE:return new QE(t);case ce.POLYLINE:return new ab(t);case ce.CARET:return new JE(t);case ce.INK:return new cd(t);case ce.POLYGON:return new ZE(t);case ce.HIGHLIGHT:return new rb(t);case ce.UNDERLINE:return new t1(t);case ce.SQUIGGLY:return new e1(t);case ce.STRIKEOUT:return new n1(t);case ce.STAMP:return new ob(t);case ce.FILEATTACHMENT:return new i1(t);default:return new ie(t)}}}class ie{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:n=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=n,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,n&&(this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:n}){return!!(t?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ie._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,n=this.annotationStorage?.getEditor(t.id);return n?n.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:n,inkLists:s,rect:a}=this.data;let o=-1/0,l=-1/0;if(n?.length>=8){for(let u=0;u<n.length;u+=8)n[u+1]>l?(l=n[u+1],o=n[u+2]):n[u+1]===l&&(o=Math.max(o,n[u+2]));return[o,l]}if(s?.length>=1){for(const u of s)for(let d=0,p=u.length;d<p;d+=2)u[d+1]>l?(l=u[d+1],o=u[d]):u[d+1]===l&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,l]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:n},viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}=this.parent;return t[1]=n[3]-t[1]+n[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-l)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Lr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:n}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(n.id,{popup:s})||this.annotationStorage.setValue(`${Lr}${n.id}`,{id:n.id,annotationType:n.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:n.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:n,popup:s}=t;n&&this.#n(n);let a=this.#i?.popup||this.popup;!a&&s?.text&&(this._createPopup(s),a=this.#i.popup),a&&(a.updateEdited(t),s?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:n},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t),n.left=`${100*(t[0]-u)/o}%`,n.top=`${100*(l-t[3]+d)/l}%`,a===0?(n.width=`${100*(t[2]-t[0])/o}%`,n.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:n,parent:{page:s,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",n.id),!(this instanceof Ss)&&!(this instanceof ld)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,n.alternativeText&&(o.title=n.alternativeText),n.noRotate&&o.classList.add("norotate"),!n.rect||this instanceof kh){const{rotation:S}=n;return!n.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=this;if(!t&&n.borderStyle.width>0){l.borderWidth=`${n.borderStyle.width}px`;const S=n.borderStyle.horizontalCornerRadius,_=n.borderStyle.verticalCornerRadius;if(S>0||_>0){const T=`calc(${S}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;l.borderRadius=T}else if(this instanceof ib){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=T}switch(n.borderStyle.style){case la.SOLID:l.borderStyle="solid";break;case la.DASHED:l.borderStyle="dashed";break;case la.BEVELED:vt("Unimplemented border style: beveled");break;case la.INSET:vt("Unimplemented border style: inset");break;case la.UNDERLINE:l.borderBottomStyle="solid";break}const w=n.borderColor||null;w?(this.#e=!0,l.borderColor=nt.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):l.borderWidth=0}const p=nt.normalizeRect([n.rect[0],s.view[3]-n.rect[1]+s.view[1],n.rect[2],s.view[3]-n.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:A}=a.rawDims;l.left=`${100*(p[0]-b)/g}%`,l.top=`${100*(p[1]-A)/y}%`;const{rotation:E}=n;return n.hasOwnCanvas||E===0?(l.width=`${100*u/g}%`,l.height=`${100*d/y}%`):this.setRotation(E,o),o}setRotation(t,n=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),n.style.width=`${100*o/s}%`,n.style.height=`${100*l/a}%`,n.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(n,s,a)=>{const o=a.detail[n],l=o[0],u=o.slice(1);a.target.style[s]=Jm[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Jm[`${l}_rgb`](u)})};return wt(this,"_commonActions",{display:n=>{const{display:s}=n.detail,a=s%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:s===1||s===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:s}=n.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{t("bgColor","backgroundColor",n)},fillColor:n=>{t("fillColor","backgroundColor",n)},fgColor:n=>{t("fgColor","color",n)},textColor:n=>{t("textColor","color",n)},borderColor:n=>{t("borderColor","borderColor",n)},strokeColor:n=>{t("strokeColor","borderColor",n)},rotation:n=>{const s=n.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,n){const s=this._commonActions;for(const a of Object.keys(n.detail))(t[a]||s[a])?.(n)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const s=this._commonActions;for(const[a,o]of Object.entries(n)){const l=s[a];if(l){const u={detail:{[a]:o},target:t};l(u),delete n[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[n,s,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,_,w,T]=t.subarray(2,6);if(a===S&&o===_&&n===w&&s===T)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:_}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const d=a-n,p=o-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=g.createElement("defs");y.append(b);const A=g.createElement("clipPath"),E=`clippath_${this.data.id}`;A.setAttribute("id",E),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let S=2,_=t.length;S<_;S+=8){const w=t[S],T=t[S+1],C=t[S+2],O=t[S+3],M=g.createElement("rect"),P=(C-n)/d,B=(o-T)/p,I=(w-C)/d,q=(T-O)/p;M.setAttribute("x",P),M.setAttribute("y",B),M.setAttribute("width",I),M.setAttribute("height",q),A.append(M),u?.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${B}" width="${I}" height="${q}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${E})`}_createPopup(t=null){const{data:n}=this;let s,a;t?(s={str:t.text},a=t.date):(s=n.contentsObj,a=n.modificationDate);const o=this.#i=new kh({data:{color:n.color,titleObj:n.titleObj,modificationDate:a,contentsObj:s,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Xt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,n=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:u}of a){if(o===-1||l===n)continue;const d=typeof u=="string"?u:null,p=document.querySelector(`[data-element-id="${l}"]`);if(p&&!ys.has(p)){vt(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:d,domElement:p})}return s}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==n&&ys.has(a)&&s.push({id:l,exportValue:o,domElement:a})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const n of t)n.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class IE extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class ld extends ie{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let a=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(s,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),a=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,n,s=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),s&&(t.title=s),this.#t()}#e(t,n,s="",a=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,a),!1),this.#t()}#i(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const o=s.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1))}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){vt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:a,refs:o,include:l}=n,u=[];if(a.length!==0||o.length!==0){const g=new Set(o);for(const y of a){const b=this._fieldObjects[y]||[];for(const{id:A}of b)g.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===l&&u.push(b)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const d=this.annotationStorage,p=[];for(const g of u){const{id:y}=g;switch(p.push(y),g.type){case"text":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;d.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!ys.has(b)){vt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}}),!1}}}class jE extends ie{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ss extends ie{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Se.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,n,s,a,o){s.includes("mouse")?t.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(s,l=>{if(s==="blur"){if(!n.focused||!l.relatedTarget)return;n.focused=!1}else if(s==="focus"){if(n.focused)return;n.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,n,s,a){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(n||={focused:!1}),this._setEventListener(t,n,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,n,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,n,"focus","Focus",null))}_setBackgroundColor(t){const n=this.data.backgroundColor||null;t.style.backgroundColor=n===null?"transparent":nt.makeHexColor(n[0],n[1],n[2])}_setTextStyle(t){const n=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||UE,o=t.style;let l;const u=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(p/(mh*a))||1,y=p/g;l=Math.min(a,d(y/mh))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(a,d(p/mh))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=nt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=n[this.data.textAlignment])}_setRequired(t,n){n?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",n)}}class GE extends Ss{constructor(t){const n=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:n})}setPropertyOnSiblings(t,n,s,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[n]=s),o.setValue(l.id,{[a]:s})}render(){const t=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=t.getValue(n,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(n,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),ys.add(s),s.setAttribute("data-element-id",n),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:p,datetimeType:g,timeStep:y}=this.data,b=!!g&&this.enableScripting;p&&(s.title=p),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",E=>{t.setValue(n,{value:E.target.value}),this.setPropertyOnSiblings(s,"value",E.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",E=>{const S=this.data.defaultFieldValue??"";s.value=d.userValue=S,d.formattedValue=null});let A=E=>{const{formattedValue:S}=d;S!=null&&(E.target.value=S),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(d.focused)return;const{target:_}=S;if(b&&(_.type=g,y&&(_.step=y)),d.userValue){const w=d.userValue;if(b)if(g==="time"){const T=new Date(w),C=[T.getHours(),T.getMinutes(),T.getSeconds()];_.value=C.map(O=>O.toString().padStart(2,"0")).join(":")}else _.value=new Date(w-HE).toISOString().split(g==="date"?"T":".",1)[0];else _.value=w}d.lastCommittedValue=_.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const _={value(w){d.userValue=w.detail.value??"",b||t.setValue(n,{value:d.userValue.toString()}),w.target.value=d.userValue},formattedValue(w){const{formattedValue:T}=w.detail;d.formattedValue=T,T!=null&&w.target!==document.activeElement&&(w.target.value=T);const C={formattedValue:T};b&&(C.value=T),t.setValue(n,C)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{const{charLimit:T}=w.detail,{target:C}=w;if(T===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",T);let O=d.userValue;!O||O.length<=T||(O=O.slice(0,T),C.value=d.userValue=O,t.setValue(n,{value:O}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(_,S)}),s.addEventListener("keydown",S=>{d.commitKey=1;let _=-1;if(S.key==="Escape"?_=0:S.key==="Enter"&&!this.data.multiLine?_=2:S.key==="Tab"&&(d.commitKey=3),_===-1)return;const{value:w}=S.target;d.lastCommittedValue!==w&&(d.lastCommittedValue=w,d.userValue=w,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:w,willCommit:!0,commitKey:_,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const E=A;A=null,s.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:_}=S;let{value:w}=_;if(b){if(w&&g==="time"){const T=w.split(":").map(C=>parseInt(C,10));w=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),_.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();_.type="text"}d.userValue=w,d.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:w,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),E(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:_,target:w}=S,{value:T,selectionStart:C,selectionEnd:O}=w;let M=C,P=O;switch(S.inputType){case"deleteWordBackward":{const B=T.substring(0,C).match(/\w*[^\w]*$/);B&&(M-=B[0].length);break}case"deleteWordForward":{const B=T.substring(C).match(/^[^\w]*\w*/);B&&(P+=B[0].length);break}case"deleteContentBackward":C===O&&(M-=1);break;case"deleteContentForward":C===O&&(P+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:T,change:_||"",willCommit:!1,selStart:M,selEnd:P}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class VE extends Ss{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class qE extends Ss{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,n=this.data,s=n.id;let a=t.getValue(s,{value:n.exportValue===n.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ys.add(o),o.setAttribute("data-element-id",s),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=n.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",n.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const p of this._getElementsByName(u,s)){const g=d&&p.exportValue===n.exportValue;p.domElement&&(p.domElement.checked=g),t.setValue(p.id,{value:g})}t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=n.defaultFieldValue||"Off";l.target.checked=u===n.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class ib extends Ss{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,n=this.data,s=n.id;let a=t.getValue(s,{value:n.fieldValue===n.buttonValue}).value;if(typeof a=="string"&&(a=a!==n.buttonValue,t.setValue(s,{value:a})),a)for(const l of this._getElementsByName(n.fieldName,s))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(ys.add(o),o.setAttribute("data-element-id",s),o.disabled=n.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=n.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const p of this._getElementsByName(u,s))t.setValue(p.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=n.defaultFieldValue;l.target.checked=u!=null&&u===n.buttonValue}),this.enableScripting&&this.hasJSActions){const l=n.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:p=>{const g=l===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=g&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class XE extends ld{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const n=t.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class YE extends Ss{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,n=this.data.id,s=t.getValue(n,{value:this.data.fieldValue}),a=document.createElement("select");ys.add(a),a.setAttribute("data-element-id",n),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),l=()=>{g.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const u=g=>{const y=g?"value":"textContent",{options:b,multiple:A}=a;return A?Array.prototype.filter.call(b,E=>E.selected).map(E=>E[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=u(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(b){l?.();const A=b.detail.value,E=new Set(Array.isArray(A)?A:[A]);for(const S of a.options)S.selected=E.has(S.value);t.setValue(n,{value:u(!0)}),d=u(!1)},multipleSelection(b){a.multiple=!0},remove(b){const A=a.options,E=b.detail.remove;A[E].selected=!1,a.remove(E),A.length>0&&Array.prototype.findIndex.call(A,_=>_.selected)===-1&&(A[0].selected=!0),t.setValue(n,{value:u(!0),items:p(b)}),d=u(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(n,{value:null,items:[]}),d=u(!1)},insert(b){const{index:A,displayValue:E,exportValue:S}=b.detail.insert,_=a.children[A],w=document.createElement("option");w.textContent=E,w.value=S,_?_.before(w):a.append(w),t.setValue(n,{value:u(!0),items:p(b)}),d=u(!1)},items(b){const{items:A}=b.detail;for(;a.length!==0;)a.remove(0);for(const E of A){const{displayValue:S,exportValue:_}=E,w=document.createElement("option");w.textContent=S,w.value=_,a.append(w)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(n,{value:u(!0),items:p(b)}),d=u(!1)},indices(b){const A=new Set(b.detail.indices);for(const E of b.target.options)E.selected=A.has(E.index);t.setValue(n,{value:u(!0)}),d=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{const y=u(!0),b=u(!1);t.setValue(n,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(n,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class kh extends ie{constructor(t){const{data:n,elements:s,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&ie._hasPopupData(n)}),this.elements=s,o&&ie._hasPopupData(n)){const l=this.popup=this.#t();for(const u of s)u.popup=l}else this.popup=null}#t(){return new $E({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=this.#t(),s=[];for(const a of this.elements)a.popup=n,a.container.ariaHasPopup="dialog",s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${Wh}${a}`).join(",")),this.container}}class $E{#t=null;#e=this.#V.bind(this);#i=this.#U.bind(this);#n=this.#N.bind(this);#r=this.#S.bind(this);#s=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#y=null;#v=null;#b=null;#x=null;#w=null;#A=null;#C=!1;#E=null;#_=null;constructor({container:t,color:n,elements:s,titleObj:a,modificationDate:o,contentsObj:l,richText:u,parent:d,rect:p,parentRect:g,open:y,commentManager:b=null}){this.#a=t,this.#w=a,this.#o=l,this.#x=u,this.#d=d,this.#s=n,this.#b=p,this.#h=g,this.#l=s,this.#t=b,this.#E=s[0],this.#c=Dl.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),b?this.renderCommentButton():(this.#D(),this.#a.hidden=!0,y&&this.#S())}#D(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const n of this.trigger)n.addEventListener("click",this.#r,{signal:t}),n.addEventListener("pointerenter",this.#n,{signal:t}),n.addEventListener("pointerleave",this.#i,{signal:t}),n.classList.add("popupTriggerArea");for(const n of this.#l)n.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(n=>n.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#g||(this.#y||this.#R(),!this.#y))return;const{signal:t}=this.#p=new AbortController,n=!!this.#E.extraPopupElement,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!n)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!n)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(n){this.#g=this.#E.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#g=document.createElement("button");l.className="annotationCommentButton";const u=this.#E.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#M(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#M(){if(this.#E.extraPopupElement&&!this.#E.editor)return;this.renderCommentButton();const[t,n]=this.#y,{style:s}=this.#g;s.left=`calc(${t}%)`,s.top=`calc(${n}% - var(--comment-button-dim))`}#z(){this.#E.extraPopupElement||(this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:n}=this.#E.commentData;return t?this.#d._commentManager.makeCommentColor(t,n):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:t,color:n,opacity:s,creationDate:a,modificationDate:o}=this.#E.commentData;return{contentsObj:{str:this.comment},richText:t,color:n,opacity:s,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#g}get comment(){return this.#_||=this.#E.commentText,this.#_}set comment(t){t!==this.comment&&(this.#E.commentText=this.#_=t)}get parentBoundingClientRect(){return this.#E.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:n}){this.#g&&(this.#g.classList.toggle("selected",t),this.#g.ariaExpanded=n)}setSelectedCommentButton(t){this.#g.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:n,height:s}=this.#g.getBoundingClientRect(),{x:a,y:o,width:l,height:u}=this.#E.layer.getBoundingClientRect();return[(t-a)/l,(n+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[n,s]=this.#v||this.commentButtonPosition.map(p=>p/100),a=this.parentBoundingClientRect,{x:o,y:l,width:u,height:d}=a;this.#t.showDialog(null,this,o+n*u,l+s*d,{...t,parentDimensions:a})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#s){const s=t.style.outlineColor=nt.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const n=document.createElement("span");if(n.className="header",this.#w?.str){const s=document.createElement("span");s.className="title",n.append(s),{dir:s.dir,str:s.textContent}=this.#w}if(t.append(n),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),n.append(s)}Zh({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#O(){const t=this.#x,n=this.#o;return t?.str&&(!n?.str||n.str===t.str)&&this.#x.html||null}get#k(){return this.#O?.attributes?.style?.fontSize||0}get#F(){return this.#O?.attributes?.style?.color||null}#B(t){const n=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},a={style:{color:this.#F,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))n.push({name:"span",value:o,attributes:a});return s}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:n,deleted:s}){if(this.#t){s?(this.remove(),this.#_=null):n&&(n.deleted?this.remove():(this.#z(),this.#_=n.text)),t&&(this.#y=null,this.#R(),this.#M());return}if(s||n?.deleted){this.remove();return}this.#D(),this.#A||={contentsObj:this.#o,richText:this.#x},t&&(this.#u=null),n&&n.text&&(this.#x=this.#B(n.text),this.#c=Dl.toDateObject(n.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#x}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#b;for(const E of this.#l)if(!u||nt.intersect(E.data.rect,u)!==null){u=E.data.rect,l=!0;break}const d=nt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=l?u[2]-u[0]+5:0,y=d[0]+g,b=d[1];this.#u=[100*(y-a)/n,100*(b-o)/s];const{style:A}=this.#a;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#U(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#N(){this.#m||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#T(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#U(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#C&&(this.#m||this.#N(),this.#C=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class sb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=bt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const n of this.textContent){const s=document.createElement("span");s.textContent=n,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class KE extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class WE extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",n-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class QE extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",n/2),l.setAttribute("cy",s/2),l.setAttribute("rx",n/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ab extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:a},width:o,height:l}=this;if(!n)return this.container;const u=this.svgFactory.create(o,l,!0);let d=[];for(let g=0,y=n.length;g<y;g+=2){const b=n[g]-t[0],A=t[3]-n[g+1];d.push(`${b},${A}`)}d=d.join(" ");const p=this.#t=this.svgFactory.createElement(this.svgElementName);return p.setAttribute("points",d),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),u.append(p),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ZE extends ab{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class JE extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class cd extends ie{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?bt.HIGHLIGHT:bt.INK}#i(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:s,borderStyle:a,popupRef:o}}=this,{transform:l,width:u,height:d}=this.#i(n,t),p=this.svgFactory.create(u,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");p.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let y=0,b=s.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),g.append(A)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:s,rect:a}=t,o=this.#t;if(n>=0&&o.setAttribute("stroke-width",n||1),s)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",s[l].join(","));if(a){const{transform:l,width:u,height:d}=this.#i(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class rb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=bt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class t1 extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class e1 extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class n1 extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class ob extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=bt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class i1 extends ie{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:a}=Se.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let ud=class lb{#t=null;#e=null;#i=null;#n=new Map;#r=null;#s=null;constructor({div:t,accessibilityManager:n,annotationCanvasMap:s,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:u,commentManager:d,linkService:p,annotationStorage:g}){this.div=t,this.#t=n,this.#e=s,this.#r=u||null,this.#s=p||null,this.#i=g||new ed,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,n,s){const a=t.firstChild||t,o=a.id=`${Wh}${n}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[u,d]of l)a.setAttribute(u,d);s?s.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:n}=t,s=this.div;Vi(s,this.viewport);const a=new Map,o={data:null,layer:s,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Pr,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of n){if(l.noHTML)continue;const u=l.annotationType===ce.POPUP;if(u){const g=a.get(l.id);if(!g)continue;o.elements=g}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=ty.create(o);if(!d.isRenderable)continue;if(!u&&l.popupRef){const g=a.get(l.popupRef);g?g.push(d):a.set(l.popupRef,[d])}const p=d.render();l.hidden&&(p.style.visibility="hidden"),await this.#a(p,l.id,o.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(t){const n={data:null,layer:this.div,linkService:this.#s,svgFactory:new Pr,parent:this};for(const s of t){s.borderStyle||=lb._defaultBorderStyle,n.data=s;const a=ty.create(n);if(!a.isRenderable)continue;const o=a.render();await this.#a(o,s.id,null)}}update({viewport:t}){const n=this.div;this.viewport=t,Vi(n,{rotation:t.rotation}),this.#o(),n.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[n,s]of this.#e){const a=t.querySelector(`[data-annotation-id="${n}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):a.append(s);const l=this.#n.get(n);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(n,a.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:n}=this,{id:s,rotation:a}=t,o=new IE({data:{id:s,rect:t.getPDFRect(),rotation:a},editor:t,layer:n,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#i}),l=o.render();return n.append(l),this.#t?.moveElementInDOM(n,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return wt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:la.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const El=/\r\n?|\n/g;class ve extends ct{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=ve.prototype,n=o=>o.isEmpty(),s=di.TRANSLATE_SMALL,a=di.TRANSLATE_BIG;return wt(this,"_keyboardManager",new Vr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}]]))}static _type="freetext";static _editorType=bt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||ve._defaultColor||ct._defaultLineColor,this.#n=t.fontSize||ve._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,n){ct.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Mt.FREETEXT_SIZE:ve._defaultFontSize=n;break;case Mt.FREETEXT_COLOR:ve._defaultColor=n;break}}updateParams(t,n){switch(t){case Mt.FREETEXT_SIZE:this.#r(n);break;case Mt.FREETEXT_COLOR:this.#s(n);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,ve._defaultFontSize],[Mt.FREETEXT_COLOR,ve._defaultColor||ct._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,this.#n],[Mt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Br(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.FREETEXT_COLOR}#r(t){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},s=this.#n;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){const n=a=>{this.color=a,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-ve._internalPadding*t,-(ve._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(ve.#c(s)),n=s);return t.join(`
`)}#o(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,n=this.#t=this.#a().trimEnd();if(t===n)return;const s=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ve._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[p,g]=this.pageDimensions,[y,b]=this.pageTranslation;let A,E;switch(this.rotation){case 0:A=t+(l[0]-y)/p,E=n+this.height-(l[1]-b)/g;break;case 90:A=t+(l[0]-y)/p,E=n-(l[1]-b)/g,[u,d]=[d,-u];break;case 180:A=t-this.width+(l[0]-y)/p,E=n-(l[1]-b)/g,[u,d]=[-u,-d];break;case 270:A=t+(l[0]-y-this.height*g)/p,E=n+(l[1]-b-this.width*p)/g,[u,d]=[-d,u];break}this.setAt(A*a,E*o,u,d)}else this._moveAfterPaste(t,n);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(El,"")}editorDivPaste(t){const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const a=ve.#h(n.getData("text")||"").replaceAll(El,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=l,p=[],g=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(g.push(u.nodeValue.slice(d).replaceAll(El,"")),A!==this.editorDiv){let E=p;for(const S of this.editorDiv.childNodes){if(S===A){E=g;continue}E.push(ve.#c(S))}}p.push(u.nodeValue.slice(0,d).replaceAll(El,""))}else if(u===this.editorDiv){let A=p,E=0;for(const S of this.editorDiv.childNodes)E++===d&&(A=g),A.push(ve.#c(S))}this.#t=`${p.join(`
`)}${a}${g.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(p.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const E=A.nodeValue.length;if(b<=E){y.setStart(A,b),y.setEnd(A,b);break}b-=E}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}}#d(){return this.#t.replaceAll(" "," ")}static#h(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=ve._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,s){let a=null;if(t instanceof sb){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:p,id:g,popupRef:y,richText:b,contentsObj:A,creationDate:E,modificationDate:S},textContent:_,textPosition:w,parent:{page:{pageNumber:T}}}=t;if(!_||_.length===0)return null;a=t={annotationType:bt.FREETEXT,color:Array.from(u),fontSize:l,value:_.join(`
`),position:w,pageIndex:T-1,rect:d.slice(0),rotation:p,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:A?.str||null,richText:b,creationDate:E,modificationDate:S}}const o=await super.deserialize(t,n,s);return o.#n=t.fontSize,o.color=nt.makeHexColor(...t.color),o.#t=ve.#h(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ct._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:n,fontSize:this.#n,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:n,fontSize:s,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((l,u)=>l!==a[u])||t.pageIndex!==o}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:s}=n;s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,n.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),n.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class et{static PRECISION=1e-4;toSVGPath(){Xt("Abstract method `toSVGPath` must be implemented.")}get box(){Xt("Abstract getter `box` must be implemented.")}serialize(t,n){Xt("Abstract method `serialize` must be implemented.")}static _rescale(t,n,s,a,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=n+t[u]*a,l[u+1]=s+t[u+1]*o;return l}static _rescaleAndSwap(t,n,s,a,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=n+t[u+1]*a,l[u+1]=s+t[u]*o;return l}static _translate(t,n,s,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=n+t[o],a[o+1]=s+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,n,s,a,o){switch(o){case 90:return[1-n/s,t/a];case 180:return[1-t/s,1-n/a];case 270:return[n/s,1-t/a];default:return[t/s,n/a]}}static _normalizePagePoint(t,n,s){switch(s){case 90:return[1-n,t];case 180:return[1-t,1-n];case 270:return[n,1-t];default:return[t,n]}}static createBezierPoints(t,n,s,a,o,l){return[(t+5*s)/6,(n+5*a)/6,(5*s+o)/6,(5*a+l)/6,(s+o)/2,(a+l)/2]}}class ds{#t;#e=[];#i;#n;#r=[];#s=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#m=8;static#p=2;static#u=ds.#m+ds.#p;constructor({x:t,y:n},s,a,o,l,u=0){this.#t=s,this.#h=o*a,this.#n=l,this.#s.set([NaN,NaN,NaN,NaN,t,n],6),this.#i=u,this.#l=ds.#m*a,this.#c=ds.#u*a,this.#d=a,this.#f.push(t,n)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[s,a,o,l]=this.#t;return[(this.#a+(t[0]-n[0])/2-s)/o,(this.#o+(t[1]-n[1])/2-a)/l,(this.#a+(n[0]-t[0])/2-s)/o,(this.#o+(n[1]-t[1])/2-a)/l]}add({x:t,y:n}){this.#a=t,this.#o=n;const[s,a,o,l]=this.#t;let[u,d,p,g]=this.#s.subarray(8,12);const y=t-p,b=n-g,A=Math.hypot(y,b);if(A<this.#c)return!1;const E=A-this.#l,S=E/A,_=S*y,w=S*b;let T=u,C=d;u=p,d=g,p+=_,g+=w,this.#f?.push(t,n);const O=-w/E,M=_/E,P=O*this.#h,B=M*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([p+P,g+B],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([p-P,g-B],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([u+P,d+B],2),this.#r.push(NaN,NaN,NaN,NaN,(u+P-s)/o,(d+B-a)/l),this.#s.set([u-P,d-B],14),this.#e.push(NaN,NaN,NaN,NaN,(u-P-s)/o,(d-B-a)/l)),this.#s.set([T,C,u,d,p,g],6),!this.isEmpty()):(this.#s.set([T,C,u,d,p,g],6),Math.abs(Math.atan2(C-d,T-u)-Math.atan2(w,_))<Math.PI/2?([u,d,p,g]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+p)/2-s)/o,((d+g)/2-a)/l),[u,d,T,C]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+u)/2-s)/o,((C+d)/2-a)/l),!0):([T,C,u,d,p,g]=this.#s.subarray(0,6),this.#r.push(((T+5*u)/6-s)/o,((C+5*d)/6-a)/l,((5*u+p)/6-s)/o,((5*d+g)/6-a)/l,((u+p)/2-s)/o,((d+g)/2-a)/l),[p,g,u,d,T,C]=this.#s.subarray(12,18),this.#e.push(((T+5*u)/6-s)/o,((C+5*d)/6-a)/l,((5*u+p)/6-s)/o,((5*d+g)/6-a)/l,((u+p)/2-s)/o,((d+g)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,n=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?s.push(`L${t[a+4]} ${t[a+5]}`):s.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#b(s);for(let a=n.length-6;a>=6;a-=6)isNaN(n[a])?s.push(`L${n[a+4]} ${n[a+5]}`):s.push(`C${n[a]} ${n[a+1]} ${n[a+2]} ${n[a+3]} ${n[a+4]} ${n[a+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,n,s,a]=this.#t,[o,l,u,d]=this.#g();return`M${(this.#s[2]-t)/s} ${(this.#s[3]-n)/a} L${(this.#s[4]-t)/s} ${(this.#s[5]-n)/a} L${o} ${l} L${u} ${d} L${(this.#s[16]-t)/s} ${(this.#s[17]-n)/a} L${(this.#s[14]-t)/s} ${(this.#s[15]-n)/a} Z`}#v(t){const n=this.#e;t.push(`L${n[4]} ${n[5]} Z`)}#b(t){const[n,s,a,o]=this.#t,l=this.#s.subarray(4,6),u=this.#s.subarray(16,18),[d,p,g,y]=this.#g();t.push(`L${(l[0]-n)/a} ${(l[1]-s)/o} L${d} ${p} L${g} ${y} L${(u[0]-n)/a} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,n,s,a,o,l){return new cb(t,n,s,a,o,l)}getOutlines(){const t=this.#r,n=this.#e,s=this.#s,[a,o,l,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-a)/l,d[y+1]=(this.#f[y+1]-o)/u;if(d[d.length-2]=(this.#a-a)/l,d[d.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#x(d);const p=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){p[y]=p[y+1]=NaN;continue}p[y]=t[y],p[y+1]=t[y+1]}g=this.#A(p,g);for(let y=n.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(n[y+b])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=n[y+b],p[g+1]=n[y+b+1],g+=2}return this.#w(p,g),this.newFreeDrawOutline(p,d,this.#t,this.#d,this.#i,this.#n)}#x(t){const n=this.#s,[s,a,o,l]=this.#t,[u,d,p,g]=this.#g(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(n[2]-s)/o,(n[3]-a)/l,NaN,NaN,NaN,NaN,(n[4]-s)/o,(n[5]-a)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(n[16]-s)/o,(n[17]-a)/l,NaN,NaN,NaN,NaN,(n[14]-s)/o,(n[15]-a)/l],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#i,this.#n)}#w(t,n){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],n),n+=6}#A(t,n){const s=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[o,l,u,d]=this.#t,[p,g,y,b]=this.#g();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-l)/d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-l)/d],n),n+=24}}class cb extends et{#t;#e=new Float32Array(4);#i;#n;#r;#s;#a;constructor(t,n,s,a,o,l){super(),this.#a=t,this.#r=n,this.#t=s,this.#s=a,this.#i=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,d,p,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/p,t[y+1]=(t[y+1]-d)/g;for(let y=0,b=n.length;y<b;y+=2)n[y]=(n[y]-u)/p,n[y+1]=(n[y+1]-d)/g}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let n=6,s=this.#a.length;n<s;n+=6){if(isNaN(this.#a[n])){t.push(`L${this.#a[n+4]} ${this.#a[n+5]}`);continue}t.push(`C${this.#a[n]} ${this.#a[n+1]} ${this.#a[n+2]} ${this.#a[n+3]} ${this.#a[n+4]} ${this.#a[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,a],o){const l=s-t,u=a-n;let d,p;switch(o){case 0:d=et._rescale(this.#a,t,a,l,-u),p=et._rescale(this.#r,t,a,l,-u);break;case 90:d=et._rescaleAndSwap(this.#a,t,n,l,u),p=et._rescaleAndSwap(this.#r,t,n,l,u);break;case 180:d=et._rescale(this.#a,s,n,-l,u),p=et._rescale(this.#r,s,n,-l,u);break;case 270:d=et._rescaleAndSwap(this.#a,s,a,-l,-u),p=et._rescaleAndSwap(this.#r,s,a,-l,-u);break}return{outline:Array.from(d),points:[Array.from(p)]}}#o(t){const n=this.#a;let s=n[4],a=n[5];const o=[s,a,s,a];let l=s,u=a,d=s,p=a;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,E=n.length;A<E;A+=6){const S=n[A+4],_=n[A+5];isNaN(n[A])?(nt.pointBoundingBox(S,_,o),u>_?(l=S,u=_):u===_&&(l=g(l,S)),p<_?(d=S,p=_):p===_&&(d=g(d,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,nt.bezierBoundingBox(s,a,...n.slice(A,A+6),y),nt.rectBoundingBox(y[0],y[1],y[2],y[3],o),u>y[1]?(l=y[0],u=y[1]):u===y[1]&&(l=g(l,y[0])),p<y[3]?(d=y[2],p=y[3]):p===y[3]&&(d=g(d,y[2]))),s=S,a=_}const b=this.#e;b[0]=o[0]-this.#i,b[1]=o[1]-this.#i,b[2]=o[2]-o[0]+2*this.#i,b[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[l,u],this.lastPoint=[d,p]}get box(){return this.#e}newOutliner(t,n,s,a,o,l=0){return new ds(t,n,s,a,o,l)}getNewOutline(t,n){const[s,a,o,l]=this.#e,[u,d,p,g]=this.#t,y=o*p,b=l*g,A=s*p+u,E=a*g+d,S=this.newOutliner({x:this.#r[0]*y+A,y:this.#r[1]*b+E},this.#t,this.#s,t,this.#n,n??this.#i);for(let _=2;_<this.#r.length;_+=2)S.add({x:this.#r[_]*y+A,y:this.#r[_+1]*b+E});return S.getOutlines()}}class Bh{#t;#e;#i;#n=[];#r=[];constructor(t,n=0,s=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:_,width:w,height:T}of t){const C=Math.floor((S-n)/l)*l,O=Math.ceil((S+w+n)/l)*l,M=Math.floor((_-n)/l)*l,P=Math.ceil((_+T+n)/l)*l,B=[C,M,P,!0],I=[O,M,P,!1];this.#n.push(B,I),nt.rectBoundingBox(C,M,O,P,o)}const u=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,p=o[0]-s,g=o[1]-s;let y=a?-1/0:1/0,b=1/0;const A=this.#n.at(a?-1:-2),E=[A[0],A[2]];for(const S of this.#n){const[_,w,T,C]=S;!C&&a?w<b?(b=w,y=_):w===b&&(y=Math.max(y,_)):C&&!a&&(w<b?(b=w,y=_):w===b&&(y=Math.min(y,_))),S[0]=(_-p)/u,S[1]=(w-g)/d,S[2]=(T-g)/d}this.#t=new Float32Array([p,g,u,d]),this.#e=[y,b],this.#i=E}getOutlines(){this.#n.sort((n,s)=>n[0]-s[0]||n[1]-s[1]||n[2]-s[2]);const t=[];for(const n of this.#n)n[3]?(t.push(...this.#l(n)),this.#o(n)):(this.#c(n),t.push(...this.#l(n)));return this.#s(t)}#s(t){const n=[],s=new Set;for(const l of t){const[u,d,p]=l;n.push([u,d,l],[u,p,l])}n.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=n.length;l<u;l+=2){const d=n[l][2],p=n[l+1][2];d.push(p),p.push(d),s.add(d),s.add(p)}const a=[];let o;for(;s.size>0;){const l=s.values().next().value;let[u,d,p,g,y]=l;s.delete(l);let b=u,A=d;for(o=[u,p],a.push(o);;){let E;if(s.has(g))E=g;else if(s.has(y))E=y;else break;s.delete(E),[u,d,p,g,y]=E,b!==u&&(o.push(b,A,u,A===d?d:p),b=u),A=A===d?p:d}o.push(b,A)}return new s1(a,this.#t,this.#e,this.#i)}#a(t){const n=this.#r;let s=0,a=n.length-1;for(;s<=a;){const o=s+a>>1,l=n[o][0];if(l===t)return o;l<t?s=o+1:a=o-1}return a+1}#o([,t,n]){const s=this.#a(t);this.#r.splice(s,0,[t,n])}#c([,t,n]){const s=this.#a(t);for(let a=s;a<this.#r.length;a++){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===n){this.#r.splice(a,1);return}}for(let a=s-1;a>=0;a--){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===n){this.#r.splice(a,1);return}}}#l(t){const[n,s,a]=t,o=[[n,s,a]],l=this.#a(a);for(let u=0;u<l;u++){const[d,p]=this.#r[u];for(let g=0,y=o.length;g<y;g++){const[,b,A]=o[g];if(!(p<=b||A<=d)){if(b>=d){if(A>p)o[g][1]=p;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,A>p&&o.push([n,p,A])}}}return o}}class s1 extends et{#t;#e;constructor(t,n,s,a){super(),this.#e=t,this.#t=n,this.firstPoint=s,this.lastPoint=a}toSVGPath(){const t=[];for(const n of this.#e){let[s,a]=n;t.push(`M${s} ${a}`);for(let o=2;o<n.length;o+=2){const l=n[o],u=n[o+1];l===s?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,n,s,a],o){const l=[],u=s-t,d=a-n;for(const p of this.#e){const g=new Array(p.length);for(let y=0;y<p.length;y+=2)g[y]=t+p[y]*u,g[y+1]=a-p[y+1]*d;l.push(g)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Ph extends ds{newFreeDrawOutline(t,n,s,a,o,l){return new a1(t,n,s,a,o,l)}}class a1 extends cb{newOutliner(t,n,s,a,o,l=0){return new Ph(t,n,s,a,o,l)}}class ue extends ct{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#p=null;#u="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=bt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ue.prototype;return wt(this,"_keyboardManager",new Vr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ue._defaultColor,this.#g=t.thickness||ue._defaultThickness,this.opacity=t.opacity||ue._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#E()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#E(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Bh(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const n=new Bh(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=n.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:a}=this.#s;this.#m=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:n,clipPathId:s}){this.#l=t;const a=1.5;if(this.#s=t.getNewOutline(this.#g/2+a,.0025),n>=0)this.#d=n,this.#n=s,this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ue.#_(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ue.#_(this.#s.box,y),path:{d:this.#s.toSVGPath()}})}const[o,l,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=d;break;case 90:{const[y,b]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*b/y,this.height=d*y/b;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*b/y,this.height=d*y/b;break}}const{firstPoint:p}=t;this.#f=[(p[0]-o)/u,(p[1]-l)/d];const{lastPoint:g}=this.#s;this.#m=[(g[0]-o)/u,(g[1]-l)/d]}static initialize(t,n){ct.initialize(t,n),ue._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,n){switch(t){case Mt.HIGHLIGHT_COLOR:ue._defaultColor=n;break;case Mt.HIGHLIGHT_THICKNESS:ue._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,n){switch(t){case Mt.HIGHLIGHT_COLOR:this.#x(n);break;case Mt.HIGHLIGHT_THICKNESS:this.#w(n);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,ue._defaultColor],[Mt.HIGHLIGHT_THICKNESS,ue._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||ue._defaultColor],[Mt.HIGHLIGHT_THICKNESS,this.#g||ue._defaultThickness],[Mt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#x(t){const n=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,a=this.opacity;this.addCommands({cmd:n.bind(this,t,ue._defaultOpacity),undo:n.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#w(t){const n=this.#g,s=a=>{this.#g=a,this.#A(a)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new an({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#E(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?this.#C():t&&(this.#E(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),n&&this.select()}#A(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#E(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#_([t,n,s,a],o){switch(o){case 90:return[1-n-a,t,a,s];case 180:return[1-t-s,1-n-a,s,a];case 270:return[n,1-t-s,a,s]}return[t,n,s,a]}rotate(t){const{drawLayer:n}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=ue.#_(this.#l.box,t)):s=ue.#_([this.x,this.y,this.width,this.height],t),n.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),n.updateProperties(this.#p,{bbox:ue.#_(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const n=this.#c=document.createElement("div");return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#n,this.setDims(this.width,this.height),zy(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(t){ue._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const n=window.getSelection();t?n.setPosition(this.#t,this.#e):n.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#z(){if(this.#h)return null;const[t,n]=this.pageDimensions,[s,a]=this.pageTranslation,o=this.#i,l=new Float32Array(o.length*8);let u=0;for(const{x:d,y:p,width:g,height:y}of o){const b=d*t+s,A=(1-p)*n+a;l[u]=l[u+4]=b,l[u+1]=l[u+3]=A,l[u+2]=l[u+6]=b+g*t,l[u+5]=l[u+7]=A-y*n,u+=8}return l}#O(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,n,{target:s,x:a,y:o}){const{x:l,y:u,width:d,height:p}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=A=>{g.abort(),this.#F(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",ee,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",on,{signal:y}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:y}),this._freeHighlight=new Ph({x:a,y:o},[l,u,d,p],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,n,s){let a=null;if(t instanceof rb){const{data:{quadPoints:E,rect:S,rotation:_,id:w,color:T,opacity:C,popupRef:O,richText:M,contentsObj:P,creationDate:B,modificationDate:I},parent:{page:{pageNumber:q}}}=t;a=t={annotationType:bt.HIGHLIGHT,color:Array.from(T),opacity:C,quadPoints:E,boxes:null,pageIndex:q-1,rect:S.slice(0),rotation:_,annotationElementId:w,id:w,deleted:!1,popupRef:O,richText:M,comment:P?.str||null,creationDate:B,modificationDate:I}}else if(t instanceof cd){const{data:{inkLists:E,rect:S,rotation:_,id:w,color:T,borderStyle:{rawWidth:C},popupRef:O,richText:M,contentsObj:P,creationDate:B,modificationDate:I},parent:{page:{pageNumber:q}}}=t;a=t={annotationType:bt.HIGHLIGHT,color:Array.from(T),thickness:C,inkLists:E,boxes:null,pageIndex:q-1,rect:S.slice(0),rotation:_,annotationElementId:w,id:w,deleted:!1,popupRef:O,richText:M,comment:P?.str||null,creationDate:B,modificationDate:I}}const{color:o,quadPoints:l,inkLists:u,opacity:d}=t,p=await super.deserialize(t,n,s);p.color=nt.makeHexColor(...o),p.opacity=d||1,u&&(p.#g=t.thickness),p._initialData=a,t.comment&&p.setCommentData(t);const[g,y]=p.pageDimensions,[b,A]=p.pageTranslation;if(l){const E=p.#i=[];for(let S=0;S<l.length;S+=8)E.push({x:(l[S]-b)/g,y:1-(l[S+1]-A)/y,width:(l[S+2]-l[S])/g,height:(l[S+1]-l[S+5])/y});p.#v(),p.#E(),p.rotate(p.rotation)}else if(u){p.#h=!0;const E=u[0],S={x:E[0]-b,y:y-(E[1]-A)},_=new Ph(S,[0,0,g,y],1,p.#g/2,!0,.001);for(let C=0,O=E.length;C<O;C+=2)S.x=E[C]-b,S.y=y-(E[C+1]-A),_.add(S);const{id:w,clipPathId:T}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);p.#b({highlightOutlines:_.getOutlines(),highlightId:w,clipPathId:T}),p.#E(),p.rotate(p.parentRotation)}return p}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=ct._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:n,opacity:this.opacity,thickness:this.#g,quadPoints:this.#z(),outlines:this.#O(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((s,a)=>s!==n[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class ub{#t=Object.create(null);updateProperty(t,n){this[t]=n,this.updateSVGProperty(t,n)}updateProperties(t){if(t)for(const[n,s]of Object.entries(t))n.startsWith("_")||this.updateProperty(n,s)}updateSVGProperty(t,n){this.#t[t]=n}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Xt("Not implemented")}}class mt extends ct{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static#s=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:n,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,n){const{id:s}=n.drawLayer.draw(mt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,n){const s=new Set(Object.keys(t));for(const[a,o]of Object.entries(n))s.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){Xt("Not implemented")}static get typesMap(){Xt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(mt.#i.updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)t.push([s,n[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[s,a]of this.constructor.typesMap)t.push([s,n[a]]);return t}_updateProperty(t,n,s){const a=this._drawingOptions,o=a[n],l=u=>{a.updateProperty(n,u);const d=this.#t.updateProperty(n,u);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(t,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),n&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,n,s,a]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[n,1-t,s*(l/o),a*(o/l)];case 180:return[1-t,1-n,s,a];case 270:return[1-n,t,s*(l/o),a*(o/l)];default:return[t,n,s,a]}}#p(){const{x:t,y:n,width:s,height:a,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-n,t,s*(o/l),a*(l/o)];case 180:return[1-t,1-n,s,a];case 270:return[n,1-t,s*(o/l),a*(l/o)];default:return[t,n,s,a]}}#u(t){[this.x,this.y,this.width,this.height]=this.#m(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#g(){const{x:t,y:n,width:s,height:a,rotation:o,parentRotation:l,parentDimensions:[u,d]}=this;switch((o*4+l)/90){case 1:return[1-n-a,t,a,s];case 2:return[1-t-s,1-n-a,s,a];case 3:return[n,1-t-s,a,s];case 4:return[t,n-s*(u/d),a*(d/u),s*(u/d)];case 5:return[1-n,t,s*(u/d),a*(d/u)];case 6:return[1-t-a*(d/u),1-n,a*(d/u),s*(u/d)];case 7:return[n-s*(u/d),1-t-a*(d/u),s*(u/d),a*(d/u)];case 8:return[t-s,n-a,s,a];case 9:return[1-n,t-s,a,s];case 10:return[1-t,1-n,s,a];case 11:return[n-a,1-t,a,s];case 12:return[t-a*(d/u),n,a*(d/u),s*(u/d)];case 13:return[1-n-s*(u/d),t-a*(d/u),s*(u/d),a*(d/u)];case 14:return[1-t,1-n-s*(u/d),a*(d/u),s*(u/d)];case 15:return[n,1-t,s*(u/d),a*(d/u)];default:return[t,n,s,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");return s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),s}static createDrawerInstance(t,n,s,a,o){Xt("Not implemented")}static startDrawing(t,n,s,a){const{target:o,offsetX:l,offsetY:u,pointerId:d,pointerType:p}=a;if(mt.#a&&mt.#a!==p)return;const{viewport:{rotation:g}}=t,{width:y,height:b}=o.getBoundingClientRect(),A=mt.#n=new AbortController,E=t.combinedSignal(A);if(mt.#s||=d,mt.#a??=p,window.addEventListener("pointerup",S=>{mt.#s===S.pointerId?this._endDraw(S):mt.#o?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointercancel",S=>{mt.#s===S.pointerId?this._currentParent.endDrawingSession():mt.#o?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointerdown",S=>{mt.#a===S.pointerType&&((mt.#o||=new Set).add(S.pointerId),mt.#i.isCancellable()&&(mt.#i.removeLastElement(),mt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",on,{signal:E}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),o.addEventListener("touchmove",S=>{S.timeStamp===mt.#c&&ee(S)},{signal:E}),t.toggleDrawing(),n._editorUndoBar?.hide(),mt.#i){t.drawLayer.updateProperties(this._currentDrawId,mt.#i.startNew(l,u,y,b,g));return}n.updateUIForDefaultProperties(this),mt.#i=this.createDrawerInstance(l,u,y,b,g),mt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(mt.#r.toSVGProperties(),mt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(mt.#c=-1,!mt.#i)return;const{offsetX:n,offsetY:s,pointerId:a}=t;if(mt.#s===a){if(mt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,mt.#i.add(n,s)),mt.#c=t.timeStamp,ee(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,mt.#i=null,mt.#r=null,mt.#a=null,mt.#c=NaN),mt.#n&&(mt.#n.abort(),mt.#n=null,mt.#s=NaN,mt.#o=null)}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,mt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=mt.#i,a=this._currentDrawId,o=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,s.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:Mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Mt.DRAW_STEP),!mt.#i.isEmpty()){const{pageDimensions:[s,a],scale:o}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:mt.#i.getOutlines(s*o,a*o,o,this._INNER_MARGIN),drawingOptions:mt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,s,a,o,l){Xt("Not implemented")}static async deserialize(t,n,s){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:u}}=n.viewport,d=this.deserializeDraw(l,u,a,o,this._INNER_MARGIN,t),p=await super.deserialize(t,n,s);return p.createDrawingOptions(t),p.#l({drawOutlines:d}),p.#f(),p.onScaleChanging(),p.rotate(),p}serializeDraw(t){const[n,s]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([n,s,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class r1{#t=new Float64Array(6);#e;#i;#n;#r;#s;#a="";#o=0;#c=new Yr;#l;#d;constructor(t,n,s,a,o,l){this.#l=s,this.#d=a,this.#n=o,this.#r=l,[t,n]=this.#h(t,n);const u=this.#e=[NaN,NaN,NaN,NaN,t,n];this.#s=[t,n],this.#i=[{line:u,points:this.#s}],this.#t.set(u,0)}updateProperty(t,n){t==="stroke-width"&&(this.#r=n)}#h(t,n){return et._normalizePoint(t,n,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,n){[t,n]=this.#h(t,n);const[s,a,o,l]=this.#t.subarray(2,6),u=t-o,d=n-l;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#s.push(t,n),isNaN(s)?(this.#t.set([o,l,t,n],2),this.#e.push(NaN,NaN,NaN,NaN,t,n),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,a,o,l,t,n],0),this.#e.push(...et.createBezierPoints(s,a,o,l,t,n)),{path:{d:this.toSVGPath()}}))}end(t,n){const s=this.add(t,n);return s||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,n,s,a,o){this.#l=s,this.#d=a,this.#n=o,[t,n]=this.#h(t,n);const l=this.#e=[NaN,NaN,NaN,NaN,t,n];this.#s=[t,n];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:l,points:this.#s}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,n=this.#i.length;t<n;t++){const{line:s,points:a}=this.#i[t];this.#e=s,this.#s=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=et.svgRound(this.#e[4]),n=et.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${n} Z`,this.#a;if(this.#s.length<=6){const a=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,a)} M ${t} ${n}`,this.#o=6}if(this.#s.length===4){const a=et.svgRound(this.#e[10]),o=et.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${a} ${o}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${t} ${n}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[l,u,d,p,g,y]=this.#e.slice(a,a+6).map(et.svgRound);s.push(`C${l} ${u} ${d} ${p} ${g} ${y}`)}return this.#a+=s.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,n,s,a){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,t,n,s,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Yr extends et{#t;#e=0;#i;#n;#r;#s;#a;#o;#c;build(t,n,s,a,o,l,u){this.#r=n,this.#s=s,this.#a=a,this.#o=o,this.#c=l,this.#i=u??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of this.#n){if(t.push(`M${et.svgRound(n[4])} ${et.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${et.svgRound(n[10])} ${et.svgRound(n[11])}`);continue}for(let s=6,a=n.length;s<a;s+=6){const[o,l,u,d,p,g]=n.subarray(s,s+6).map(et.svgRound);t.push(`C${o} ${l} ${u} ${d} ${p} ${g}`)}}return t.join("")}serialize([t,n,s,a],o){const l=[],u=[],[d,p,g,y]=this.#d();let b,A,E,S,_,w,T,C,O;switch(this.#o){case 0:O=et._rescale,b=t,A=n+a,E=s,S=-a,_=t+d*s,w=n+(1-p-y)*a,T=t+(d+g)*s,C=n+(1-p)*a;break;case 90:O=et._rescaleAndSwap,b=t,A=n,E=s,S=a,_=t+p*s,w=n+d*a,T=t+(p+y)*s,C=n+(d+g)*a;break;case 180:O=et._rescale,b=t+s,A=n,E=-s,S=a,_=t+(1-d-g)*s,w=n+p*a,T=t+(1-d)*s,C=n+(p+y)*a;break;case 270:O=et._rescaleAndSwap,b=t+s,A=n+a,E=-s,S=-a,_=t+(1-p-y)*s,w=n+(1-d-g)*a,T=t+(1-p)*s,C=n+(1-d)*a;break}for(const{line:M,points:P}of this.#n)l.push(O(M,b,A,E,S,o?new Array(M.length):null)),u.push(O(P,b,A,E,S,o?new Array(P.length):null));return{lines:l,points:u,rect:[_,w,T,C]}}static deserialize(t,n,s,a,o,{paths:{lines:l,points:u},rotation:d,thickness:p}){const g=[];let y,b,A,E,S;switch(d){case 0:S=et._rescale,y=-t/s,b=n/a+1,A=1/s,E=-1/a;break;case 90:S=et._rescaleAndSwap,y=-n/a,b=-t/s,A=1/a,E=1/s;break;case 180:S=et._rescale,y=t/s+1,b=-n/a,A=-1/s,E=1/a;break;case 270:S=et._rescaleAndSwap,y=n/a+1,b=t/s+1,A=-1/a,E=-1/s;break}if(!l){l=[];for(const w of u){const T=w.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const C=new Float32Array(3*(T-2));l.push(C);let[O,M,P,B]=w.subarray(0,4);C.set([NaN,NaN,NaN,NaN,O,M],0);for(let I=4;I<T;I+=2){const q=w[I],Q=w[I+1];C.set(et.createBezierPoints(O,M,P,B,q,Q),(I-2)*3),[O,M,P,B]=[P,B,q,Q]}}}for(let w=0,T=l.length;w<T;w++)g.push({line:S(l[w].map(C=>C??NaN),y,b,A,E),points:S(u[w].map(C=>C??NaN),y,b,A,E)});const _=new this.prototype.constructor;return _.build(g,s,a,1,d,p,o),_}#l(t=this.#c){const n=this.#i+t/2*this.#a;return this.#o%180===0?[n/this.#r,n/this.#s]:[n/this.#s,n/this.#r]}#d(){const[t,n,s,a]=this.#t,[o,l]=this.#l(0);return[t+o,n+l,s-2*o,a-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let u=4,d=a.length;u<d;u+=6)nt.pointBoundingBox(a[u],a[u+1],t);continue}let o=a[4],l=a[5];for(let u=6,d=a.length;u<d;u+=6){const[p,g,y,b,A,E]=a.subarray(u,u+6);nt.bezierBoundingBox(o,l,p,g,y,b,A,E,t),o=A,l=E}}const[n,s]=this.#l();t[0]=De(t[0]-n,0,1),t[1]=De(t[1]-s,0,1),t[2]=De(t[2]+n,0,1),t[3]=De(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,n){return t==="stroke-width"?this.#f(n):null}#f(t){const[n,s]=this.#l();this.#c=t;const[a,o]=this.#l(),[l,u]=[a-n,o-s],d=this.#t;return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d}updateParentDimensions([t,n],s){const[a,o]=this.#l();this.#r=t,this.#s=n,this.#a=s;const[l,u]=this.#l(),d=l-a,p=u-o,g=this.#t;return g[0]-=d,g[1]-=p,g[2]+=2*d,g[3]+=2*p,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(et.svgRound).join(" ")}get defaultProperties(){const[t,n]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=this.#t;let s=0,a=0,o=0,l=0,u=0,d=0;switch(this.#e){case 90:a=n/t,o=-t/n,u=t;break;case 180:s=-1,l=-1,u=t,d=n;break;case 270:a=-n/t,o=t/n,d=n;break;default:return""}return`matrix(${s} ${a} ${o} ${l} ${et.svgRound(u)} ${et.svgRound(d)})`}getPathResizingSVGProperties([t,n,s,a]){const[o,l]=this.#l(),[u,d,p,g]=this.#t;if(Math.abs(p-o)<=et.PRECISION||Math.abs(g-l)<=et.PRECISION){const S=t+s/2-(u+p/2),_=n+a/2-(d+g/2);return{path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`,transform:`${this.rotationTransform} translate(${S} ${_})`}}}const y=(s-2*o)/(p-2*o),b=(a-2*l)/(g-2*l),A=p/s,E=g/a;return{path:{"transform-origin":`${et.svgRound(u)} ${et.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${E}) translate(${et.svgRound(o)} ${et.svgRound(l)}) scale(${y} ${b}) translate(${et.svgRound(-o)} ${et.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,s,a]){const[o,l]=this.#l(),u=this.#t,[d,p,g,y]=u;if(u[0]=t,u[1]=n,u[2]=s,u[3]=a,Math.abs(g-o)<=et.PRECISION||Math.abs(y-l)<=et.PRECISION){const _=t+s/2-(d+g/2),w=n+a/2-(p+y/2);for(const{line:T,points:C}of this.#n)et._translate(T,_,w,T),et._translate(C,_,w,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*o)/(g-2*o),A=(a-2*l)/(y-2*l),E=-b*(d+o)+t+o,S=-A*(p+l)+n+l;if(b!==1||A!==1||E!==0||S!==0)for(const{line:_,points:w}of this.#n)et._rescale(_,E,S,b,A,_),et._rescale(w,E,S,b,A,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],s){const[a,o]=s,l=this.#t,u=t-l[0],d=n-l[1];if(this.#r===a&&this.#s===o)for(const{line:p,points:g}of this.#n)et._translate(p,u,d,p),et._translate(g,u,d,g);else{const p=this.#r/a,g=this.#s/o;this.#r=a,this.#s=o;for(const{line:y,points:b}of this.#n)et._rescale(y,u,d,p,g,y),et._rescale(b,u,d,p,g,b);l[2]*=p,l[3]*=g}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t)} ${et.svgRound(n)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t[0])} ${et.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Il extends ub{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ct._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??=this["stroke-width"],n*=this._viewParameters.realScale),super.updateSVGProperty(t,n)}clone(){const t=new Il(this._viewParameters);return t.updateAll(this),t}}class hd extends mt{static _type="ink";static _editorType=bt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){ct.initialize(t,n),this._defaultDrawingOptions=new Il(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return wt(this,"typesMap",new Map([[Mt.INK_THICKNESS,"stroke-width"],[Mt.INK_COLOR,"stroke"],[Mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,s,a,o){return new r1(t,n,s,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,s,a,o,l){return Yr.deserialize(t,n,s,a,o,l)}static async deserialize(t,n,s){let a=null;if(t instanceof cd){const{data:{inkLists:l,rect:u,rotation:d,id:p,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:A,richText:E,contentsObj:S,creationDate:_,modificationDate:w},parent:{page:{pageNumber:T}}}=t;a=t={annotationType:bt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:l},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:A,richText:E,comment:S?.str||null,creationDate:_,modificationDate:w}}const o=await super.deserialize(t,n,s);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Br(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:s}){this._drawingOptions=hd.getDefaultDrawingOptions({stroke:nt.makeHexColor(...t),"stroke-width":n,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:ct._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:n,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:n,thickness:s,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==n[u])||t.thickness!==s||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}}class zh extends Yr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const wl=8,_r=3;class hs{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,n,s,a){return s-=t,a-=n,s===0?a>0?0:4:s===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,n,s,a,o,l,u){const d=this.#e(s,a,o,l);for(let p=0;p<8;p++){const g=(-p+d-u+16)%8,y=this.#i[2*g],b=this.#i[2*g+1];if(t[(s+y)*n+(a+b)]!==0)return g}return-1}static#r(t,n,s,a,o,l,u){const d=this.#e(s,a,o,l);for(let p=0;p<8;p++){const g=(p+d+u+16)%8,y=this.#i[2*g],b=this.#i[2*g+1];if(t[(s+y)*n+(a+b)]!==0)return g}return-1}static#s(t,n,s,a){const o=t.length,l=new Int32Array(o);for(let g=0;g<o;g++)l[g]=t[g]<=a?1:0;for(let g=1;g<s-1;g++)l[g*n]=l[g*n+n-1]=0;for(let g=0;g<n;g++)l[g]=l[n*s-1-g]=0;let u=1,d;const p=[];for(let g=1;g<s-1;g++){d=1;for(let y=1;y<n-1;y++){const b=g*n+y,A=l[b];if(A===0)continue;let E=g,S=y;if(A===1&&l[b-1]===0)u+=1,S-=1;else if(A>=1&&l[b+1]===0)u+=1,S+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const _=[y,g],w=S===y+1,T={isHole:w,points:_,id:u,parent:0};p.push(T);let C;for(const Z of p)if(Z.id===d){C=Z;break}C?C.isHole?T.parent=w?C.parent:d:T.parent=w?d:C.parent:T.parent=w?d:0;const O=this.#n(l,n,g,y,E,S,0);if(O===-1){l[b]=-u,l[b]!==1&&(d=Math.abs(l[b]));continue}let M=this.#i[2*O],P=this.#i[2*O+1];const B=g+M,I=y+P;E=B,S=I;let q=g,Q=y;for(;;){const Z=this.#r(l,n,q,Q,E,S,1);M=this.#i[2*Z],P=this.#i[2*Z+1];const ut=q+M,ft=Q+P;_.push(ft,ut);const at=q*n+Q;if(l[at+1]===0?l[at]=-u:l[at]===1&&(l[at]=u),ut===g&&ft===y&&q===B&&Q===I){l[b]!==1&&(d=Math.abs(l[b]));break}else E=q,S=Q,q=ut,Q=ft}}}return p}static#a(t,n,s,a){if(s-n<=4){for(let B=n;B<s-2;B+=2)a.push(t[B],t[B+1]);return}const o=t[n],l=t[n+1],u=t[s-4]-o,d=t[s-3]-l,p=Math.hypot(u,d),g=u/p,y=d/p,b=g*l-y*o,A=d/u,E=1/p,S=Math.atan(A),_=Math.cos(S),w=Math.sin(S),T=E*(Math.abs(_)+Math.abs(w)),C=E*(1-T+T**2),O=Math.max(Math.atan(Math.abs(w+_)*C),Math.atan(Math.abs(w-_)*C));let M=0,P=n;for(let B=n+2;B<s-2;B+=2){const I=Math.abs(b-g*t[B+1]+y*t[B]);I>M&&(P=B,M=I)}M>(p*O)**2?(this.#a(t,n,P+2,a),this.#a(t,P,s,a)):a.push(o,l)}static#o(t){const n=[],s=t.length;return this.#a(t,0,s,n),n.push(t[s-2],t[s-1]),n.length<=4?null:n}static#c(t,n,s,a,o,l){const u=new Float32Array(l**2),d=-2*a**2,p=l>>1;for(let S=0;S<l;S++){const _=(S-p)**2;for(let w=0;w<l;w++)u[S*l+w]=Math.exp((_+(w-p)**2)/d)}const g=new Float32Array(256),y=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,A=new Uint8Array(b),E=new Uint32Array(256);for(let S=0;S<s;S++)for(let _=0;_<n;_++){const w=S*n+_,T=t[w];let C=0,O=0;for(let P=0;P<l;P++){const B=S+P-p;if(!(B<0||B>=s))for(let I=0;I<l;I++){const q=_+I-p;if(q<0||q>=n)continue;const Q=t[B*n+q],Z=u[P*l+I]*g[Math.abs(Q-T)];C+=Q*Z,O+=Z}}const M=A[w]=Math.round(C/O);E[M]++}return[A,E]}static#l(t){const n=new Uint32Array(256);for(const s of t)n[s]++;return n}static#d(t){const n=t.length,s=new Uint8ClampedArray(n>>2);let a=-1/0,o=1/0;for(let u=0,d=s.length;u<d;u++){const p=s[u]=t[u<<2];a=Math.max(a,p),o=Math.min(o,p)}const l=255/(a-o);for(let u=0,d=s.length;u<d;u++)s[u]=(s[u]-o)*l;return s}static#h(t){let n,s=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let l=o,u=o;for(n=o;n<256;n++){const d=t[n];d>s&&(n-l>a&&(a=n-l,u=n-1),s=d,l=n)}for(n=u-1;n>=0&&!(t[n]>t[n+1]);n--);return n}static#f(t){const n=t,{width:s,height:a}=t,{maxDim:o}=this.#t;let l=s,u=a;if(s>o||a>o){let b=s,A=a,E=Math.log2(Math.max(s,a)/o);const S=Math.floor(E);E=E===S?S-1:S;for(let w=0;w<E;w++){l=Math.ceil(b/2),u=Math.ceil(A/2);const T=new OffscreenCanvas(l,u);T.getContext("2d").drawImage(t,0,0,b,A,0,0,l,u),b=l,A=u,t!==n&&t.close(),t=T.transferToImageBitmap()}const _=Math.min(o/l,o/u);l=Math.round(l*_),u=Math.round(u*_)}const p=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});p.fillStyle="white",p.fillRect(0,0,l,u),p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,l,u);const g=p.getImageData(0,0,l,u).data;return[this.#d(g),l,u]}static extractContoursFromText(t,{fontFamily:n,fontStyle:s,fontWeight:a},o,l,u,d){let p=new OffscreenCanvas(1,1),g=p.getContext("2d",{alpha:!1});const y=200,b=g.font=`${s} ${a} ${y}px ${n}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:E,actualBoundingBoxAscent:S,actualBoundingBoxDescent:_,fontBoundingBoxAscent:w,fontBoundingBoxDescent:T,width:C}=g.measureText(t),O=1.5,M=Math.ceil(Math.max(Math.abs(A)+Math.abs(E)||0,C)*O),P=Math.ceil(Math.max(Math.abs(S)+Math.abs(_)||y,Math.abs(w)+Math.abs(T)||y)*O);p=new OffscreenCanvas(M,P),g=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,M,P),g.fillStyle="black",g.fillText(t,M*(O-1)/2,P*(3-O)/2);const B=this.#d(g.getImageData(0,0,M,P).data),I=this.#l(B),q=this.#h(I),Q=this.#s(B,M,P,q);return this.processDrawnLines({lines:{curves:Q,width:M,height:P},pageWidth:o,pageHeight:l,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,n,s,a,o){const[l,u,d]=this.#f(t),[p,g]=this.#c(l,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(g),b=this.#s(p,u,d,y);return this.processDrawnLines({lines:{curves:b,width:u,height:d},pageWidth:n,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:l,areContours:u}){a%180!==0&&([n,s]=[s,n]);const{curves:d,width:p,height:g}=t,y=t.thickness??0,b=[],A=Math.min(n/p,s/g),E=A/n,S=A/s,_=[];for(const{points:T}of d){const C=l?this.#o(T):T;if(!C)continue;_.push(C);const O=C.length,M=new Float32Array(O),P=new Float32Array(3*(O===2?2:O-2));if(b.push({line:P,points:M}),O===2){M[0]=C[0]*E,M[1]=C[1]*S,P.set([NaN,NaN,NaN,NaN,M[0],M[1]],0);continue}let[B,I,q,Q]=C;B*=E,I*=S,q*=E,Q*=S,M.set([B,I,q,Q],0),P.set([NaN,NaN,NaN,NaN,B,I],0);for(let Z=4;Z<O;Z+=2){const ut=M[Z]=C[Z]*E,ft=M[Z+1]=C[Z+1]*S;P.set(et.createBezierPoints(B,I,q,Q,ut,ft),(Z-2)*3),[B,I,q,Q]=[q,Q,ut,ft]}}if(b.length===0)return null;const w=u?new zh:new Yr;return w.build(b,n,s,1,a,u?0:y,o),{outline:w,newCurves:_,areContours:u,thickness:y,width:p,height:g}}static async compressSignature({outlines:t,areContours:n,thickness:s,width:a,height:o}){let l=1/0,u=-1/0,d=0;for(const C of t){d+=C.length;for(let O=2,M=C.length;O<M;O++){const P=C[O]-C[O-2];l=Math.min(l,P),u=Math.max(u,P)}}let p;l>=-128&&u<=127?p=Int8Array:l>=-32768&&u<=32767?p=Int16Array:p=Int32Array;const g=t.length,y=wl+_r*g,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*p.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=a,b[A++]=o,b[A++]=n?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=g,b[A++]=p.BYTES_PER_ELEMENT;for(const C of t)b[A++]=C.length-2,b[A++]=C[0],b[A++]=C[1];const E=new CompressionStream("deflate-raw"),S=E.writable.getWriter();await S.ready,S.write(b);const _=p.prototype.constructor;for(const C of t){const O=new _(C.length-2);for(let M=2,P=C.length;M<P;M++)O[M-2]=C[M]-C[M-2];S.write(O)}S.close();const w=await new Response(E.readable).arrayBuffer(),T=new Uint8Array(w);return Dy(T)}static async decompressSignature(t){try{const n=LS(t),{readable:s,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(n).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const C of s)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,u),u+=C.length;const d=new Uint32Array(l.buffer,0,l.length>>2),p=d[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const g=d[2],y=d[3],b=d[4]===0,A=d[5],E=d[6],S=d[7],_=[],w=(wl+_r*E)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(S){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(l.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(l.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(l.buffer,w);break}u=0;for(let C=0;C<E;C++){const O=d[_r*C+wl],M=new Float32Array(O+2);_.push(M);for(let P=0;P<_r-1;P++)M[P]=d[_r*C+wl+P+1];for(let P=0;P<O;P++)M[P+2]=M[P]+T[u++]}return{areContours:b,thickness:A,outlines:_,width:g,height:y}}catch(n){return vt(`decompressSignature: ${n}`),null}}}class dd extends ub{constructor(){super(),super.updateProperties({fill:ct._defaultLineColor,"stroke-width":0})}clone(){const t=new dd;return t.updateAll(this),t}}class fd extends Il{constructor(t){super(t),super.updateProperties({stroke:ct._defaultLineColor,"stroke-width":1})}clone(){const t=new fd(this._viewParameters);return t.updateAll(this),t}}class zn extends mt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=bt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){ct.initialize(t,n),this._defaultDrawingOptions=new dd,this._defaultDrawnSignatureOptions=new fd(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return wt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:o,areContours:l,description:u,uuid:d,heightInPage:p}=this.#i,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,A=hs.processDrawnLines({lines:a,pageWidth:g,pageHeight:y,rotation:b,innerMargin:zn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(A,p,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:s,width:a,height:o}=this.#i,l=Math.max(a,o),u=hs.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,s,a){const{x:o,y:l}=this,{outline:u}=this.#i=t;this.#t=u instanceof zh,this.description=s;let d;this.#t?d=zn.getDefaultDrawingOptions():(d=zn._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,p]=this.pageDimensions;let g=n/p;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return hs.process(t,n,s,a,zn._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return hs.extractContoursFromText(t,n,s,a,o,zn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return hs.processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:a,innerMargin:zn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=zn.getDefaultDrawingOptions():(this._drawingOptions=zn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:n,points:s},o.uuid=this.#n,o.isCopy=!0):o.lines=n,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,n,s,a,o,l){return l.areContours?zh.deserialize(t,n,s,a,o,l):Yr.deserialize(t,n,s,a,o,l)}static async deserialize(t,n,s){const a=await super.deserialize(t,n,s);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class o1 extends ct{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=bt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){ct.initialize(t,n)}static isHandlingMimeForPasting(t){return Ll.includes(t)}static paste(t,n){n.pasteEditor({mode:bt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#h(t,n=!1){if(!t){this.remove();return}this.#t=t.bitmap,n||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(s).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(s).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Ll.join(",");const n=this._uiManager._signal;this.#i=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,a&&(this.#t=a),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#p(){const{div:t}=this;let{width:n,height:s}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)n=this.width*a,s=this.height*o;else if(n>l*a||s>l*o){const d=Math.min(l*a/n,l*o/s);n*=d,s*=d}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=n/a,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,n,s=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new Cn;let u=this.#t,d=a,p=o,g=null;if(n){if(a>n||o>n){const P=Math.min(n/a,n/o);d=Math.floor(a*P),p=Math.floor(o*P)}g=document.createElement("canvas");const b=g.width=Math.ceil(d*l.sx),A=g.height=Math.ceil(p*l.sy);this.#l||(u=this.#u(b,A));const E=g.getContext("2d");E.filter=this._uiManager.hcmFilter;let S="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":kS.isDarkMode&&(S="#8f8f9d",_="#42414d");const w=15,T=w*l.sx,C=w*l.sy,O=new OffscreenCanvas(T*2,C*2),M=O.getContext("2d");M.fillStyle=S,M.fillRect(0,0,T*2,C*2),M.fillStyle=_,M.fillRect(0,0,T,C),M.fillRect(T,C,T,C),E.fillStyle=E.createPattern(O,"repeat"),E.fillRect(0,0,b,A),E.drawImage(u,0,0,u.width,u.height,0,0,b,A)}let y=null;if(s){let b,A;if(l.symmetric&&u.width<t&&u.height<t)b=u.width,A=u.height;else if(u=this.#t,a>t||o>t){const _=Math.min(t/a,t/o);b=Math.floor(a*_),A=Math.floor(o*_),this.#l||(u=this.#u(b,A))}const S=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,A),y={width:b,height:A,data:S.getImageData(0,0,b,A).data}}return{canvas:g,width:d,height:p,imageData:y}}#u(t,n){const{width:s,height:a}=this.#t;let o=s,l=a,u=this.#t;for(;o>2*t||l>2*n;){const d=o,p=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(o,l);g.getContext("2d").drawImage(u,0,0,d,p,0,0,o,l),u=g.transferToImageBitmap()}return u}#g(){const[t,n]=this.parentDimensions,{width:s,height:a}=this,o=new Cn,l=Math.ceil(s*t*o.sx),u=Math.ceil(a*n*o.sy),d=this.#a;if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const p=this.#l?this.#t:this.#u(l,u),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(p,0,0,p.width,p.height,0,0,l,u)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#t,n.getContext("2d").drawImage(this.#t,0,0),n.toDataURL()}if(this.#l){const[n,s]=this.pageDimensions,a=Math.round(this.width*n*ms.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*ms.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,n,s){let a=null,o=!1;if(t instanceof ob){const{data:{rect:S,rotation:_,id:w,structParent:T,popupRef:C,richText:O,contentsObj:M,creationDate:P,modificationDate:B},container:I,parent:{page:{pageNumber:q}},canvas:Q}=t;let Z,ut;Q?(delete t.canvas,{id:Z,bitmap:ut}=s.imageManager.getFromCanvas(I.id,Q),Q.remove()):(o=!0,t._hasNoCanvas=!0);const ft=(await n._structTree.getAriaAttributes(`${Wh}${w}`))?.get("aria-label")||"";a=t={annotationType:bt.STAMP,bitmapId:Z,bitmap:ut,pageIndex:q-1,rect:S.slice(0),rotation:_,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:ft},isSvg:!1,structParent:T,popupRef:C,richText:O,comment:M?.str||null,creationDate:P,modificationDate:B}}const l=await super.deserialize(t,n,s),{rect:u,bitmap:d,bitmapUrl:p,bitmapId:g,isSvg:y,accessibilityData:b}=t;o?(s.addMissingCanvas(t.id,l),l.#o=!0):g&&s.imageManager.isValidId(g)?(l.#e=g,d&&(l.#t=d)):l.#n=p,l.#l=y;const[A,E]=l.pageDimensions;return l.width=(u[2]-u[0])/A,l.height=(u[3]-u[1])/E,b&&(l.altTextData=b),l._initialData=a,t.comment&&l.setCommentData(t),l.#d=!!a,l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(n===null)return s;n.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(this.#e))n.stamps.set(this.#e,{area:l,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=n.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,a=t.pageIndex===n,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Un{#t;#e=!1;#i=null;#n=null;#r=null;#s=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([ve,hd,o1,ue,zn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:n,div:s,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:p,l10n:g}){const y=[...Un.#g.values()];if(!Un._initialized){Un._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=n,this.div=s,this.#t=o,this.#i=l,this.viewport=p,this.#h=d,this.drawLayer=u,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===bt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case bt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case bt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case bt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),t===bt.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const s of Un.#g.values())n.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}get#y(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const n=this.#i;if(n)for(const s of n.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const s=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:u,timeStamp:d}=a,p=this.#p;if(d-p>500){this.#p=d;return}this.#p=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const y=document.elementsFromPoint(l,u);if(g.toggle("getElements",!1),!this.div.contains(y[0]))return;let b;const A=new RegExp(`^${Lr}[0-9]+$`);for(const S of y)if(A.test(S.id)){b=S.id;break}if(!b)return;const E=this.#s.get(b);E?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),E.dblclick(a))},{signal:s,capture:!0})}const t=this.#i;if(t){const s=new Map,a=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(this.#u.isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let d=a.get(u);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=s.get(u),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of Un.#g.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:n}=t;if(n===this.#h.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#h.div.contains(n)){const{isMac:s}=Se.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ue.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:t}),this.div.addEventListener("pointercancel",n,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:n}=t;n&&this.#u.isDeletedAnnotationElement(n)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),ct.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const n=t.render();this.div.append(n),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:n}=document;t.div.contains(n)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),n.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const n=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:n,undo:s,mustExec:!1})}getEditorByUID(t){for(const n of this.#s.values())if(n.uid===t)return n;return null}getNextId(){return this.#u.getId()}get#b(){return Un.#g.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#x(t){const n=this.#b;return n?new n.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,n){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:a}=this.#w(),o=this.getNextId(),l=this.#x({parent:this,id:o,x:s,y:a,uiManager:this.#u,isCentered:!0,...n});l&&this.add(l)}async deserialize(t){return await Un.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,n,s={}){const a=this.getNextId(),o=this.#x({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:n,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#w(){const{x:t,y:n,width:s,height:a}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,n),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,n+a),p=(o+u)/2-t,g=(l+d)/2-n,[y,b]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#w(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:n}=Se.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===bt.STAMP||s===bt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===bt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:n}=Se.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const n=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:n}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:n}=document;this.div.contains(n)&&(this.#d=n);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,n,s){const a=this.#u.findParent(n,s);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Vi(this.div,t);for(const n of this.#u.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const n=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Vi(this.div,{rotation:s}),n!==s)for(const a of this.#s.values())a.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:n}=this.viewport.rawDims;return[t,n]}get scale(){return this.#u.viewParameters.realScale}}class Ae{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const n of this.#e.values())n.remove(),t.append(n);this.#t=t}}static get _svgFactory(){return wt(this,"_svgFactory",new Pr)}static#r(t,[n,s,a,o]){const{style:l}=t;l.top=`${100*s}%`,l.left=`${100*n}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#s(){const t=Ae._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,n){const s=Ae._svgFactory.createElement("clipPath");t.append(s);const a=`clip_${n}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Ae._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${n}`),o.classList.add("clip"),a}#o(t,n){for(const[s,a]of Object.entries(n))a===null?t.removeAttribute(s):t.setAttribute(s,a)}draw(t,n=!1,s=!1){const a=Ae.#n++,o=this.#s(),l=Ae._svgFactory.createElement("defs");o.append(l);const u=Ae._svgFactory.createElement("path");l.append(u);const d=`path_p${this.pageIndex}_${a}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),n&&this.#i.set(a,u);const p=s?this.#a(l,d):null,g=Ae._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${p})`}}drawOutline(t,n){const s=Ae.#n++,a=this.#s(),o=Ae._svgFactory.createElement("defs");a.append(o);const l=Ae._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(n){const y=Ae._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=Ae._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=Ae._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const p=Ae._svgFactory.createElement("use");a.append(p),p.setAttribute("href",`#${u}`),d&&p.setAttribute("mask",`url(#${d})`);const g=p.cloneNode();return a.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(s,a),s}finalizeDraw(t,n){this.#i.delete(t),this.updateProperties(t,n)}updateProperties(t,n){if(!n)return;const{root:s,bbox:a,rootClass:o,path:l}=n,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),a&&Ae.#r(u,a),o){const{classList:d}=u;for(const[p,g]of Object.entries(o))d.toggle(p,g)}if(l){const p=u.firstChild.firstChild;this.#o(p,l)}}}updateParent(t,n){if(n===this)return;const s=this.#e.get(t);s&&(n.#t.append(s),this.#e.delete(t),n.#e.set(t,s))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Bh};globalThis.pdfjsLib={AbortException:hi,AnnotationEditorLayer:Un,AnnotationEditorParamsType:Mt,AnnotationEditorType:bt,AnnotationEditorUIManager:di,AnnotationLayer:ud,AnnotationMode:Hn,AnnotationType:ce,applyOpacity:By,build:nb,ColorPicker:an,createValidAbsoluteUrl:Yh,CSSConstants:ky,DOMSVGFactory:Pr,DrawLayer:Ae,FeatureTest:Se,fetchData:wa,findContrastColor:Py,getDocument:ad,getFilenameFromUrl:Ly,getPdfFilenameFromUrl:Oy,getRGB:_a,getUuid:Kh,getXfaPageViewport:Ny,GlobalWorkerOptions:Gi,ImageKind:Rr,InvalidPDFException:Ml,isDataScheme:Gr,isPdfFile:Ul,isValidExplicitDest:Hy,MathClamp:De,noContextMenu:on,normalizeUnicode:My,OPS:ba,OutputScale:Cn,PasswordResponses:Cy,PDFDataRangeTransport:od,PDFDateString:Dl,PDFWorker:va,PermissionFlag:Ty,PixelsPerInch:ms,RenderingCancelledException:Fl,renderRichText:Zh,ResponseException:Or,setLayerDimensions:Vi,shadow:wt,SignatureExtractor:hs,stopEvent:ee,SupportedImageMimeTypes:Ll,TextLayer:kr,TouchManager:qr,updateUrlHash:$h,Util:nt,VerbosityLevel:Hr,version:eb,XfaLayer:Qh};const l1=Object.freeze(Object.defineProperty({__proto__:null,AbortException:hi,AnnotationEditorLayer:Un,AnnotationEditorParamsType:Mt,AnnotationEditorType:bt,AnnotationEditorUIManager:di,AnnotationLayer:ud,AnnotationMode:Hn,AnnotationType:ce,CSSConstants:ky,ColorPicker:an,DOMSVGFactory:Pr,DrawLayer:Ae,FeatureTest:Se,GlobalWorkerOptions:Gi,ImageKind:Rr,InvalidPDFException:Ml,MathClamp:De,OPS:ba,OutputScale:Cn,PDFDataRangeTransport:od,PDFDateString:Dl,PDFWorker:va,PasswordResponses:Cy,PermissionFlag:Ty,PixelsPerInch:ms,RenderingCancelledException:Fl,ResponseException:Or,SignatureExtractor:hs,SupportedImageMimeTypes:Ll,TextLayer:kr,TouchManager:qr,Util:nt,VerbosityLevel:Hr,XfaLayer:Qh,applyOpacity:By,build:nb,createValidAbsoluteUrl:Yh,fetchData:wa,findContrastColor:Py,getDocument:ad,getFilenameFromUrl:Ly,getPdfFilenameFromUrl:Oy,getRGB:_a,getUuid:Kh,getXfaPageViewport:Ny,isDataScheme:Gr,isPdfFile:Ul,isValidExplicitDest:Hy,noContextMenu:on,normalizeUnicode:My,renderRichText:Zh,setLayerDimensions:Vi,shadow:wt,stopEvent:ee,updateUrlHash:$h,version:eb},Symbol.toStringTag,{value:"Module"}));function hb(h){var t,n,s="";if(typeof h=="string"||typeof h=="number")s+=h;else if(typeof h=="object")if(Array.isArray(h)){var a=h.length;for(t=0;t<a;t++)h[t]&&(n=hb(h[t]))&&(s&&(s+=" "),s+=n)}else for(n in h)h[n]&&(s&&(s+=" "),s+=n);return s}function jl(){for(var h,t,n=0,s="",a=arguments.length;n<a;n++)(h=arguments[n])&&(t=hb(h))&&(s&&(s+=" "),s+=t);return s}var ey=Object.prototype.hasOwnProperty;function ny(h,t,n){for(n of h.keys())if(ga(n,t))return n}function ga(h,t){var n,s,a;if(h===t)return!0;if(h&&t&&(n=h.constructor)===t.constructor){if(n===Date)return h.getTime()===t.getTime();if(n===RegExp)return h.toString()===t.toString();if(n===Array){if((s=h.length)===t.length)for(;s--&&ga(h[s],t[s]););return s===-1}if(n===Set){if(h.size!==t.size)return!1;for(s of h)if(a=s,a&&typeof a=="object"&&(a=ny(t,a),!a)||!t.has(a))return!1;return!0}if(n===Map){if(h.size!==t.size)return!1;for(s of h)if(a=s[0],a&&typeof a=="object"&&(a=ny(t,a),!a)||!ga(s[1],t.get(a)))return!1;return!0}if(n===ArrayBuffer)h=new Uint8Array(h),t=new Uint8Array(t);else if(n===DataView){if((s=h.byteLength)===t.byteLength)for(;s--&&h.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(h)){if((s=h.byteLength)===t.byteLength)for(;s--&&h[s]===t[s];);return s===-1}if(!n||typeof h=="object"){s=0;for(n in h)if(ey.call(h,n)&&++s&&!ey.call(t,n)||!(n in t)||!ga(h[n],t[n]))return!1;return Object.keys(t).length===s}}return h!==h&&t!==t}function $r(h){let t=!1;return{promise:new Promise((s,a)=>{h.then(o=>!t&&s(o)).catch(o=>!t&&a(o))}),cancel(){t=!0}}}const c1=["onCopy","onCut","onPaste"],u1=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],h1=["onFocus","onBlur"],d1=["onInput","onInvalid","onReset","onSubmit"],f1=["onLoad","onError"],p1=["onKeyDown","onKeyPress","onKeyUp"],g1=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],m1=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],y1=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],b1=["onSelect"],v1=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],A1=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],S1=["onScroll"],E1=["onWheel"],w1=["onAnimationStart","onAnimationEnd","onAnimationIteration"],_1=["onTransitionEnd"],x1=["onToggle"],T1=["onChange"],C1=[...c1,...u1,...h1,...d1,...f1,...p1,...g1,...m1,...y1,...b1,...v1,...A1,...S1,...E1,...w1,..._1,...T1,...x1];function db(h,t){const n={};for(const s of C1){const a=h[s];a&&(t?n[s]=(o=>a(o,t(s))):n[s]=a)}return n}var R1="Invariant failed";function qt(h,t){if(!h)throw new Error(R1)}var _h,iy;function M1(){if(iy)return _h;iy=1;var h=function(){};return _h=h,_h}var D1=M1();const Le=j0(D1),fb=N.createContext(null),L1="noopener noreferrer nofollow";class O1{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return qt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){qt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,n,s){t.href=n,t.rel=this.externalLinkRel||L1,t.target=s?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(n=>{qt(this.pdfDocument),qt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(n):Array.isArray(t)?n(t):t.then(n)}).then(n=>{qt(Array.isArray(n));const s=n[0];new Promise(a=>{qt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{a(o)}).catch(()=>{qt(!1)}):typeof s=="number"?a(s):qt(!1)}).then(a=>{const o=a+1;qt(this.pdfViewer),qt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:n,pageIndex:a,pageNumber:o})})})}goToPage(t){const n=t-1;qt(this.pdfViewer),qt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:n,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function ma({children:h,type:t}){return $.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:h})}const sy={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function N1(h,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return h}}function Aa(){return N.useReducer(N1,{value:void 0,error:void 0})}const Gl=typeof window<"u",pb=Gl&&window.location.protocol==="file:";function k1(h){return typeof h<"u"}function us(h){return k1(h)&&h!==null}function B1(h){return typeof h=="string"}function P1(h){return h instanceof ArrayBuffer}function z1(h){return qt(Gl),h instanceof Blob}function Fh(h){return B1(h)&&/^data:/.test(h)}function ay(h){qt(Fh(h));const[t="",n=""]=h.split(",");return t.split(";").indexOf("base64")!==-1?atob(n):unescape(n)}function F1(){return Gl&&window.devicePixelRatio||1}const gb="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function ry(){Le(!pb,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${gb}`)}function U1(){Le(!pb,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${gb}`)}function bs(h){h?.cancel&&h.cancel()}function Uh(h,t){return Object.defineProperty(h,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(h,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(h,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(h,"originalHeight",{get(){return this.view[3]},configurable:!0}),h}function H1(h){return h.name==="RenderingCancelledException"}function I1(h){return new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return n(new Error("Error while reading a file."));t(s.result)},s.onerror=a=>{if(!a.target)return n(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return n(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},s.readAsArrayBuffer(h)})}const{PDFDataRangeTransport:j1}=l1,G1=(h,t)=>{switch(t){case sy.NEED_PASSWORD:{const n=prompt("Enter the password to open this PDF file.");h(n);break}case sy.INCORRECT_PASSWORD:{const n=prompt("Invalid password. Please try again.");h(n);break}}};function oy(h){return typeof h=="object"&&h!==null&&("data"in h||"range"in h||"url"in h)}const V1=N.forwardRef(function({children:t,className:n,error:s="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:u,imageResourcesPath:d,loading:p="Loading PDF…",noData:g="No PDF file specified.",onItemClick:y,onLoadError:b,onLoadProgress:A,onLoadSuccess:E,onPassword:S=G1,onSourceError:_,onSourceSuccess:w,options:T,renderMode:C,rotate:O,scale:M,...P},B){const[I,q]=Aa(),{value:Q,error:Z}=I,[ut,ft]=Aa(),{value:at,error:gt}=ut,k=N.useRef(new O1),j=N.useRef([]),J=N.useRef(void 0),dt=N.useRef(void 0);l&&l!==J.current&&oy(l)&&(Le(!ga(l,J.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),J.current=l),T&&T!==dt.current&&(Le(!ga(T,dt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),dt.current=T);const At=N.useRef({scrollPageIntoView:Ot=>{const{dest:Nt,pageNumber:Jt,pageIndex:se=Jt-1}=Ot;if(y){y({dest:Nt,pageIndex:se,pageNumber:Jt});return}const pi=j.current[se];if(pi){pi.scrollIntoView();return}Le(!1,`An internal link leading to page ${Jt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});N.useImperativeHandle(B,()=>({linkService:k,pages:j,viewer:At}),[]);function D(){w&&w()}function V(){Z&&(Le(!1,Z.toString()),_&&_(Z))}function W(){q({type:"RESET"})}N.useEffect(W,[l,q]);const tt=N.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Fh(l)?{data:ay(l)}:(ry(),{url:l});if(l instanceof j1)return{range:l};if(P1(l))return{data:l};if(Gl&&z1(l))return{data:await I1(l)};if(qt(typeof l=="object"),qt(oy(l)),"url"in l&&typeof l.url=="string"){if(Fh(l.url)){const{url:Ot,...Nt}=l;return{data:ay(Ot),...Nt}}ry()}return l},[l]);N.useEffect(()=>{const Ot=$r(tt());return Ot.promise.then(Nt=>{q({type:"RESOLVE",value:Nt})}).catch(Nt=>{q({type:"REJECT",error:Nt})}),()=>{bs(Ot)}},[tt,q]),N.useEffect(()=>{if(!(typeof Q>"u")){if(Q===!1){V();return}D()}},[Q]);function rt(){at&&(E&&E(at),j.current=new Array(at.numPages),k.current.setDocument(at))}function ht(){gt&&(Le(!1,gt.toString()),b&&b(gt))}N.useEffect(function(){ft({type:"RESET"})},[ft,Q]),N.useEffect(function(){if(!Q)return;const Nt=T?{...Q,...T}:Q,Jt=ad(Nt);A&&(Jt.onProgress=A),S&&(Jt.onPassword=S);const se=Jt,pi=se.promise.then(gi=>{ft({type:"RESOLVE",value:gi})}).catch(gi=>{se.destroyed||ft({type:"REJECT",error:gi})});return()=>{pi.finally(()=>se.destroy())}},[T,ft,Q]),N.useEffect(()=>{if(!(typeof at>"u")){if(at===!1){ht();return}rt()}},[at]),N.useEffect(function(){k.current.setViewer(At.current),k.current.setExternalLinkRel(a),k.current.setExternalLinkTarget(o)},[a,o]);const ot=N.useCallback((Ot,Nt)=>{j.current[Ot]=Nt},[]),Yt=N.useCallback(Ot=>{delete j.current[Ot]},[]),_t=N.useMemo(()=>({imageResourcesPath:d,linkService:k.current,onItemClick:y,pdf:at,registerPage:ot,renderMode:C,rotate:O,scale:M,unregisterPage:Yt}),[d,y,at,ot,C,O,M,Yt]),zt=N.useMemo(()=>db(P,()=>at),[P,at]);function Pe(){function Ot(Jt){return!!Jt?.pdf}if(!Ot(_t))throw new Error("pdf is undefined");const Nt=typeof t=="function"?t(_t):t;return $.jsx(fb.Provider,{value:_t,children:Nt})}function Ye(){return l?at==null?$.jsx(ma,{type:"loading",children:typeof p=="function"?p():p}):at===!1?$.jsx(ma,{type:"error",children:typeof s=="function"?s():s}):Pe():$.jsx(ma,{type:"no-data",children:typeof g=="function"?g():g})}return $.jsx("div",{className:jl("react-pdf__Document",n),ref:u,...zt,children:Ye()})});function mb(){return N.useContext(fb)}function yb(){for(var h=[],t=0;t<arguments.length;t++)h[t]=arguments[t];var n=h.filter(Boolean);if(n.length<=1){var s=n[0];return s||null}return function(o){for(var l=0,u=n;l<u.length;l++){var d=u[l];typeof d=="function"?d(o):d&&(d.current=o)}}}const bb=N.createContext(null);function Vl(){return N.useContext(bb)}function q1(){const h=mb(),t=Vl();qt(t);const n={...h,...t},{imageResourcesPath:s,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:d,page:p,pdf:g,renderForms:y,rotate:b,scale:A=1}=n;qt(g),qt(p),qt(a);const[E,S]=Aa(),{value:_,error:w}=E,T=N.useRef(null);Le(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){_&&l&&l(_)}function O(){w&&(Le(!1,w.toString()),o&&o(w))}N.useEffect(function(){S({type:"RESET"})},[S,p]),N.useEffect(function(){if(!p)return;const q=$r(p.getAnnotations()),Q=q;return q.promise.then(Z=>{S({type:"RESOLVE",value:Z})}).catch(Z=>{S({type:"REJECT",error:Z})}),()=>{bs(Q)}},[S,p]),N.useEffect(()=>{if(_!==void 0){if(_===!1){O();return}C()}},[_]);function M(){d&&d()}function P(I){Le(!1,`${I}`),u&&u(I)}const B=N.useMemo(()=>p.getViewport({scale:A,rotation:b}),[p,b,A]);return N.useEffect(function(){if(!g||!p||!a||!_)return;const{current:q}=T;if(!q)return;const Q=B.clone({dontFlip:!0}),Z={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:g.annotationStorage,commentManager:null,div:q,l10n:null,linkService:a,page:p,structTreeLayer:null,viewport:Q},ut={annotations:_,annotationStorage:g.annotationStorage,div:q,imageResourcesPath:s,linkService:a,page:p,renderForms:y,viewport:Q};q.innerHTML="";try{new ud(Z).render(ut),M()}catch(ft){P(ft)}return()=>{}},[_,s,a,p,g,y,B]),$.jsx("div",{className:jl("react-pdf__Page__annotations","annotationLayer"),ref:T})}const vb={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},X1=/^H(\d+)$/;function Y1(h){return h in vb}function ql(h){return"children"in h}function Ab(h){return ql(h)?h.children.length===1&&0 in h.children&&"id"in h.children[0]:!1}function $1(h){const t={};if(ql(h)){const{role:n}=h,s=n.match(X1);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(Y1(n)){const a=vb[n];a&&(t.role=a)}}return t}function Sb(h){const t={};if(ql(h)){if(h.alt!==void 0&&(t["aria-label"]=h.alt),h.lang!==void 0&&(t.lang=h.lang),Ab(h)){const[n]=h.children;if(n){const s=Sb(n);return{...t,...s}}}}else"id"in h&&(t["aria-owns"]=h.id);return t}function K1(h){return h?{...$1(h),...Sb(h)}:null}function Eb({className:h,node:t}){const n=N.useMemo(()=>K1(t),[t]),s=N.useMemo(()=>!ql(t)||Ab(t)?null:t.children.map((a,o)=>$.jsx(Eb,{node:a},o)),[t]);return $.jsx("span",{className:h,...n,children:s})}function W1(){const h=Vl();qt(h);const{onGetStructTreeError:t,onGetStructTreeSuccess:n}=h,[s,a]=Aa(),{value:o,error:l}=s,{customTextRenderer:u,page:d}=h;function p(){o&&n&&n(o)}function g(){l&&(Le(!1,l.toString()),t&&t(l))}return N.useEffect(function(){a({type:"RESET"})},[a,d]),N.useEffect(function(){if(u||!d)return;const b=$r(d.getStructTree()),A=b;return b.promise.then(E=>{a({type:"RESOLVE",value:E})}).catch(E=>{a({type:"REJECT",error:E})}),()=>bs(A)},[u,d,a]),N.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}p()}},[o]),o?$.jsx(Eb,{className:"react-pdf__Page__structTree structTree",node:o}):null}const ly=Hn;function Q1(h){const t=Vl();qt(t);const n={...t,...h},{_className:s,canvasBackground:a,devicePixelRatio:o=F1(),onRenderError:l,onRenderSuccess:u,page:d,renderForms:p,renderTextLayer:g,rotate:y,scale:b}=n,{canvasRef:A}=h;qt(d);const E=N.useRef(null);function S(){d&&u&&u(Uh(d,b))}function _(O){H1(O)||(Le(!1,O.toString()),l&&l(O))}const w=N.useMemo(()=>d.getViewport({scale:b*o,rotation:y}),[o,d,y,b]),T=N.useMemo(()=>d.getViewport({scale:b,rotation:y}),[d,y,b]);N.useEffect(function(){if(!d)return;d.cleanup();const{current:M}=E;if(!M)return;M.width=w.width,M.height=w.height,M.style.width=`${Math.floor(T.width)}px`,M.style.height=`${Math.floor(T.height)}px`,M.style.visibility="hidden";const P={annotationMode:p?ly.ENABLE_FORMS:ly.ENABLE,canvas:M,canvasContext:M.getContext("2d",{alpha:!1}),viewport:w};a&&(P.background=a);const B=d.render(P),I=B;return B.promise.then(()=>{M.style.visibility="",S()}).catch(_),()=>bs(I)},[a,d,p,w,T]);const C=N.useCallback(()=>{const{current:O}=E;O&&(O.width=0,O.height=0)},[]);return N.useEffect(()=>C,[C]),$.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:yb(A,E),style:{display:"block",userSelect:"none"},children:g?$.jsx(W1,{}):null})}function Z1(h){return"str"in h}function J1(){const h=Vl();qt(h);const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:s,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:l,pageIndex:u,pageNumber:d,rotate:p,scale:g}=h;qt(l);const[y,b]=Aa(),{value:A,error:E}=y,S=N.useRef(null);Le(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){A&&s&&s(A)}function w(){E&&(Le(!1,E.toString()),n&&n(E))}N.useEffect(function(){b({type:"RESET"})},[l,b]),N.useEffect(function(){if(!l)return;const I=$r(l.getTextContent()),q=I;return I.promise.then(Q=>{b({type:"RESOLVE",value:Q})}).catch(Q=>{b({type:"REJECT",error:Q})}),()=>bs(q)},[l,b]),N.useEffect(()=>{if(A!==void 0){if(A===!1){w();return}_()}},[A]);const T=N.useCallback(()=>{o&&o()},[o]),C=N.useCallback(B=>{Le(!1,B.toString()),a&&a(B)},[a]);function O(){const B=S.current;B&&B.classList.add("selecting")}function M(){const B=S.current;B&&B.classList.remove("selecting")}const P=N.useMemo(()=>l.getViewport({scale:g,rotation:p}),[l,p,g]);return N.useLayoutEffect(function(){if(!l||!A)return;const{current:I}=S;if(!I)return;I.innerHTML="";const q=l.streamTextContent({includeMarkedContent:!0}),Q={container:I,textContentSource:q,viewport:P},Z=new kr(Q),ut=Z;return Z.render().then(()=>{const ft=document.createElement("div");ft.className="endOfContent",I.append(ft);const at=I.querySelectorAll('[role="presentation"]');if(t){let gt=0;A.items.forEach((k,j)=>{if(!Z1(k))return;const J=at[gt];if(!J)return;const dt=t({pageIndex:u,pageNumber:d,itemIndex:j,...k});J.innerHTML=dt,gt+=k.str&&k.hasEOL?2:1})}T()}).catch(C),()=>bs(ut)},[t,C,T,l,u,d,A,P]),$.jsx("div",{className:jl("react-pdf__Page__textContent","textLayer"),onMouseUp:M,onMouseDown:O,ref:S})}const cy=1;function tw(h){const n={...mb(),...h},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:l,children:u,className:d,customRenderer:p,customTextRenderer:g,devicePixelRatio:y,error:b="Failed to load the page.",height:A,inputRef:E,loading:S="Loading page…",noData:_="No page specified.",onGetAnnotationsError:w,onGetAnnotationsSuccess:T,onGetStructTreeError:C,onGetStructTreeSuccess:O,onGetTextError:M,onGetTextSuccess:P,onLoadError:B,onLoadSuccess:I,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:Q,onRenderError:Z,onRenderSuccess:ut,onRenderTextLayerError:ft,onRenderTextLayerSuccess:at,pageIndex:gt,pageNumber:k,pdf:j,registerPage:J,renderAnnotationLayer:dt=!0,renderForms:At=!1,renderMode:D="canvas",renderTextLayer:V=!0,rotate:W,scale:tt=cy,unregisterPage:rt,width:ht,...ot}=n,[Yt,_t]=Aa(),{value:zt,error:Pe}=Yt,Ye=N.useRef(null);qt(j);const Ot=us(k)?k-1:gt??null,Nt=k??(us(gt)?gt+1:null),Jt=W??(zt?zt.rotate:null),se=N.useMemo(()=>{if(!zt)return null;let Sn=1;const En=tt??cy;if(ht||A){const Rn=zt.getViewport({scale:1,rotation:Jt});ht?Sn=ht/Rn.width:A&&(Sn=A/Rn.height)}return En*Sn},[A,zt,Jt,tt,ht]);N.useEffect(function(){return()=>{us(Ot)&&a&&rt&&rt(Ot)}},[a,j,Ot,rt]);function pi(){if(I){if(!zt||!se)return;I(Uh(zt,se))}if(a&&J){if(!us(Ot)||!Ye.current)return;J(Ot,Ye.current)}}function gi(){Pe&&(Le(!1,Pe.toString()),B&&B(Pe))}N.useEffect(function(){_t({type:"RESET"})},[_t,j,Ot]),N.useEffect(function(){if(!j||!Nt)return;const En=$r(j.getPage(Nt)),Rn=En;return En.promise.then(Es=>{_t({type:"RESOLVE",value:Es})}).catch(Es=>{_t({type:"REJECT",error:Es})}),()=>bs(Rn)},[_t,j,Nt]),N.useEffect(()=>{if(zt!==void 0){if(zt===!1){gi();return}pi()}},[zt,se]);const qi=N.useMemo(()=>us(Ot)&&Nt&&us(Jt)&&us(se)?{_className:s,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:w,onGetAnnotationsSuccess:T,onGetStructTreeError:C,onGetStructTreeSuccess:O,onGetTextError:M,onGetTextSuccess:P,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:Q,onRenderError:Z,onRenderSuccess:ut,onRenderTextLayerError:ft,onRenderTextLayerSuccess:at,page:zt,pageIndex:Ot,pageNumber:Nt,renderForms:At,renderTextLayer:V,rotate:Jt,scale:se}:null,[s,o,g,y,w,T,C,O,M,P,q,Q,Z,ut,ft,at,zt,Ot,Nt,At,V,Jt,se]),xa=N.useMemo(()=>db(ot,()=>zt&&(se?Uh(zt,se):void 0)),[ot,zt,se]),mi=`${Ot}@${se}/${Jt}`;function Xl(){switch(D){case"custom":return qt(p),$.jsx(p,{},`${mi}_custom`);case"none":return null;case"canvas":default:return $.jsx(Q1,{canvasRef:l},`${mi}_canvas`)}}function Yl(){return V?$.jsx(J1,{},`${mi}_text`):null}function Oe(){return dt?$.jsx(q1,{},`${mi}_annotations`):null}function $l(){function Sn(Rn){return!!Rn?.page}if(!Sn(qi))throw new Error("page is undefined");const En=typeof u=="function"?u(qi):u;return $.jsxs(bb.Provider,{value:qi,children:[Xl(),Yl(),Oe(),En]})}function Kr(){return Nt?j===null||zt===void 0||zt===null?$.jsx(ma,{type:"loading",children:typeof S=="function"?S():S}):j===!1||zt===!1?$.jsx(ma,{type:"error",children:typeof b=="function"?b():b}):$l():$.jsx(ma,{type:"no-data",children:typeof _=="function"?_():_})}return $.jsx("div",{className:jl(s,d),"data-page-number":Nt,ref:yb(E,Ye),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${se}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...xa,children:Kr()})}U1();Gi.workerSrc="pdf.worker.mjs";Gi.workerSrc=new URL("/cha-check/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();function wb({open:h,onClose:t,fileUrl:n}){const[s,a]=N.useState(null),[o,l]=N.useState({w:595,h:842}),[u,d]=N.useState(1),[p,g]=N.useState(1),[y,b]=N.useState(1),A=N.useRef(null),E=N.useRef(0),S=N.useMemo(()=>({url:n,withCredentials:!1}),[n]);N.useEffect(()=>{const T=C=>C.key==="Escape"&&t?.();return h&&window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[h,t]);const _=()=>{if(!A.current)return;const T=A.current.clientWidth,C=A.current.clientHeight,O=Math.min(T/o.w,C/o.h);d(O)},w=()=>{cancelAnimationFrame(E.current),E.current=requestAnimationFrame(_)};return N.useLayoutEffect(()=>{if(!h)return;w();const T=()=>w();return window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T),cancelAnimationFrame(E.current)}},[h,o.w,o.h]),h?$.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[$.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),$.jsxs("div",{className:"relative bg-white rounded-2xl shadow-[0_0_10px_rgba(0,0,0,0.25)] w-[94vw] max-w-5xl h-[86vh] flex flex-col",children:[$.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b",children:[$.jsx("h2",{className:"font-semibold",children:"คู่มือการใช้งาน"}),$.jsx("button",{onClick:t,className:"rounded px-3 py-1 hover:bg-gray-100",children:"✕"})]}),$.jsxs("div",{className:"flex items-center justify-center gap-3 py-2 border-b bg-gray-50 text-sm",children:[$.jsx("button",{onClick:()=>g(T=>Math.max(.5,T-.1)),className:"rounded border px-2 py-1",children:"-"}),$.jsxs("span",{children:["Zoom ",Math.round(u*p*100),"%"]}),$.jsx("button",{onClick:()=>g(T=>Math.min(3,T+.1)),className:"rounded border px-2 py-1",children:"+"}),$.jsx("span",{className:"mx-2",children:"|"}),$.jsx("button",{onClick:()=>{g(1),w()},className:"rounded border px-2 py-1",title:"Fit page",children:"Fit"}),$.jsx("span",{className:"mx-2",children:"|"}),$.jsx("button",{onClick:()=>b(T=>Math.max(1,T-1)),className:"rounded border px-2 py-1",children:"◀"}),$.jsxs("span",{children:["Page ",y," / ",s??"…"]}),$.jsx("button",{onClick:()=>b(T=>s?Math.min(s,T+1):T),className:"rounded border px-2 py-1",children:"▶"})]}),$.jsx("div",{ref:A,className:"flex-1 overflow-auto flex justify-center bg-gray-100 py-4 px-2",children:$.jsx(V1,{file:S,onLoadSuccess:async T=>{a(T.numPages);const O=(await T.getPage(1)).getViewport({scale:1});l({w:O.width,h:O.height})},loading:$.jsx("div",{className:"text-gray-500",children:"กำลังโหลด PDF…"}),onLoadError:T=>console.error("PDF load error:",T),children:$.jsx(tw,{pageNumber:y,scale:u*p,renderTextLayer:!1,renderAnnotationLayer:!1})})}),$.jsxs("div",{className:"absolute right-3 bottom-3 flex gap-2",children:[$.jsx("a",{href:n,download:!0,className:"rounded-lg border px-3 py-1.5 hover:bg-gray-50",children:"ดาวน์โหลด PDF"}),$.jsx("a",{href:n,target:"_blank",rel:"noreferrer",className:"rounded-lg border px-3 py-1.5 hover:bg-gray-50",children:"เปิดแท็บใหม่"})]})]})]}):null}function ew(){const[h,t]=N.useState(!1),n="/cha-check/",s=`${n}docs/how_to_use.pdf`;return $.jsxs("div",{className:"min-h-screen bg-background-primary flex flex-col items-center justify-center",children:[$.jsx("img",{className:"w-[300px] md:w-[500px]",src:`${n}images/ChaCheck_logo.png`,alt:"logo",draggable:"false"}),$.jsxs("div",{className:"mt-14 md:mt-10 flex flex-col items-center space-y-4 md:space-y-6",children:[$.jsx("a",{href:`${n}check`,children:$.jsx("button",{className:"bg-background-green-tea text-text-white border-4 border-background-green-tea font-bold h-12 w-60 text-lg md:text-xl md:h-14 md:w-72 rounded-3xl cursor-pointer hover:bg-white hover:text-background-green-tea transition duration-300",children:"เริ่มต้นใช้งาน"})}),$.jsx("button",{onClick:()=>t(!0),className:"bg-white text-text-secondary border-4 border-text-secondary font-bold h-12 w-60 text-lg md:text-xl md:h-14 md:w-72 rounded-3xl cursor-pointer hover:bg-text-secondary hover:text-white transition duration-300",children:"คู่มือการใช้งาน 💡"}),$.jsx("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScXTPDrVulr0EqENs-uJYpXLRAAjr5mylTdv6Ftv6t99HY4WA/viewform",target:"_blank",rel:"noreferrer",className:"font-bold text-lg md:text-xl text-text-primary underline underline-offset-4 hover:opacity-80 transition duration-300 hover:scale-105",children:"แบบฟอร์มประเมินความพึงพอใจ"})]}),$.jsx(wb,{open:h,onClose:()=>t(!1),fileUrl:s})]})}const nw=({type:h,menu:t,imgPath:n,tsp:s,volume:a,brix:o,sugar:l})=>{const u="/cha-check/",d=y=>y?.startsWith("http")?y:`${u}${(y||"").replace(/^\/+/,"")}`,p=y=>{const b=Math.max(0,y),A=Math.floor(b),E=b%1!==0,S=Array(A).fill(0).map((T,C)=>$.jsx("img",{src:d("images/teaspoon-full.png"),alt:"full teaspoon",className:"w-7 h-7 md:w-8 md:h-8",draggable:"false"},C)),_=E?$.jsx("img",{src:d("images/teaspoon-half.png"),alt:"half teaspoon",className:"w-7 h-7 md:w-8 md:h-8",draggable:"false"},"half"):null,w=_?[...S,_]:S;return b>7?$.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[$.jsx("img",{src:d("images/teaspoon-full.png"),alt:"teaspoon",className:"w-7 h-7 md:w-8 md:h-8",draggable:"false"}),$.jsxs("span",{className:"text-lg font-semibold text-text-primary",children:["x ",b]})]}):$.jsx("div",{className:"flex flex-wrap gap-1 justify-center items-center",children:w})},g=h==="thai-tea"?"bg-background-thai-tea":"bg-background-green-tea";return $.jsxs("div",{className:`
        bg-white rounded-2xl text-center shadow-card
        flex flex-col items-center
        w-full
        max-w-[340px] sm:max-w-[400px] md:max-w-[480px] lg:max-w-[520px]
      `,children:[$.jsx("div",{className:`w-full rounded-t-2xl ${g} text-white font-bold
          text-xl md:text-2xl lg:text-4xl py-5`,children:t}),$.jsx("div",{className:"my-5 px-6 w-full flex justify-center",children:$.jsx("img",{className:"max-h-[180px] md:max-h-[200px] object-contain",src:d(n?.startsWith("/")?n:`images/${n}`),alt:t,draggable:"false"})}),$.jsxs("div",{className:"mb-4 md:mb-6",children:[$.jsx("div",{children:p(s)}),$.jsxs("div",{className:"text-base md:text-xl font-semibold text-text-primary mt-1",children:["น้ำตาลประมาณ ",s," ช้อนชา"]})]}),$.jsx("div",{className:"w-full px-6 pb-6",children:$.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[$.jsx("div",{className:`rounded-xl ${g} text-white py-2 px-3`,children:$.jsxs("div",{className:"flex md:flex-col items-center justify-center gap-2",children:[$.jsx("span",{className:"material-symbols-outlined","aria-hidden":!0,children:"water_full"}),$.jsxs("div",{className:"font-semibold text-[15px]",children:["ปริมาณ: ",a," g"]})]})}),$.jsx("div",{className:`rounded-xl ${g} text-white py-2 px-3`,children:$.jsxs("div",{className:"flex md:flex-col items-center justify-center gap-2",children:[$.jsx("span",{className:"material-symbols-outlined","aria-hidden":!0,children:"gas_meter"}),$.jsxs("div",{className:"font-semibold text-[15px]",children:["% BRIX: ",o]})]})}),$.jsx("div",{className:`rounded-xl ${g} text-white py-2 px-3`,children:$.jsxs("div",{className:"flex md:flex-col items-center justify-center gap-2",children:[$.jsx("span",{className:"material-symbols-outlined","aria-hidden":!0,children:"deployed_code"}),$.jsxs("div",{className:"font-semibold text-[15px]",children:["น้ำตาล: ",l," g"]})]})})]})})]})},iw=({options:h,value:t,onChange:n,placeholder:s="Select…",className:a=""})=>{const[o,l]=N.useState(!1),[u,d]=N.useState(""),[p,g]=N.useState(t??null),y=t!==void 0?t:p,b=N.useRef(null),A=N.useRef(null),E=N.useRef(null),S=N.useId(),_=N.useMemo(()=>{if(!u.trim())return h;const M=u.toLowerCase();return h.filter(P=>P.label.toLowerCase().includes(M))},[h,u]);N.useEffect(()=>{function M(P){if(!b.current)return;const B=b.current.parentElement;B&&!B.contains(P.target)&&l(!1)}return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]);const[w,T]=N.useState(-1);N.useEffect(()=>{o?(T(0),setTimeout(()=>E.current?.focus(),0)):(d(""),T(-1))},[o]);function C(M){n?n(M):g(M),l(!1)}const O=h.find(M=>M.value===y)?.label??"";return $.jsxs("div",{className:`relative w-full max-w-xl ${a}`,children:[$.jsxs("button",{ref:b,type:"button","aria-haspopup":"listbox","aria-expanded":o,"aria-controls":`${S}-listbox`,className:`
          w-full text-left bg-white rounded-2xl px-5 py-3.5
          shadow-[0_0_10px_rgba(0,0,0,0.25)]
          focus:outline-none focus:ring-2 focus:ring-blue-400
        `,onClick:()=>l(M=>!M),children:[$.jsx("span",{className:"font-semibold text-text-primary",children:O||s}),$.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none",children:$.jsx("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:$.jsx("path",{d:"M5 7l5 6 5-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),o&&$.jsxs("div",{className:"absolute z-50 mt-2 w-full bg-white rounded-xl border border-gray-200 shadow-lg",role:"dialog",children:[$.jsx("div",{className:"p-2",children:$.jsx("input",{ref:E,type:"text",value:u,onChange:M=>d(M.target.value),placeholder:"Search…",className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"Search options"})}),$.jsxs("ul",{ref:A,id:`${S}-listbox`,role:"listbox",className:"max-h-60 overflow-auto py-1",children:[_.length===0&&$.jsx("li",{className:"px-4 py-2 text-gray-500",children:"No results"}),_.map((M,P)=>{const B=P===w,I=M.value===y;return $.jsx("li",{role:"option","aria-selected":I,tabIndex:-1,className:`
                    cursor-pointer px-4 py-2
                    ${B?"bg-gray-100":""}
                    ${I?"font-semibold text-text-primary":"text-text-secondary"}
                  `,onMouseEnter:()=>T(P),onClick:()=>C(M.value),onKeyDown:q=>{q.key==="Enter"&&C(M.value)},children:M.label},M.value)})]}),$.jsx("div",{className:"sr-only","aria-hidden":!0,onKeyDown:M=>{o&&(M.key==="Escape"&&l(!1),M.key==="ArrowDown"&&(M.preventDefault(),T(P=>Math.min(P+1,_.length-1))),M.key==="ArrowUp"&&(M.preventDefault(),T(P=>Math.max(P-1,0))),M.key==="Home"&&(M.preventDefault(),T(0)),M.key==="End"&&(M.preventDefault(),T(_.length-1)),M.key==="Enter"&&_[w]&&(M.preventDefault(),C(_[w].value)))}})]})]})},sw=()=>{const[h,t]=N.useState([]),[n,s]=N.useState(null),[a,o]=N.useState(!0),[l,u]=N.useState(null),[d,p]=N.useState(!1),g="/cha-check/",y=`${g}docs/how_to_use.pdf`;N.useEffect(()=>{(async()=>{try{const E=await fetch(`${g}data.json`);if(!E.ok)throw new Error("Failed to load data.json");const S=await E.json();t(S)}catch(E){u(E.message)}finally{o(!1)}})()},[g]);const b=N.useMemo(()=>h.map(E=>({value:E.brand,label:E.brand})),[h]),A=N.useMemo(()=>h.find(E=>E.brand===n)||null,[h,n]);return $.jsxs("div",{className:"min-h-screen bg-background-secondary flex flex-col",children:[$.jsx("header",{className:"flex justify-center pt-5",children:$.jsx(Xh,{to:`${g}`,children:$.jsx("img",{className:"w-28 max-h-[74px]",src:`${g}images/ChaCheck_logo.png`,alt:"ChaCheck logo",draggable:"false"})})}),$.jsxs("main",{className:"flex-grow flex flex-col items-center px-4",children:[$.jsx("div",{className:"w-full max-w-2xl mt-4 flex justify-center items-center",children:$.jsx(iw,{options:b,value:n,onChange:s,placeholder:"Select a brand…"})}),$.jsxs("div",{className:"w-full mt-8 mb-2 flex flex-col items-center gap-10 lg:flex-row lg:justify-center lg:items-start lg:gap-16",children:[a&&$.jsx("div",{className:"text-gray-600",children:"Loading…"}),l&&$.jsx("div",{className:"text-red-600",children:l}),!a&&!l&&!A&&$.jsx("div",{className:"text-gray-600",children:"Select a brand to see menus"}),!a&&!l&&A&&A.menu.map(E=>$.jsx(nw,{type:E.type,menu:E.title,imgPath:E.img_path,tsp:E.tsp,volume:E.volume,brix:E.brix,sugar:E.sugar},`${A.brand}-${E.type}`))]})]}),$.jsxs("footer",{className:"text-center mt-auto space-y-3 pb-12",children:[$.jsx("div",{className:"text-text-warning font-semibold text-lg md:text-2xl",children:"*WHO แนะนำให้บริโภคน้ำตาลไม่เกิน 6 ช้อนชาต่อวัน"}),$.jsx("button",{onClick:()=>p(!0),className:"bg-white text-text-secondary border-4 border-text-secondary font-bold h-12 w-60 text-lg md:text-xl md:h-14 md:w-72 rounded-3xl cursor-pointer hover:bg-text-secondary hover:text-white transition duration-300",children:"คู่มือการใช้งาน 💡"}),$.jsx("div",{className:"mt-2",children:$.jsx("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScXTPDrVulr0EqENs-uJYpXLRAAjr5mylTdv6Ftv6t99HY4WA/viewform",target:"_blank",rel:"noreferrer",className:"font-bold text-lg md:text-xl text-text-primary underline underline-offset-4 hover:opacity-80 transition duration-300 hover:scale-105",children:"แบบฟอร์มประเมินความพึงพอใจ"})})]}),$.jsx(wb,{open:d,onClose:()=>p(!1),fileUrl:y})]})};Z0.createRoot(document.getElementById("root")).render($.jsx(dS,{basename:"/cha-check/",children:$.jsxs(GA,{children:[$.jsx(Th,{index:!0,path:"/",element:$.jsx(ew,{})}),$.jsx(Th,{path:"check",element:$.jsx(sw,{})})]})}));
